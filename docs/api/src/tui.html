<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>src.tui API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../src.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;src</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#ConnectionPanel">ConnectionPanel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ConnectionPanel.__init__">ConnectionPanel</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.logger">logger</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.connections">connections</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.api_keys">api_keys</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.filtered_connections">filtered_connections</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.selected_connection">selected_connection</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.selected_api_key_id">selected_api_key_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.filter_text">filter_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.current_page">current_page</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.page_size">page_size</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.refresh_interval">refresh_interval</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.refresh_task">refresh_task</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.is_refreshing">is_refreshing</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.compose">compose</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.on_mount">on_mount</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.update_connections">update_connections</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.update_api_keys">update_api_keys</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.on_button_pressed">on_button_pressed</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.on_data_table_row_selected">on_data_table_row_selected</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.on_input_changed">on_input_changed</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.get_connection_statistics">get_connection_statistics</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.get_api_key_statistics">get_api_key_statistics</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.cleanup">cleanup</a>
                        </li>
                        <li>
                                <a class="function" href="#ConnectionPanel.on_unmount">on_unmount</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.can_focus">can_focus</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConnectionPanel.can_focus_children">can_focus_children</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DShieldTUIApp">DShieldTUIApp</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#DShieldTUIApp.CSS">CSS</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.config_path">config_path</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.user_config">user_config</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.logger">logger</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.tcp_server">tcp_server</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_process">server_process</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_thread">server_thread</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_running">server_running</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_port">server_port</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_address">server_address</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.current_panel">current_panel</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.log_entries">log_entries</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.connections">connections</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.server_status">server_status</a>
                        </li>
                        <li>
                                <a class="variable" href="#DShieldTUIApp.metrics_subscriber">metrics_subscriber</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.compose">compose</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_mount">on_mount</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_unmount">on_unmount</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_quit">action_quit</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_restart_server">action_restart_server</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_stop_server">action_stop_server</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_generate_api_key">action_generate_api_key</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_test_log">action_test_log</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_clear_logs">action_clear_logs</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_show_help">action_show_help</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_switch_panel">action_switch_panel</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.action_focus_filter">action_focus_filter</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_server_start">on_server_start</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_server_stop">on_server_stop</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_server_restart">on_server_restart</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_server_status_update">on_server_status_update</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_connection_update">on_connection_update</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_log_update">on_log_update</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_api_key_generate">on_api_key_generate</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_api_key_revoke">on_api_key_revoke</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_connection_disconnect">on_connection_disconnect</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_connection_refresh">on_connection_refresh</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.on_connection_filter">on_connection_filter</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.watch_server_running">watch_server_running</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.watch_server_port">watch_server_port</a>
                        </li>
                        <li>
                                <a class="function" href="#DShieldTUIApp.watch_server_address">watch_server_address</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LogPanel">LogPanel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LogPanel.__init__">LogPanel</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogPanel.logger">logger</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogPanel.log_buffer">log_buffer</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogPanel.filter_config">filter_config</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.compose">compose</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.on_mount">on_mount</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.add_log_entries">add_log_entries</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.clear_logs">clear_logs</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.on_button_pressed">on_button_pressed</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.on_checkbox_changed">on_checkbox_changed</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.on_input_changed">on_input_changed</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.get_log_statistics">get_log_statistics</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.set_max_entries">set_max_entries</a>
                        </li>
                        <li>
                                <a class="function" href="#LogPanel.on_unmount">on_unmount</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogPanel.can_focus">can_focus</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogPanel.can_focus_children">can_focus_children</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ServerPanel">ServerPanel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ServerPanel.__init__">ServerPanel</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.logger">logger</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.server_running">server_running</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.server_status">server_status</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.server_config">server_config</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.uptime_start">uptime_start</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.process_manager">process_manager</a>
                        </li>
                        <li>
                                <a class="function" href="#ServerPanel.compose">compose</a>
                        </li>
                        <li>
                                <a class="function" href="#ServerPanel.on_mount">on_mount</a>
                        </li>
                        <li>
                                <a class="function" href="#ServerPanel.update_server_statistics">update_server_statistics</a>
                        </li>
                        <li>
                                <a class="function" href="#ServerPanel.on_button_pressed">on_button_pressed</a>
                        </li>
                        <li>
                                <a class="function" href="#ServerPanel.get_server_health">get_server_health</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.can_focus">can_focus</a>
                        </li>
                        <li>
                                <a class="variable" href="#ServerPanel.can_focus_children">can_focus_children</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StatusBar">StatusBar</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#StatusBar.__init__">StatusBar</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.logger">logger</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.server_status">server_status</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.connection_count">connection_count</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.authenticated_count">authenticated_count</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.api_key_count">api_key_count</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.error_count">error_count</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.last_update">last_update</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.on_mount">on_mount</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.update_server_status">update_server_status</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.update_connection_count">update_connection_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.update_api_key_count">update_api_key_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.update_error_count">update_error_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.update_display">update_display</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.watch_connection_count">watch_connection_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.watch_authenticated_count">watch_authenticated_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.watch_api_key_count">watch_api_key_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.watch_error_count">watch_error_count</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.watch_last_update">watch_last_update</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.get_status_summary">get_status_summary</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.set_status_message">set_status_message</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.add_status_indicator">add_status_indicator</a>
                        </li>
                        <li>
                                <a class="function" href="#StatusBar.remove_status_indicator">remove_status_indicator</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.can_focus">can_focus</a>
                        </li>
                        <li>
                                <a class="variable" href="#StatusBar.can_focus_children">can_focus_children</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../src.html">src</a><wbr>.tui    </h1>

                        <div class="docstring"><p>Terminal UI package for DShield MCP Server.</p>

<p>This package provides a terminal-based user interface for managing the
DShield MCP server, including connection management, monitoring, and control.</p>
</div>

                        <input id="mod-tui-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-tui-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="ch">#!/usr/bin/env python3</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="sd">&quot;&quot;&quot;Terminal UI package for DShield MCP Server.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="sd">This package provides a terminal-based user interface for managing the</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">DShield MCP server, including connection management, monitoring, and control.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.connection_panel</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConnectionPanel</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.log_panel</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogPanel</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.server_panel</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerPanel</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.status_bar</span><span class="w"> </span><span class="kn">import</span> <span class="n">StatusBar</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.tui_app</span><span class="w"> </span><span class="kn">import</span> <span class="n">DShieldTUIApp</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>    <span class="s2">&quot;ConnectionPanel&quot;</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>    <span class="s2">&quot;DShieldTUIApp&quot;</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a>    <span class="s2">&quot;LogPanel&quot;</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="s2">&quot;ServerPanel&quot;</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="s2">&quot;StatusBar&quot;</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="ConnectionPanel">
                            <input id="ConnectionPanel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ConnectionPanel</span><wbr>(<span class="base">textual.containers.Container</span>):

                <label class="view-source-button" for="ConnectionPanel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel-86"><a href="#ConnectionPanel-86"><span class="linenos"> 86</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ConnectionPanel</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
</span><span id="ConnectionPanel-87"><a href="#ConnectionPanel-87"><span class="linenos"> 87</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Panel for managing TCP connections and API keys.</span>
</span><span id="ConnectionPanel-88"><a href="#ConnectionPanel-88"><span class="linenos"> 88</span></a>
</span><span id="ConnectionPanel-89"><a href="#ConnectionPanel-89"><span class="linenos"> 89</span></a><span class="sd">    This panel displays active connections, allows disconnecting clients,</span>
</span><span id="ConnectionPanel-90"><a href="#ConnectionPanel-90"><span class="linenos"> 90</span></a><span class="sd">    and provides API key management functionality.</span>
</span><span id="ConnectionPanel-91"><a href="#ConnectionPanel-91"><span class="linenos"> 91</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-92"><a href="#ConnectionPanel-92"><span class="linenos"> 92</span></a>
</span><span id="ConnectionPanel-93"><a href="#ConnectionPanel-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;connection-panel&quot;</span><span class="p">,</span> <span class="n">refresh_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-94"><a href="#ConnectionPanel-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the connection panel.</span>
</span><span id="ConnectionPanel-95"><a href="#ConnectionPanel-95"><span class="linenos"> 95</span></a>
</span><span id="ConnectionPanel-96"><a href="#ConnectionPanel-96"><span class="linenos"> 96</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-97"><a href="#ConnectionPanel-97"><span class="linenos"> 97</span></a><span class="sd">            id: Panel ID</span>
</span><span id="ConnectionPanel-98"><a href="#ConnectionPanel-98"><span class="linenos"> 98</span></a><span class="sd">            refresh_interval: Refresh interval in seconds</span>
</span><span id="ConnectionPanel-99"><a href="#ConnectionPanel-99"><span class="linenos"> 99</span></a>
</span><span id="ConnectionPanel-100"><a href="#ConnectionPanel-100"><span class="linenos">100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-101"><a href="#ConnectionPanel-101"><span class="linenos">101</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="ConnectionPanel-102"><a href="#ConnectionPanel-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-103"><a href="#ConnectionPanel-103"><span class="linenos">103</span></a>
</span><span id="ConnectionPanel-104"><a href="#ConnectionPanel-104"><span class="linenos">104</span></a>        <span class="c1"># State</span>
</span><span id="ConnectionPanel-105"><a href="#ConnectionPanel-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel-106"><a href="#ConnectionPanel-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel-107"><a href="#ConnectionPanel-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel-108"><a href="#ConnectionPanel-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-109"><a href="#ConnectionPanel-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-110"><a href="#ConnectionPanel-110"><span class="linenos">110</span></a>
</span><span id="ConnectionPanel-111"><a href="#ConnectionPanel-111"><span class="linenos">111</span></a>        <span class="c1"># Filtering and pagination</span>
</span><span id="ConnectionPanel-112"><a href="#ConnectionPanel-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ConnectionPanel-113"><a href="#ConnectionPanel-113"><span class="linenos">113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ConnectionPanel-114"><a href="#ConnectionPanel-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="ConnectionPanel-115"><a href="#ConnectionPanel-115"><span class="linenos">115</span></a>
</span><span id="ConnectionPanel-116"><a href="#ConnectionPanel-116"><span class="linenos">116</span></a>        <span class="c1"># Refresh management</span>
</span><span id="ConnectionPanel-117"><a href="#ConnectionPanel-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">refresh_interval</span>
</span><span id="ConnectionPanel-118"><a href="#ConnectionPanel-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-119"><a href="#ConnectionPanel-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ConnectionPanel-120"><a href="#ConnectionPanel-120"><span class="linenos">120</span></a>
</span><span id="ConnectionPanel-121"><a href="#ConnectionPanel-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="ConnectionPanel-122"><a href="#ConnectionPanel-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the connection panel layout.</span>
</span><span id="ConnectionPanel-123"><a href="#ConnectionPanel-123"><span class="linenos">123</span></a>
</span><span id="ConnectionPanel-124"><a href="#ConnectionPanel-124"><span class="linenos">124</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel-125"><a href="#ConnectionPanel-125"><span class="linenos">125</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="ConnectionPanel-126"><a href="#ConnectionPanel-126"><span class="linenos">126</span></a>
</span><span id="ConnectionPanel-127"><a href="#ConnectionPanel-127"><span class="linenos">127</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-128"><a href="#ConnectionPanel-128"><span class="linenos">128</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Connection Management&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-129"><a href="#ConnectionPanel-129"><span class="linenos">129</span></a>
</span><span id="ConnectionPanel-130"><a href="#ConnectionPanel-130"><span class="linenos">130</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel-131"><a href="#ConnectionPanel-131"><span class="linenos">131</span></a>            <span class="c1"># Connection controls</span>
</span><span id="ConnectionPanel-132"><a href="#ConnectionPanel-132"><span class="linenos">132</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;connection-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel-133"><a href="#ConnectionPanel-133"><span class="linenos">133</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Disconnect Selected&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;disconnect-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel-134"><a href="#ConnectionPanel-134"><span class="linenos">134</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Disconnect All&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;disconnect-all-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-135"><a href="#ConnectionPanel-135"><span class="linenos">135</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Refresh&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;refresh-connections-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-136"><a href="#ConnectionPanel-136"><span class="linenos">136</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Auto Refresh&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;auto-refresh-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-137"><a href="#ConnectionPanel-137"><span class="linenos">137</span></a>
</span><span id="ConnectionPanel-138"><a href="#ConnectionPanel-138"><span class="linenos">138</span></a>            <span class="c1"># Connection filter</span>
</span><span id="ConnectionPanel-139"><a href="#ConnectionPanel-139"><span class="linenos">139</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;connection-filter&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel-140"><a href="#ConnectionPanel-140"><span class="linenos">140</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Filter:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;filter-label&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-141"><a href="#ConnectionPanel-141"><span class="linenos">141</span></a>                <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span>
</span><span id="ConnectionPanel-142"><a href="#ConnectionPanel-142"><span class="linenos">142</span></a>                    <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Filter by address or key ID...&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connection-filter-input&quot;</span>
</span><span id="ConnectionPanel-143"><a href="#ConnectionPanel-143"><span class="linenos">143</span></a>                <span class="p">)</span>
</span><span id="ConnectionPanel-144"><a href="#ConnectionPanel-144"><span class="linenos">144</span></a>
</span><span id="ConnectionPanel-145"><a href="#ConnectionPanel-145"><span class="linenos">145</span></a>            <span class="c1"># Connections table</span>
</span><span id="ConnectionPanel-146"><a href="#ConnectionPanel-146"><span class="linenos">146</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Active Connections:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-147"><a href="#ConnectionPanel-147"><span class="linenos">147</span></a>            <span class="k">yield</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connections-table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-148"><a href="#ConnectionPanel-148"><span class="linenos">148</span></a>
</span><span id="ConnectionPanel-149"><a href="#ConnectionPanel-149"><span class="linenos">149</span></a>            <span class="c1"># Pagination controls</span>
</span><span id="ConnectionPanel-150"><a href="#ConnectionPanel-150"><span class="linenos">150</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;pagination-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel-151"><a href="#ConnectionPanel-151"><span class="linenos">151</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Previous&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;prev-page-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel-152"><a href="#ConnectionPanel-152"><span class="linenos">152</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Page 1 of 1&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;page-info&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-153"><a href="#ConnectionPanel-153"><span class="linenos">153</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Next&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;next-page-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel-154"><a href="#ConnectionPanel-154"><span class="linenos">154</span></a>
</span><span id="ConnectionPanel-155"><a href="#ConnectionPanel-155"><span class="linenos">155</span></a>            <span class="c1"># API Key controls</span>
</span><span id="ConnectionPanel-156"><a href="#ConnectionPanel-156"><span class="linenos">156</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;api-key-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel-157"><a href="#ConnectionPanel-157"><span class="linenos">157</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Generate API Key&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;generate-api-key-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-158"><a href="#ConnectionPanel-158"><span class="linenos">158</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Revoke Selected&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;revoke-api-key-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel-159"><a href="#ConnectionPanel-159"><span class="linenos">159</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Refresh Keys&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;refresh-keys-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-160"><a href="#ConnectionPanel-160"><span class="linenos">160</span></a>
</span><span id="ConnectionPanel-161"><a href="#ConnectionPanel-161"><span class="linenos">161</span></a>            <span class="c1"># API Keys table</span>
</span><span id="ConnectionPanel-162"><a href="#ConnectionPanel-162"><span class="linenos">162</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;API Keys:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-163"><a href="#ConnectionPanel-163"><span class="linenos">163</span></a>            <span class="k">yield</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api-keys-table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-164"><a href="#ConnectionPanel-164"><span class="linenos">164</span></a>
</span><span id="ConnectionPanel-165"><a href="#ConnectionPanel-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-166"><a href="#ConnectionPanel-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-167"><a href="#ConnectionPanel-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection panel mounted&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-168"><a href="#ConnectionPanel-168"><span class="linenos">168</span></a>
</span><span id="ConnectionPanel-169"><a href="#ConnectionPanel-169"><span class="linenos">169</span></a>        <span class="c1"># Initialize connections table with enhanced columns</span>
</span><span id="ConnectionPanel-170"><a href="#ConnectionPanel-170"><span class="linenos">170</span></a>        <span class="n">connections_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connections-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel-171"><a href="#ConnectionPanel-171"><span class="linenos">171</span></a>        <span class="n">connections_table</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span>
</span><span id="ConnectionPanel-172"><a href="#ConnectionPanel-172"><span class="linenos">172</span></a>            <span class="s2">&quot;Client Address&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-173"><a href="#ConnectionPanel-173"><span class="linenos">173</span></a>            <span class="s2">&quot;Key ID&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-174"><a href="#ConnectionPanel-174"><span class="linenos">174</span></a>            <span class="s2">&quot;Permissions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-175"><a href="#ConnectionPanel-175"><span class="linenos">175</span></a>            <span class="s2">&quot;RPS&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-176"><a href="#ConnectionPanel-176"><span class="linenos">176</span></a>            <span class="s2">&quot;Violations&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-177"><a href="#ConnectionPanel-177"><span class="linenos">177</span></a>            <span class="s2">&quot;Connected At&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-178"><a href="#ConnectionPanel-178"><span class="linenos">178</span></a>            <span class="s2">&quot;Status&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-179"><a href="#ConnectionPanel-179"><span class="linenos">179</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-180"><a href="#ConnectionPanel-180"><span class="linenos">180</span></a>
</span><span id="ConnectionPanel-181"><a href="#ConnectionPanel-181"><span class="linenos">181</span></a>        <span class="c1"># Initialize API keys table</span>
</span><span id="ConnectionPanel-182"><a href="#ConnectionPanel-182"><span class="linenos">182</span></a>        <span class="n">api_keys_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#api-keys-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel-183"><a href="#ConnectionPanel-183"><span class="linenos">183</span></a>        <span class="n">api_keys_table</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span>
</span><span id="ConnectionPanel-184"><a href="#ConnectionPanel-184"><span class="linenos">184</span></a>            <span class="s2">&quot;Key ID&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-185"><a href="#ConnectionPanel-185"><span class="linenos">185</span></a>            <span class="s2">&quot;Created&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-186"><a href="#ConnectionPanel-186"><span class="linenos">186</span></a>            <span class="s2">&quot;Expires&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-187"><a href="#ConnectionPanel-187"><span class="linenos">187</span></a>            <span class="s2">&quot;Permissions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-188"><a href="#ConnectionPanel-188"><span class="linenos">188</span></a>            <span class="s2">&quot;Active Sessions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-189"><a href="#ConnectionPanel-189"><span class="linenos">189</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-190"><a href="#ConnectionPanel-190"><span class="linenos">190</span></a>
</span><span id="ConnectionPanel-191"><a href="#ConnectionPanel-191"><span class="linenos">191</span></a>        <span class="c1"># Start auto-refresh if enabled</span>
</span><span id="ConnectionPanel-192"><a href="#ConnectionPanel-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel-193"><a href="#ConnectionPanel-193"><span class="linenos">193</span></a>
</span><span id="ConnectionPanel-194"><a href="#ConnectionPanel-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-195"><a href="#ConnectionPanel-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the connections display.</span>
</span><span id="ConnectionPanel-196"><a href="#ConnectionPanel-196"><span class="linenos">196</span></a>
</span><span id="ConnectionPanel-197"><a href="#ConnectionPanel-197"><span class="linenos">197</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-198"><a href="#ConnectionPanel-198"><span class="linenos">198</span></a><span class="sd">            connections: List of connection information</span>
</span><span id="ConnectionPanel-199"><a href="#ConnectionPanel-199"><span class="linenos">199</span></a>
</span><span id="ConnectionPanel-200"><a href="#ConnectionPanel-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-201"><a href="#ConnectionPanel-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">connections</span>
</span><span id="ConnectionPanel-202"><a href="#ConnectionPanel-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filter</span><span class="p">()</span>
</span><span id="ConnectionPanel-203"><a href="#ConnectionPanel-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span><span id="ConnectionPanel-204"><a href="#ConnectionPanel-204"><span class="linenos">204</span></a>
</span><span id="ConnectionPanel-205"><a href="#ConnectionPanel-205"><span class="linenos">205</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-206"><a href="#ConnectionPanel-206"><span class="linenos">206</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply current filter to connections.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-207"><a href="#ConnectionPanel-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="p">:</span>
</span><span id="ConnectionPanel-208"><a href="#ConnectionPanel-208"><span class="linenos">208</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ConnectionPanel-209"><a href="#ConnectionPanel-209"><span class="linenos">209</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ConnectionPanel-210"><a href="#ConnectionPanel-210"><span class="linenos">210</span></a>            <span class="n">filter_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ConnectionPanel-211"><a href="#ConnectionPanel-211"><span class="linenos">211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ConnectionPanel-212"><a href="#ConnectionPanel-212"><span class="linenos">212</span></a>                <span class="n">conn</span>
</span><span id="ConnectionPanel-213"><a href="#ConnectionPanel-213"><span class="linenos">213</span></a>                <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span>
</span><span id="ConnectionPanel-214"><a href="#ConnectionPanel-214"><span class="linenos">214</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="ConnectionPanel-215"><a href="#ConnectionPanel-215"><span class="linenos">215</span></a>                    <span class="n">filter_lower</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_address&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ConnectionPanel-216"><a href="#ConnectionPanel-216"><span class="linenos">216</span></a>                    <span class="ow">or</span> <span class="n">filter_lower</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ConnectionPanel-217"><a href="#ConnectionPanel-217"><span class="linenos">217</span></a>                    <span class="ow">or</span> <span class="n">filter_lower</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ConnectionPanel-218"><a href="#ConnectionPanel-218"><span class="linenos">218</span></a>                <span class="p">)</span>
</span><span id="ConnectionPanel-219"><a href="#ConnectionPanel-219"><span class="linenos">219</span></a>            <span class="p">]</span>
</span><span id="ConnectionPanel-220"><a href="#ConnectionPanel-220"><span class="linenos">220</span></a>
</span><span id="ConnectionPanel-221"><a href="#ConnectionPanel-221"><span class="linenos">221</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_connections_display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-222"><a href="#ConnectionPanel-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the connections table display.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-223"><a href="#ConnectionPanel-223"><span class="linenos">223</span></a>        <span class="n">connections_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connections-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel-224"><a href="#ConnectionPanel-224"><span class="linenos">224</span></a>
</span><span id="ConnectionPanel-225"><a href="#ConnectionPanel-225"><span class="linenos">225</span></a>        <span class="c1"># Clear existing data</span>
</span><span id="ConnectionPanel-226"><a href="#ConnectionPanel-226"><span class="linenos">226</span></a>        <span class="n">connections_table</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ConnectionPanel-227"><a href="#ConnectionPanel-227"><span class="linenos">227</span></a>
</span><span id="ConnectionPanel-228"><a href="#ConnectionPanel-228"><span class="linenos">228</span></a>        <span class="c1"># Calculate pagination</span>
</span><span id="ConnectionPanel-229"><a href="#ConnectionPanel-229"><span class="linenos">229</span></a>        <span class="n">total_pages</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
</span><span id="ConnectionPanel-230"><a href="#ConnectionPanel-230"><span class="linenos">230</span></a>            <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>
</span><span id="ConnectionPanel-231"><a href="#ConnectionPanel-231"><span class="linenos">231</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-232"><a href="#ConnectionPanel-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_page</span><span class="p">,</span> <span class="n">total_pages</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ConnectionPanel-233"><a href="#ConnectionPanel-233"><span class="linenos">233</span></a>
</span><span id="ConnectionPanel-234"><a href="#ConnectionPanel-234"><span class="linenos">234</span></a>        <span class="n">start_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>
</span><span id="ConnectionPanel-235"><a href="#ConnectionPanel-235"><span class="linenos">235</span></a>        <span class="n">end_idx</span> <span class="o">=</span> <span class="n">start_idx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>
</span><span id="ConnectionPanel-236"><a href="#ConnectionPanel-236"><span class="linenos">236</span></a>        <span class="n">page_connections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
</span><span id="ConnectionPanel-237"><a href="#ConnectionPanel-237"><span class="linenos">237</span></a>
</span><span id="ConnectionPanel-238"><a href="#ConnectionPanel-238"><span class="linenos">238</span></a>        <span class="c1"># Add connection data with enhanced information</span>
</span><span id="ConnectionPanel-239"><a href="#ConnectionPanel-239"><span class="linenos">239</span></a>        <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">page_connections</span><span class="p">:</span>
</span><span id="ConnectionPanel-240"><a href="#ConnectionPanel-240"><span class="linenos">240</span></a>            <span class="c1"># Format permissions</span>
</span><span id="ConnectionPanel-241"><a href="#ConnectionPanel-241"><span class="linenos">241</span></a>            <span class="n">permissions</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ConnectionPanel-242"><a href="#ConnectionPanel-242"><span class="linenos">242</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">permissions</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="ConnectionPanel-243"><a href="#ConnectionPanel-243"><span class="linenos">243</span></a>                <span class="n">perm_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">])</span>
</span><span id="ConnectionPanel-244"><a href="#ConnectionPanel-244"><span class="linenos">244</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ConnectionPanel-245"><a href="#ConnectionPanel-245"><span class="linenos">245</span></a>                <span class="n">perm_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">permissions</span><span class="p">)</span> <span class="k">if</span> <span class="n">permissions</span> <span class="k">else</span> <span class="s2">&quot;None&quot;</span>
</span><span id="ConnectionPanel-246"><a href="#ConnectionPanel-246"><span class="linenos">246</span></a>
</span><span id="ConnectionPanel-247"><a href="#ConnectionPanel-247"><span class="linenos">247</span></a>            <span class="c1"># Format connected_at timestamp</span>
</span><span id="ConnectionPanel-248"><a href="#ConnectionPanel-248"><span class="linenos">248</span></a>            <span class="n">connected_at</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connected_at&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-249"><a href="#ConnectionPanel-249"><span class="linenos">249</span></a>            <span class="k">if</span> <span class="n">connected_at</span><span class="p">:</span>
</span><span id="ConnectionPanel-250"><a href="#ConnectionPanel-250"><span class="linenos">250</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connected_at</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="ConnectionPanel-251"><a href="#ConnectionPanel-251"><span class="linenos">251</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel-252"><a href="#ConnectionPanel-252"><span class="linenos">252</span></a>                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">connected_at</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;+00:00&#39;</span><span class="p">))</span>
</span><span id="ConnectionPanel-253"><a href="#ConnectionPanel-253"><span class="linenos">253</span></a>                        <span class="n">connected_str</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-254"><a href="#ConnectionPanel-254"><span class="linenos">254</span></a>                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="ConnectionPanel-255"><a href="#ConnectionPanel-255"><span class="linenos">255</span></a>                        <span class="n">connected_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">connected_at</span><span class="p">)</span>
</span><span id="ConnectionPanel-256"><a href="#ConnectionPanel-256"><span class="linenos">256</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ConnectionPanel-257"><a href="#ConnectionPanel-257"><span class="linenos">257</span></a>                    <span class="n">connected_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">connected_at</span><span class="p">)</span>
</span><span id="ConnectionPanel-258"><a href="#ConnectionPanel-258"><span class="linenos">258</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ConnectionPanel-259"><a href="#ConnectionPanel-259"><span class="linenos">259</span></a>                <span class="n">connected_str</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
</span><span id="ConnectionPanel-260"><a href="#ConnectionPanel-260"><span class="linenos">260</span></a>
</span><span id="ConnectionPanel-261"><a href="#ConnectionPanel-261"><span class="linenos">261</span></a>            <span class="c1"># Determine status</span>
</span><span id="ConnectionPanel-262"><a href="#ConnectionPanel-262"><span class="linenos">262</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Active&quot;</span>
</span><span id="ConnectionPanel-263"><a href="#ConnectionPanel-263"><span class="linenos">263</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_authenticated&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ConnectionPanel-264"><a href="#ConnectionPanel-264"><span class="linenos">264</span></a>                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Unauthenticated&quot;</span>
</span><span id="ConnectionPanel-265"><a href="#ConnectionPanel-265"><span class="linenos">265</span></a>            <span class="k">elif</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ConnectionPanel-266"><a href="#ConnectionPanel-266"><span class="linenos">266</span></a>                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Violations&quot;</span>
</span><span id="ConnectionPanel-267"><a href="#ConnectionPanel-267"><span class="linenos">267</span></a>
</span><span id="ConnectionPanel-268"><a href="#ConnectionPanel-268"><span class="linenos">268</span></a>            <span class="n">connections_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
</span><span id="ConnectionPanel-269"><a href="#ConnectionPanel-269"><span class="linenos">269</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_address&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)),</span>
</span><span id="ConnectionPanel-270"><a href="#ConnectionPanel-270"><span class="linenos">270</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key_id&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;N/A&quot;</span><span class="p">))),</span>
</span><span id="ConnectionPanel-271"><a href="#ConnectionPanel-271"><span class="linenos">271</span></a>                <span class="n">perm_str</span><span class="p">,</span>
</span><span id="ConnectionPanel-272"><a href="#ConnectionPanel-272"><span class="linenos">272</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rps&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;requests_per_second&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))),</span>
</span><span id="ConnectionPanel-273"><a href="#ConnectionPanel-273"><span class="linenos">273</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="ConnectionPanel-274"><a href="#ConnectionPanel-274"><span class="linenos">274</span></a>                <span class="n">connected_str</span><span class="p">,</span>
</span><span id="ConnectionPanel-275"><a href="#ConnectionPanel-275"><span class="linenos">275</span></a>                <span class="n">status</span><span class="p">,</span>
</span><span id="ConnectionPanel-276"><a href="#ConnectionPanel-276"><span class="linenos">276</span></a>            <span class="p">)</span>
</span><span id="ConnectionPanel-277"><a href="#ConnectionPanel-277"><span class="linenos">277</span></a>
</span><span id="ConnectionPanel-278"><a href="#ConnectionPanel-278"><span class="linenos">278</span></a>        <span class="c1"># Update pagination controls</span>
</span><span id="ConnectionPanel-279"><a href="#ConnectionPanel-279"><span class="linenos">279</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pagination_controls</span><span class="p">(</span><span class="n">total_pages</span><span class="p">)</span>
</span><span id="ConnectionPanel-280"><a href="#ConnectionPanel-280"><span class="linenos">280</span></a>
</span><span id="ConnectionPanel-281"><a href="#ConnectionPanel-281"><span class="linenos">281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="ConnectionPanel-282"><a href="#ConnectionPanel-282"><span class="linenos">282</span></a>            <span class="s2">&quot;Updated connections display&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-283"><a href="#ConnectionPanel-283"><span class="linenos">283</span></a>            <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">),</span>
</span><span id="ConnectionPanel-284"><a href="#ConnectionPanel-284"><span class="linenos">284</span></a>            <span class="n">filtered</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">),</span>
</span><span id="ConnectionPanel-285"><a href="#ConnectionPanel-285"><span class="linenos">285</span></a>            <span class="n">page</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="ConnectionPanel-286"><a href="#ConnectionPanel-286"><span class="linenos">286</span></a>            <span class="n">total_pages</span><span class="o">=</span><span class="n">total_pages</span><span class="p">,</span>
</span><span id="ConnectionPanel-287"><a href="#ConnectionPanel-287"><span class="linenos">287</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-288"><a href="#ConnectionPanel-288"><span class="linenos">288</span></a>
</span><span id="ConnectionPanel-289"><a href="#ConnectionPanel-289"><span class="linenos">289</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_pagination_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_pages</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-290"><a href="#ConnectionPanel-290"><span class="linenos">290</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update pagination control states.</span>
</span><span id="ConnectionPanel-291"><a href="#ConnectionPanel-291"><span class="linenos">291</span></a>
</span><span id="ConnectionPanel-292"><a href="#ConnectionPanel-292"><span class="linenos">292</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-293"><a href="#ConnectionPanel-293"><span class="linenos">293</span></a><span class="sd">            total_pages: Total number of pages</span>
</span><span id="ConnectionPanel-294"><a href="#ConnectionPanel-294"><span class="linenos">294</span></a>
</span><span id="ConnectionPanel-295"><a href="#ConnectionPanel-295"><span class="linenos">295</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-296"><a href="#ConnectionPanel-296"><span class="linenos">296</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel-297"><a href="#ConnectionPanel-297"><span class="linenos">297</span></a>            <span class="n">prev_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#prev-page-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ConnectionPanel-298"><a href="#ConnectionPanel-298"><span class="linenos">298</span></a>            <span class="n">next_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#next-page-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ConnectionPanel-299"><a href="#ConnectionPanel-299"><span class="linenos">299</span></a>            <span class="n">page_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#page-info&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ConnectionPanel-300"><a href="#ConnectionPanel-300"><span class="linenos">300</span></a>
</span><span id="ConnectionPanel-301"><a href="#ConnectionPanel-301"><span class="linenos">301</span></a>            <span class="c1"># Update button states</span>
</span><span id="ConnectionPanel-302"><a href="#ConnectionPanel-302"><span class="linenos">302</span></a>            <span class="n">prev_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="ConnectionPanel-303"><a href="#ConnectionPanel-303"><span class="linenos">303</span></a>            <span class="n">next_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">&gt;=</span> <span class="n">total_pages</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ConnectionPanel-304"><a href="#ConnectionPanel-304"><span class="linenos">304</span></a>
</span><span id="ConnectionPanel-305"><a href="#ConnectionPanel-305"><span class="linenos">305</span></a>            <span class="c1"># Update page info</span>
</span><span id="ConnectionPanel-306"><a href="#ConnectionPanel-306"><span class="linenos">306</span></a>            <span class="n">page_info</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Page </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_page</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="n">total_pages</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-307"><a href="#ConnectionPanel-307"><span class="linenos">307</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ConnectionPanel-308"><a href="#ConnectionPanel-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error updating pagination controls&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ConnectionPanel-309"><a href="#ConnectionPanel-309"><span class="linenos">309</span></a>
</span><span id="ConnectionPanel-310"><a href="#ConnectionPanel-310"><span class="linenos">310</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_start_auto_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-311"><a href="#ConnectionPanel-311"><span class="linenos">311</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start auto-refresh task.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-312"><a href="#ConnectionPanel-312"><span class="linenos">312</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="ConnectionPanel-313"><a href="#ConnectionPanel-313"><span class="linenos">313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="ConnectionPanel-314"><a href="#ConnectionPanel-314"><span class="linenos">314</span></a>
</span><span id="ConnectionPanel-315"><a href="#ConnectionPanel-315"><span class="linenos">315</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_auto_refresh_loop</span><span class="p">())</span>
</span><span id="ConnectionPanel-316"><a href="#ConnectionPanel-316"><span class="linenos">316</span></a>
</span><span id="ConnectionPanel-317"><a href="#ConnectionPanel-317"><span class="linenos">317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_stop_auto_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-318"><a href="#ConnectionPanel-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop auto-refresh task.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-319"><a href="#ConnectionPanel-319"><span class="linenos">319</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="ConnectionPanel-320"><a href="#ConnectionPanel-320"><span class="linenos">320</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="ConnectionPanel-321"><a href="#ConnectionPanel-321"><span class="linenos">321</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-322"><a href="#ConnectionPanel-322"><span class="linenos">322</span></a>
</span><span id="ConnectionPanel-323"><a href="#ConnectionPanel-323"><span class="linenos">323</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_auto_refresh_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-324"><a href="#ConnectionPanel-324"><span class="linenos">324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Auto-refresh loop.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-325"><a href="#ConnectionPanel-325"><span class="linenos">325</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="ConnectionPanel-326"><a href="#ConnectionPanel-326"><span class="linenos">326</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel-327"><a href="#ConnectionPanel-327"><span class="linenos">327</span></a>                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh_interval</span><span class="p">)</span>
</span><span id="ConnectionPanel-328"><a href="#ConnectionPanel-328"><span class="linenos">328</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span><span class="p">:</span>
</span><span id="ConnectionPanel-329"><a href="#ConnectionPanel-329"><span class="linenos">329</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ConnectionRefresh</span><span class="p">())</span>
</span><span id="ConnectionPanel-330"><a href="#ConnectionPanel-330"><span class="linenos">330</span></a>            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
</span><span id="ConnectionPanel-331"><a href="#ConnectionPanel-331"><span class="linenos">331</span></a>                <span class="k">break</span>
</span><span id="ConnectionPanel-332"><a href="#ConnectionPanel-332"><span class="linenos">332</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ConnectionPanel-333"><a href="#ConnectionPanel-333"><span class="linenos">333</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error in auto-refresh loop&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ConnectionPanel-334"><a href="#ConnectionPanel-334"><span class="linenos">334</span></a>
</span><span id="ConnectionPanel-335"><a href="#ConnectionPanel-335"><span class="linenos">335</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_api_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-336"><a href="#ConnectionPanel-336"><span class="linenos">336</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the API keys display.</span>
</span><span id="ConnectionPanel-337"><a href="#ConnectionPanel-337"><span class="linenos">337</span></a>
</span><span id="ConnectionPanel-338"><a href="#ConnectionPanel-338"><span class="linenos">338</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-339"><a href="#ConnectionPanel-339"><span class="linenos">339</span></a><span class="sd">            api_keys: List of API key information</span>
</span><span id="ConnectionPanel-340"><a href="#ConnectionPanel-340"><span class="linenos">340</span></a>
</span><span id="ConnectionPanel-341"><a href="#ConnectionPanel-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-342"><a href="#ConnectionPanel-342"><span class="linenos">342</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;update_api_keys called&quot;</span><span class="p">,</span> <span class="n">api_keys_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">),</span> <span class="n">api_keys</span><span class="o">=</span><span class="n">api_keys</span><span class="p">)</span>
</span><span id="ConnectionPanel-343"><a href="#ConnectionPanel-343"><span class="linenos">343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span> <span class="o">=</span> <span class="n">api_keys</span>
</span><span id="ConnectionPanel-344"><a href="#ConnectionPanel-344"><span class="linenos">344</span></a>
</span><span id="ConnectionPanel-345"><a href="#ConnectionPanel-345"><span class="linenos">345</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel-346"><a href="#ConnectionPanel-346"><span class="linenos">346</span></a>            <span class="n">api_keys_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#api-keys-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel-347"><a href="#ConnectionPanel-347"><span class="linenos">347</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found API keys table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-348"><a href="#ConnectionPanel-348"><span class="linenos">348</span></a>
</span><span id="ConnectionPanel-349"><a href="#ConnectionPanel-349"><span class="linenos">349</span></a>            <span class="c1"># Clear existing data</span>
</span><span id="ConnectionPanel-350"><a href="#ConnectionPanel-350"><span class="linenos">350</span></a>            <span class="n">api_keys_table</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ConnectionPanel-351"><a href="#ConnectionPanel-351"><span class="linenos">351</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleared API keys table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-352"><a href="#ConnectionPanel-352"><span class="linenos">352</span></a>
</span><span id="ConnectionPanel-353"><a href="#ConnectionPanel-353"><span class="linenos">353</span></a>            <span class="c1"># Add API key data</span>
</span><span id="ConnectionPanel-354"><a href="#ConnectionPanel-354"><span class="linenos">354</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">api_keys</span><span class="p">:</span>
</span><span id="ConnectionPanel-355"><a href="#ConnectionPanel-355"><span class="linenos">355</span></a>                <span class="n">permissions</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ConnectionPanel-356"><a href="#ConnectionPanel-356"><span class="linenos">356</span></a>                <span class="n">permissions_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">])</span>
</span><span id="ConnectionPanel-357"><a href="#ConnectionPanel-357"><span class="linenos">357</span></a>
</span><span id="ConnectionPanel-358"><a href="#ConnectionPanel-358"><span class="linenos">358</span></a>                <span class="n">api_keys_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
</span><span id="ConnectionPanel-359"><a href="#ConnectionPanel-359"><span class="linenos">359</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel-360"><a href="#ConnectionPanel-360"><span class="linenos">360</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel-361"><a href="#ConnectionPanel-361"><span class="linenos">361</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expires_at&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel-362"><a href="#ConnectionPanel-362"><span class="linenos">362</span></a>                    <span class="n">permissions_str</span> <span class="ow">or</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel-363"><a href="#ConnectionPanel-363"><span class="linenos">363</span></a>                    <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active_sessions&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="ConnectionPanel-364"><a href="#ConnectionPanel-364"><span class="linenos">364</span></a>                <span class="p">)</span>
</span><span id="ConnectionPanel-365"><a href="#ConnectionPanel-365"><span class="linenos">365</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added API key row&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">))</span>
</span><span id="ConnectionPanel-366"><a href="#ConnectionPanel-366"><span class="linenos">366</span></a>
</span><span id="ConnectionPanel-367"><a href="#ConnectionPanel-367"><span class="linenos">367</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated API keys display&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">))</span>
</span><span id="ConnectionPanel-368"><a href="#ConnectionPanel-368"><span class="linenos">368</span></a>
</span><span id="ConnectionPanel-369"><a href="#ConnectionPanel-369"><span class="linenos">369</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ConnectionPanel-370"><a href="#ConnectionPanel-370"><span class="linenos">370</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating API keys display&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ConnectionPanel-371"><a href="#ConnectionPanel-371"><span class="linenos">371</span></a>
</span><span id="ConnectionPanel-372"><a href="#ConnectionPanel-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-373"><a href="#ConnectionPanel-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="ConnectionPanel-374"><a href="#ConnectionPanel-374"><span class="linenos">374</span></a>
</span><span id="ConnectionPanel-375"><a href="#ConnectionPanel-375"><span class="linenos">375</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-376"><a href="#ConnectionPanel-376"><span class="linenos">376</span></a><span class="sd">            event: Button press event</span>
</span><span id="ConnectionPanel-377"><a href="#ConnectionPanel-377"><span class="linenos">377</span></a>
</span><span id="ConnectionPanel-378"><a href="#ConnectionPanel-378"><span class="linenos">378</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-379"><a href="#ConnectionPanel-379"><span class="linenos">379</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="ConnectionPanel-380"><a href="#ConnectionPanel-380"><span class="linenos">380</span></a>
</span><span id="ConnectionPanel-381"><a href="#ConnectionPanel-381"><span class="linenos">381</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;disconnect-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-382"><a href="#ConnectionPanel-382"><span class="linenos">382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_selected_connection</span><span class="p">()</span>
</span><span id="ConnectionPanel-383"><a href="#ConnectionPanel-383"><span class="linenos">383</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;disconnect-all-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-384"><a href="#ConnectionPanel-384"><span class="linenos">384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_all_connections</span><span class="p">()</span>
</span><span id="ConnectionPanel-385"><a href="#ConnectionPanel-385"><span class="linenos">385</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;refresh-connections-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-386"><a href="#ConnectionPanel-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_connections</span><span class="p">()</span>
</span><span id="ConnectionPanel-387"><a href="#ConnectionPanel-387"><span class="linenos">387</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;auto-refresh-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-388"><a href="#ConnectionPanel-388"><span class="linenos">388</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel-389"><a href="#ConnectionPanel-389"><span class="linenos">389</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;prev-page-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-390"><a href="#ConnectionPanel-390"><span class="linenos">390</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_page</span><span class="p">()</span>
</span><span id="ConnectionPanel-391"><a href="#ConnectionPanel-391"><span class="linenos">391</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;next-page-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-392"><a href="#ConnectionPanel-392"><span class="linenos">392</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_next_page</span><span class="p">()</span>
</span><span id="ConnectionPanel-393"><a href="#ConnectionPanel-393"><span class="linenos">393</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;generate-api-key-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-394"><a href="#ConnectionPanel-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_generate_api_key</span><span class="p">()</span>
</span><span id="ConnectionPanel-395"><a href="#ConnectionPanel-395"><span class="linenos">395</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;revoke-api-key-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-396"><a href="#ConnectionPanel-396"><span class="linenos">396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_revoke_selected_api_key</span><span class="p">()</span>
</span><span id="ConnectionPanel-397"><a href="#ConnectionPanel-397"><span class="linenos">397</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;refresh-keys-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-398"><a href="#ConnectionPanel-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_api_keys</span><span class="p">()</span>
</span><span id="ConnectionPanel-399"><a href="#ConnectionPanel-399"><span class="linenos">399</span></a>
</span><span id="ConnectionPanel-400"><a href="#ConnectionPanel-400"><span class="linenos">400</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_data_table_row_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">DataTable</span><span class="o">.</span><span class="n">RowSelected</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-401"><a href="#ConnectionPanel-401"><span class="linenos">401</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle data table row selection.</span>
</span><span id="ConnectionPanel-402"><a href="#ConnectionPanel-402"><span class="linenos">402</span></a>
</span><span id="ConnectionPanel-403"><a href="#ConnectionPanel-403"><span class="linenos">403</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-404"><a href="#ConnectionPanel-404"><span class="linenos">404</span></a><span class="sd">            event: Row selection event</span>
</span><span id="ConnectionPanel-405"><a href="#ConnectionPanel-405"><span class="linenos">405</span></a>
</span><span id="ConnectionPanel-406"><a href="#ConnectionPanel-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-407"><a href="#ConnectionPanel-407"><span class="linenos">407</span></a>        <span class="n">table_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">data_table</span><span class="o">.</span><span class="n">id</span>
</span><span id="ConnectionPanel-408"><a href="#ConnectionPanel-408"><span class="linenos">408</span></a>
</span><span id="ConnectionPanel-409"><a href="#ConnectionPanel-409"><span class="linenos">409</span></a>        <span class="k">if</span> <span class="n">table_id</span> <span class="o">==</span> <span class="s2">&quot;connections-table&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-410"><a href="#ConnectionPanel-410"><span class="linenos">410</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_select_connection</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">row_key</span><span class="p">)</span>
</span><span id="ConnectionPanel-411"><a href="#ConnectionPanel-411"><span class="linenos">411</span></a>        <span class="k">elif</span> <span class="n">table_id</span> <span class="o">==</span> <span class="s2">&quot;api-keys-table&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-412"><a href="#ConnectionPanel-412"><span class="linenos">412</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_select_api_key</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">row_key</span><span class="p">)</span>
</span><span id="ConnectionPanel-413"><a href="#ConnectionPanel-413"><span class="linenos">413</span></a>
</span><span id="ConnectionPanel-414"><a href="#ConnectionPanel-414"><span class="linenos">414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Input</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-415"><a href="#ConnectionPanel-415"><span class="linenos">415</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle input change events.</span>
</span><span id="ConnectionPanel-416"><a href="#ConnectionPanel-416"><span class="linenos">416</span></a>
</span><span id="ConnectionPanel-417"><a href="#ConnectionPanel-417"><span class="linenos">417</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-418"><a href="#ConnectionPanel-418"><span class="linenos">418</span></a><span class="sd">            event: Input change event</span>
</span><span id="ConnectionPanel-419"><a href="#ConnectionPanel-419"><span class="linenos">419</span></a>
</span><span id="ConnectionPanel-420"><a href="#ConnectionPanel-420"><span class="linenos">420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-421"><a href="#ConnectionPanel-421"><span class="linenos">421</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;connection-filter-input&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel-422"><a href="#ConnectionPanel-422"><span class="linenos">422</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span>
</span><span id="ConnectionPanel-423"><a href="#ConnectionPanel-423"><span class="linenos">423</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Reset to first page when filtering</span>
</span><span id="ConnectionPanel-424"><a href="#ConnectionPanel-424"><span class="linenos">424</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filter</span><span class="p">()</span>
</span><span id="ConnectionPanel-425"><a href="#ConnectionPanel-425"><span class="linenos">425</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span><span id="ConnectionPanel-426"><a href="#ConnectionPanel-426"><span class="linenos">426</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Filter applied&quot;</span><span class="p">,</span> <span class="n">filter_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="p">)</span>
</span><span id="ConnectionPanel-427"><a href="#ConnectionPanel-427"><span class="linenos">427</span></a>
</span><span id="ConnectionPanel-428"><a href="#ConnectionPanel-428"><span class="linenos">428</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_disconnect_selected_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-429"><a href="#ConnectionPanel-429"><span class="linenos">429</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnect the selected connection.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-430"><a href="#ConnectionPanel-430"><span class="linenos">430</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span><span class="p">:</span>
</span><span id="ConnectionPanel-431"><a href="#ConnectionPanel-431"><span class="linenos">431</span></a>            <span class="k">return</span>
</span><span id="ConnectionPanel-432"><a href="#ConnectionPanel-432"><span class="linenos">432</span></a>
</span><span id="ConnectionPanel-433"><a href="#ConnectionPanel-433"><span class="linenos">433</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="ConnectionPanel-434"><a href="#ConnectionPanel-434"><span class="linenos">434</span></a>            <span class="s2">&quot;Disconnecting selected connection&quot;</span><span class="p">,</span> <span class="n">client_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span>
</span><span id="ConnectionPanel-435"><a href="#ConnectionPanel-435"><span class="linenos">435</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-436"><a href="#ConnectionPanel-436"><span class="linenos">436</span></a>
</span><span id="ConnectionPanel-437"><a href="#ConnectionPanel-437"><span class="linenos">437</span></a>        <span class="c1"># Post disconnect message</span>
</span><span id="ConnectionPanel-438"><a href="#ConnectionPanel-438"><span class="linenos">438</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ConnectionDisconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span><span class="p">))</span>
</span><span id="ConnectionPanel-439"><a href="#ConnectionPanel-439"><span class="linenos">439</span></a>
</span><span id="ConnectionPanel-440"><a href="#ConnectionPanel-440"><span class="linenos">440</span></a>        <span class="c1"># Clear selection</span>
</span><span id="ConnectionPanel-441"><a href="#ConnectionPanel-441"><span class="linenos">441</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-442"><a href="#ConnectionPanel-442"><span class="linenos">442</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#disconnect-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ConnectionPanel-443"><a href="#ConnectionPanel-443"><span class="linenos">443</span></a>
</span><span id="ConnectionPanel-444"><a href="#ConnectionPanel-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_disconnect_all_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-445"><a href="#ConnectionPanel-445"><span class="linenos">445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnect all active connections.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-446"><a href="#ConnectionPanel-446"><span class="linenos">446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disconnecting all connections&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-447"><a href="#ConnectionPanel-447"><span class="linenos">447</span></a>
</span><span id="ConnectionPanel-448"><a href="#ConnectionPanel-448"><span class="linenos">448</span></a>        <span class="c1"># Post disconnect messages for all connections</span>
</span><span id="ConnectionPanel-449"><a href="#ConnectionPanel-449"><span class="linenos">449</span></a>        <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">:</span>
</span><span id="ConnectionPanel-450"><a href="#ConnectionPanel-450"><span class="linenos">450</span></a>            <span class="n">client_address</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_address&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-451"><a href="#ConnectionPanel-451"><span class="linenos">451</span></a>            <span class="k">if</span> <span class="n">client_address</span><span class="p">:</span>
</span><span id="ConnectionPanel-452"><a href="#ConnectionPanel-452"><span class="linenos">452</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ConnectionDisconnect</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">client_address</span><span class="p">)))</span>
</span><span id="ConnectionPanel-453"><a href="#ConnectionPanel-453"><span class="linenos">453</span></a>
</span><span id="ConnectionPanel-454"><a href="#ConnectionPanel-454"><span class="linenos">454</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_refresh_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-455"><a href="#ConnectionPanel-455"><span class="linenos">455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Refresh the connections display.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-456"><a href="#ConnectionPanel-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Refreshing connections&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-457"><a href="#ConnectionPanel-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ConnectionPanel-458"><a href="#ConnectionPanel-458"><span class="linenos">458</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel-459"><a href="#ConnectionPanel-459"><span class="linenos">459</span></a>            <span class="c1"># Post refresh message to parent application</span>
</span><span id="ConnectionPanel-460"><a href="#ConnectionPanel-460"><span class="linenos">460</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ConnectionRefresh</span><span class="p">())</span>
</span><span id="ConnectionPanel-461"><a href="#ConnectionPanel-461"><span class="linenos">461</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="ConnectionPanel-462"><a href="#ConnectionPanel-462"><span class="linenos">462</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ConnectionPanel-463"><a href="#ConnectionPanel-463"><span class="linenos">463</span></a>
</span><span id="ConnectionPanel-464"><a href="#ConnectionPanel-464"><span class="linenos">464</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_toggle_auto_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-465"><a href="#ConnectionPanel-465"><span class="linenos">465</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle auto-refresh functionality.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-466"><a href="#ConnectionPanel-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="ConnectionPanel-467"><a href="#ConnectionPanel-467"><span class="linenos">467</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel-468"><a href="#ConnectionPanel-468"><span class="linenos">468</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#auto-refresh-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Auto Refresh&quot;</span>
</span><span id="ConnectionPanel-469"><a href="#ConnectionPanel-469"><span class="linenos">469</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-refresh stopped&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-470"><a href="#ConnectionPanel-470"><span class="linenos">470</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ConnectionPanel-471"><a href="#ConnectionPanel-471"><span class="linenos">471</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_start_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel-472"><a href="#ConnectionPanel-472"><span class="linenos">472</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#auto-refresh-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Stop Auto&quot;</span>
</span><span id="ConnectionPanel-473"><a href="#ConnectionPanel-473"><span class="linenos">473</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-refresh started&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-474"><a href="#ConnectionPanel-474"><span class="linenos">474</span></a>
</span><span id="ConnectionPanel-475"><a href="#ConnectionPanel-475"><span class="linenos">475</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_previous_page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-476"><a href="#ConnectionPanel-476"><span class="linenos">476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Go to previous page.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-477"><a href="#ConnectionPanel-477"><span class="linenos">477</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ConnectionPanel-478"><a href="#ConnectionPanel-478"><span class="linenos">478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="ConnectionPanel-479"><a href="#ConnectionPanel-479"><span class="linenos">479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span><span id="ConnectionPanel-480"><a href="#ConnectionPanel-480"><span class="linenos">480</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Moved to previous page&quot;</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ConnectionPanel-481"><a href="#ConnectionPanel-481"><span class="linenos">481</span></a>
</span><span id="ConnectionPanel-482"><a href="#ConnectionPanel-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_next_page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-483"><a href="#ConnectionPanel-483"><span class="linenos">483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Go to next page.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-484"><a href="#ConnectionPanel-484"><span class="linenos">484</span></a>        <span class="n">total_pages</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
</span><span id="ConnectionPanel-485"><a href="#ConnectionPanel-485"><span class="linenos">485</span></a>            <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>
</span><span id="ConnectionPanel-486"><a href="#ConnectionPanel-486"><span class="linenos">486</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-487"><a href="#ConnectionPanel-487"><span class="linenos">487</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">&lt;</span> <span class="n">total_pages</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ConnectionPanel-488"><a href="#ConnectionPanel-488"><span class="linenos">488</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ConnectionPanel-489"><a href="#ConnectionPanel-489"><span class="linenos">489</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span><span id="ConnectionPanel-490"><a href="#ConnectionPanel-490"><span class="linenos">490</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Moved to next page&quot;</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ConnectionPanel-491"><a href="#ConnectionPanel-491"><span class="linenos">491</span></a>
</span><span id="ConnectionPanel-492"><a href="#ConnectionPanel-492"><span class="linenos">492</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-493"><a href="#ConnectionPanel-493"><span class="linenos">493</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a new API key.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-494"><a href="#ConnectionPanel-494"><span class="linenos">494</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating new API key&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-495"><a href="#ConnectionPanel-495"><span class="linenos">495</span></a>
</span><span id="ConnectionPanel-496"><a href="#ConnectionPanel-496"><span class="linenos">496</span></a>        <span class="c1"># Post API key generation message</span>
</span><span id="ConnectionPanel-497"><a href="#ConnectionPanel-497"><span class="linenos">497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">APIKeyGenerate</span><span class="p">())</span>
</span><span id="ConnectionPanel-498"><a href="#ConnectionPanel-498"><span class="linenos">498</span></a>
</span><span id="ConnectionPanel-499"><a href="#ConnectionPanel-499"><span class="linenos">499</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_revoke_selected_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-500"><a href="#ConnectionPanel-500"><span class="linenos">500</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Revoke the selected API key.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-501"><a href="#ConnectionPanel-501"><span class="linenos">501</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;selected_api_key_id&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span><span class="p">:</span>
</span><span id="ConnectionPanel-502"><a href="#ConnectionPanel-502"><span class="linenos">502</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;No API key selected&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-503"><a href="#ConnectionPanel-503"><span class="linenos">503</span></a>            <span class="k">return</span>
</span><span id="ConnectionPanel-504"><a href="#ConnectionPanel-504"><span class="linenos">504</span></a>
</span><span id="ConnectionPanel-505"><a href="#ConnectionPanel-505"><span class="linenos">505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Revoking selected API key&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span><span class="p">)</span>
</span><span id="ConnectionPanel-506"><a href="#ConnectionPanel-506"><span class="linenos">506</span></a>
</span><span id="ConnectionPanel-507"><a href="#ConnectionPanel-507"><span class="linenos">507</span></a>        <span class="c1"># Post API key revocation message</span>
</span><span id="ConnectionPanel-508"><a href="#ConnectionPanel-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">APIKeyRevoke</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span><span class="p">))</span>
</span><span id="ConnectionPanel-509"><a href="#ConnectionPanel-509"><span class="linenos">509</span></a>
</span><span id="ConnectionPanel-510"><a href="#ConnectionPanel-510"><span class="linenos">510</span></a>        <span class="c1"># Clear selection</span>
</span><span id="ConnectionPanel-511"><a href="#ConnectionPanel-511"><span class="linenos">511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel-512"><a href="#ConnectionPanel-512"><span class="linenos">512</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#revoke-api-key-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ConnectionPanel-513"><a href="#ConnectionPanel-513"><span class="linenos">513</span></a>
</span><span id="ConnectionPanel-514"><a href="#ConnectionPanel-514"><span class="linenos">514</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_refresh_api_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-515"><a href="#ConnectionPanel-515"><span class="linenos">515</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Refresh the API keys display.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-516"><a href="#ConnectionPanel-516"><span class="linenos">516</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Refreshing API keys&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-517"><a href="#ConnectionPanel-517"><span class="linenos">517</span></a>        <span class="c1"># This would trigger a refresh from the parent application</span>
</span><span id="ConnectionPanel-518"><a href="#ConnectionPanel-518"><span class="linenos">518</span></a>
</span><span id="ConnectionPanel-519"><a href="#ConnectionPanel-519"><span class="linenos">519</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_select_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_key</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-520"><a href="#ConnectionPanel-520"><span class="linenos">520</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Select a connection.</span>
</span><span id="ConnectionPanel-521"><a href="#ConnectionPanel-521"><span class="linenos">521</span></a>
</span><span id="ConnectionPanel-522"><a href="#ConnectionPanel-522"><span class="linenos">522</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-523"><a href="#ConnectionPanel-523"><span class="linenos">523</span></a><span class="sd">            row_key: Row key of the selected connection</span>
</span><span id="ConnectionPanel-524"><a href="#ConnectionPanel-524"><span class="linenos">524</span></a>
</span><span id="ConnectionPanel-525"><a href="#ConnectionPanel-525"><span class="linenos">525</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-526"><a href="#ConnectionPanel-526"><span class="linenos">526</span></a>        <span class="c1"># Calculate actual index in filtered connections</span>
</span><span id="ConnectionPanel-527"><a href="#ConnectionPanel-527"><span class="linenos">527</span></a>        <span class="n">start_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>
</span><span id="ConnectionPanel-528"><a href="#ConnectionPanel-528"><span class="linenos">528</span></a>        <span class="n">actual_idx</span> <span class="o">=</span> <span class="n">start_idx</span> <span class="o">+</span> <span class="n">row_key</span>
</span><span id="ConnectionPanel-529"><a href="#ConnectionPanel-529"><span class="linenos">529</span></a>
</span><span id="ConnectionPanel-530"><a href="#ConnectionPanel-530"><span class="linenos">530</span></a>        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">actual_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">):</span>
</span><span id="ConnectionPanel-531"><a href="#ConnectionPanel-531"><span class="linenos">531</span></a>            <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">[</span><span class="n">actual_idx</span><span class="p">]</span>
</span><span id="ConnectionPanel-532"><a href="#ConnectionPanel-532"><span class="linenos">532</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_address&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="ConnectionPanel-533"><a href="#ConnectionPanel-533"><span class="linenos">533</span></a>
</span><span id="ConnectionPanel-534"><a href="#ConnectionPanel-534"><span class="linenos">534</span></a>            <span class="c1"># Enable disconnect button</span>
</span><span id="ConnectionPanel-535"><a href="#ConnectionPanel-535"><span class="linenos">535</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#disconnect-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ConnectionPanel-536"><a href="#ConnectionPanel-536"><span class="linenos">536</span></a>
</span><span id="ConnectionPanel-537"><a href="#ConnectionPanel-537"><span class="linenos">537</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Selected connection&quot;</span><span class="p">,</span> <span class="n">client_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span><span class="p">)</span>
</span><span id="ConnectionPanel-538"><a href="#ConnectionPanel-538"><span class="linenos">538</span></a>
</span><span id="ConnectionPanel-539"><a href="#ConnectionPanel-539"><span class="linenos">539</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_select_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_key</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-540"><a href="#ConnectionPanel-540"><span class="linenos">540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Select an API key.</span>
</span><span id="ConnectionPanel-541"><a href="#ConnectionPanel-541"><span class="linenos">541</span></a>
</span><span id="ConnectionPanel-542"><a href="#ConnectionPanel-542"><span class="linenos">542</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel-543"><a href="#ConnectionPanel-543"><span class="linenos">543</span></a><span class="sd">            row_key: Row key of the selected API key</span>
</span><span id="ConnectionPanel-544"><a href="#ConnectionPanel-544"><span class="linenos">544</span></a>
</span><span id="ConnectionPanel-545"><a href="#ConnectionPanel-545"><span class="linenos">545</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-546"><a href="#ConnectionPanel-546"><span class="linenos">546</span></a>        <span class="k">if</span> <span class="n">row_key</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">):</span>
</span><span id="ConnectionPanel-547"><a href="#ConnectionPanel-547"><span class="linenos">547</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">[</span><span class="n">row_key</span><span class="p">]</span>
</span><span id="ConnectionPanel-548"><a href="#ConnectionPanel-548"><span class="linenos">548</span></a>            <span class="n">key_id</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-549"><a href="#ConnectionPanel-549"><span class="linenos">549</span></a>
</span><span id="ConnectionPanel-550"><a href="#ConnectionPanel-550"><span class="linenos">550</span></a>            <span class="c1"># Store the selected key ID</span>
</span><span id="ConnectionPanel-551"><a href="#ConnectionPanel-551"><span class="linenos">551</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span> <span class="o">=</span> <span class="n">key_id</span>
</span><span id="ConnectionPanel-552"><a href="#ConnectionPanel-552"><span class="linenos">552</span></a>
</span><span id="ConnectionPanel-553"><a href="#ConnectionPanel-553"><span class="linenos">553</span></a>            <span class="c1"># Enable revoke button</span>
</span><span id="ConnectionPanel-554"><a href="#ConnectionPanel-554"><span class="linenos">554</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#revoke-api-key-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ConnectionPanel-555"><a href="#ConnectionPanel-555"><span class="linenos">555</span></a>
</span><span id="ConnectionPanel-556"><a href="#ConnectionPanel-556"><span class="linenos">556</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Selected API key&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="n">key_id</span><span class="p">)</span>
</span><span id="ConnectionPanel-557"><a href="#ConnectionPanel-557"><span class="linenos">557</span></a>
</span><span id="ConnectionPanel-558"><a href="#ConnectionPanel-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ConnectionPanel-559"><a href="#ConnectionPanel-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get connection statistics.</span>
</span><span id="ConnectionPanel-560"><a href="#ConnectionPanel-560"><span class="linenos">560</span></a>
</span><span id="ConnectionPanel-561"><a href="#ConnectionPanel-561"><span class="linenos">561</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel-562"><a href="#ConnectionPanel-562"><span class="linenos">562</span></a><span class="sd">            Dictionary of connection statistics</span>
</span><span id="ConnectionPanel-563"><a href="#ConnectionPanel-563"><span class="linenos">563</span></a>
</span><span id="ConnectionPanel-564"><a href="#ConnectionPanel-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-565"><a href="#ConnectionPanel-565"><span class="linenos">565</span></a>        <span class="n">total_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
</span><span id="ConnectionPanel-566"><a href="#ConnectionPanel-566"><span class="linenos">566</span></a>        <span class="n">authenticated_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel-567"><a href="#ConnectionPanel-567"><span class="linenos">567</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_authenticated&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)]</span>
</span><span id="ConnectionPanel-568"><a href="#ConnectionPanel-568"><span class="linenos">568</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-569"><a href="#ConnectionPanel-569"><span class="linenos">569</span></a>        <span class="n">initialized_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel-570"><a href="#ConnectionPanel-570"><span class="linenos">570</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_initialized&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)]</span>
</span><span id="ConnectionPanel-571"><a href="#ConnectionPanel-571"><span class="linenos">571</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-572"><a href="#ConnectionPanel-572"><span class="linenos">572</span></a>        <span class="n">connections_with_violations</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel-573"><a href="#ConnectionPanel-573"><span class="linenos">573</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ConnectionPanel-574"><a href="#ConnectionPanel-574"><span class="linenos">574</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-575"><a href="#ConnectionPanel-575"><span class="linenos">575</span></a>
</span><span id="ConnectionPanel-576"><a href="#ConnectionPanel-576"><span class="linenos">576</span></a>        <span class="c1"># Calculate average RPS</span>
</span><span id="ConnectionPanel-577"><a href="#ConnectionPanel-577"><span class="linenos">577</span></a>        <span class="n">total_rps</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="ConnectionPanel-578"><a href="#ConnectionPanel-578"><span class="linenos">578</span></a>            <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rps&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;requests_per_second&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span>
</span><span id="ConnectionPanel-579"><a href="#ConnectionPanel-579"><span class="linenos">579</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel-580"><a href="#ConnectionPanel-580"><span class="linenos">580</span></a>        <span class="n">avg_rps</span> <span class="o">=</span> <span class="n">total_rps</span> <span class="o">/</span> <span class="n">total_connections</span> <span class="k">if</span> <span class="n">total_connections</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="ConnectionPanel-581"><a href="#ConnectionPanel-581"><span class="linenos">581</span></a>
</span><span id="ConnectionPanel-582"><a href="#ConnectionPanel-582"><span class="linenos">582</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ConnectionPanel-583"><a href="#ConnectionPanel-583"><span class="linenos">583</span></a>            <span class="s2">&quot;total_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel-584"><a href="#ConnectionPanel-584"><span class="linenos">584</span></a>            <span class="s2">&quot;authenticated_connections&quot;</span><span class="p">:</span> <span class="n">authenticated_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel-585"><a href="#ConnectionPanel-585"><span class="linenos">585</span></a>            <span class="s2">&quot;initialized_connections&quot;</span><span class="p">:</span> <span class="n">initialized_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel-586"><a href="#ConnectionPanel-586"><span class="linenos">586</span></a>            <span class="s2">&quot;unauthenticated_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span> <span class="o">-</span> <span class="n">authenticated_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel-587"><a href="#ConnectionPanel-587"><span class="linenos">587</span></a>            <span class="s2">&quot;uninitialized_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span> <span class="o">-</span> <span class="n">initialized_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel-588"><a href="#ConnectionPanel-588"><span class="linenos">588</span></a>            <span class="s2">&quot;connections_with_violations&quot;</span><span class="p">:</span> <span class="n">connections_with_violations</span><span class="p">,</span>
</span><span id="ConnectionPanel-589"><a href="#ConnectionPanel-589"><span class="linenos">589</span></a>            <span class="s2">&quot;average_rps&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">avg_rps</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="ConnectionPanel-590"><a href="#ConnectionPanel-590"><span class="linenos">590</span></a>            <span class="s2">&quot;filtered_connections&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">),</span>
</span><span id="ConnectionPanel-591"><a href="#ConnectionPanel-591"><span class="linenos">591</span></a>        <span class="p">}</span>
</span><span id="ConnectionPanel-592"><a href="#ConnectionPanel-592"><span class="linenos">592</span></a>
</span><span id="ConnectionPanel-593"><a href="#ConnectionPanel-593"><span class="linenos">593</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_api_key_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ConnectionPanel-594"><a href="#ConnectionPanel-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get API key statistics.</span>
</span><span id="ConnectionPanel-595"><a href="#ConnectionPanel-595"><span class="linenos">595</span></a>
</span><span id="ConnectionPanel-596"><a href="#ConnectionPanel-596"><span class="linenos">596</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel-597"><a href="#ConnectionPanel-597"><span class="linenos">597</span></a><span class="sd">            Dictionary of API key statistics</span>
</span><span id="ConnectionPanel-598"><a href="#ConnectionPanel-598"><span class="linenos">598</span></a>
</span><span id="ConnectionPanel-599"><a href="#ConnectionPanel-599"><span class="linenos">599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-600"><a href="#ConnectionPanel-600"><span class="linenos">600</span></a>        <span class="n">total_keys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">)</span>
</span><span id="ConnectionPanel-601"><a href="#ConnectionPanel-601"><span class="linenos">601</span></a>        <span class="n">active_keys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span> <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active_sessions&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="ConnectionPanel-602"><a href="#ConnectionPanel-602"><span class="linenos">602</span></a>
</span><span id="ConnectionPanel-603"><a href="#ConnectionPanel-603"><span class="linenos">603</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ConnectionPanel-604"><a href="#ConnectionPanel-604"><span class="linenos">604</span></a>            <span class="s2">&quot;total_api_keys&quot;</span><span class="p">:</span> <span class="n">total_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel-605"><a href="#ConnectionPanel-605"><span class="linenos">605</span></a>            <span class="s2">&quot;active_api_keys&quot;</span><span class="p">:</span> <span class="n">active_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel-606"><a href="#ConnectionPanel-606"><span class="linenos">606</span></a>            <span class="s2">&quot;inactive_api_keys&quot;</span><span class="p">:</span> <span class="n">total_keys</span> <span class="o">-</span> <span class="n">active_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel-607"><a href="#ConnectionPanel-607"><span class="linenos">607</span></a>        <span class="p">}</span>
</span><span id="ConnectionPanel-608"><a href="#ConnectionPanel-608"><span class="linenos">608</span></a>
</span><span id="ConnectionPanel-609"><a href="#ConnectionPanel-609"><span class="linenos">609</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-610"><a href="#ConnectionPanel-610"><span class="linenos">610</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cleanup resources when panel is destroyed.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-611"><a href="#ConnectionPanel-611"><span class="linenos">611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel-612"><a href="#ConnectionPanel-612"><span class="linenos">612</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection panel cleaned up&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel-613"><a href="#ConnectionPanel-613"><span class="linenos">613</span></a>
</span><span id="ConnectionPanel-614"><a href="#ConnectionPanel-614"><span class="linenos">614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel-615"><a href="#ConnectionPanel-615"><span class="linenos">615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel unmount event.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel-616"><a href="#ConnectionPanel-616"><span class="linenos">616</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Panel for managing TCP connections and API keys.</p>

<p>This panel displays active connections, allows disconnecting clients,
and provides API key management functionality.</p>
</div>


                            <div id="ConnectionPanel.__init__" class="classattr">
                                        <input id="ConnectionPanel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ConnectionPanel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;connection-panel&#39;</span>, </span><span class="param"><span class="n">refresh_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span></span>)</span>

                <label class="view-source-button" for="ConnectionPanel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.__init__-93"><a href="#ConnectionPanel.__init__-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;connection-panel&quot;</span><span class="p">,</span> <span class="n">refresh_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.__init__-94"><a href="#ConnectionPanel.__init__-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the connection panel.</span>
</span><span id="ConnectionPanel.__init__-95"><a href="#ConnectionPanel.__init__-95"><span class="linenos"> 95</span></a>
</span><span id="ConnectionPanel.__init__-96"><a href="#ConnectionPanel.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.__init__-97"><a href="#ConnectionPanel.__init__-97"><span class="linenos"> 97</span></a><span class="sd">            id: Panel ID</span>
</span><span id="ConnectionPanel.__init__-98"><a href="#ConnectionPanel.__init__-98"><span class="linenos"> 98</span></a><span class="sd">            refresh_interval: Refresh interval in seconds</span>
</span><span id="ConnectionPanel.__init__-99"><a href="#ConnectionPanel.__init__-99"><span class="linenos"> 99</span></a>
</span><span id="ConnectionPanel.__init__-100"><a href="#ConnectionPanel.__init__-100"><span class="linenos">100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.__init__-101"><a href="#ConnectionPanel.__init__-101"><span class="linenos">101</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="ConnectionPanel.__init__-102"><a href="#ConnectionPanel.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.__init__-103"><a href="#ConnectionPanel.__init__-103"><span class="linenos">103</span></a>
</span><span id="ConnectionPanel.__init__-104"><a href="#ConnectionPanel.__init__-104"><span class="linenos">104</span></a>        <span class="c1"># State</span>
</span><span id="ConnectionPanel.__init__-105"><a href="#ConnectionPanel.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel.__init__-106"><a href="#ConnectionPanel.__init__-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel.__init__-107"><a href="#ConnectionPanel.__init__-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ConnectionPanel.__init__-108"><a href="#ConnectionPanel.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_connection</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel.__init__-109"><a href="#ConnectionPanel.__init__-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">selected_api_key_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel.__init__-110"><a href="#ConnectionPanel.__init__-110"><span class="linenos">110</span></a>
</span><span id="ConnectionPanel.__init__-111"><a href="#ConnectionPanel.__init__-111"><span class="linenos">111</span></a>        <span class="c1"># Filtering and pagination</span>
</span><span id="ConnectionPanel.__init__-112"><a href="#ConnectionPanel.__init__-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ConnectionPanel.__init__-113"><a href="#ConnectionPanel.__init__-113"><span class="linenos">113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ConnectionPanel.__init__-114"><a href="#ConnectionPanel.__init__-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="ConnectionPanel.__init__-115"><a href="#ConnectionPanel.__init__-115"><span class="linenos">115</span></a>
</span><span id="ConnectionPanel.__init__-116"><a href="#ConnectionPanel.__init__-116"><span class="linenos">116</span></a>        <span class="c1"># Refresh management</span>
</span><span id="ConnectionPanel.__init__-117"><a href="#ConnectionPanel.__init__-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">refresh_interval</span>
</span><span id="ConnectionPanel.__init__-118"><a href="#ConnectionPanel.__init__-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ConnectionPanel.__init__-119"><a href="#ConnectionPanel.__init__-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the connection panel.</p>

<p>Args:
    id: Panel ID
    refresh_interval: Refresh interval in seconds</p>
</div>


                            </div>
                            <div id="ConnectionPanel.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.logger"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.connections" class="classattr">
                                <div class="attr variable">
            <span class="name">connections</span><span class="annotation">: list[dict[str, typing.Any]]</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.connections"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.api_keys" class="classattr">
                                <div class="attr variable">
            <span class="name">api_keys</span><span class="annotation">: list[dict[str, typing.Any]]</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.api_keys"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.filtered_connections" class="classattr">
                                <div class="attr variable">
            <span class="name">filtered_connections</span><span class="annotation">: list[dict[str, typing.Any]]</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.filtered_connections"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.selected_connection" class="classattr">
                                <div class="attr variable">
            <span class="name">selected_connection</span><span class="annotation">: str | None</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.selected_connection"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.selected_api_key_id" class="classattr">
                                <div class="attr variable">
            <span class="name">selected_api_key_id</span><span class="annotation">: str | None</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.selected_api_key_id"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.filter_text" class="classattr">
                                <div class="attr variable">
            <span class="name">filter_text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.filter_text"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.current_page" class="classattr">
                                <div class="attr variable">
            <span class="name">current_page</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.current_page"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.page_size" class="classattr">
                                <div class="attr variable">
            <span class="name">page_size</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.page_size"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.refresh_interval" class="classattr">
                                <div class="attr variable">
            <span class="name">refresh_interval</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.refresh_interval"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.refresh_task" class="classattr">
                                <div class="attr variable">
            <span class="name">refresh_task</span><span class="annotation">: _asyncio.Task[None] | None</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.refresh_task"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.is_refreshing" class="classattr">
                                <div class="attr variable">
            <span class="name">is_refreshing</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.is_refreshing"></a>
    
    

                            </div>
                            <div id="ConnectionPanel.compose" class="classattr">
                                        <input id="ConnectionPanel.compose-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compose</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">textual</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.compose-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.compose"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.compose-121"><a href="#ConnectionPanel.compose-121"><span class="linenos">121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="ConnectionPanel.compose-122"><a href="#ConnectionPanel.compose-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the connection panel layout.</span>
</span><span id="ConnectionPanel.compose-123"><a href="#ConnectionPanel.compose-123"><span class="linenos">123</span></a>
</span><span id="ConnectionPanel.compose-124"><a href="#ConnectionPanel.compose-124"><span class="linenos">124</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel.compose-125"><a href="#ConnectionPanel.compose-125"><span class="linenos">125</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="ConnectionPanel.compose-126"><a href="#ConnectionPanel.compose-126"><span class="linenos">126</span></a>
</span><span id="ConnectionPanel.compose-127"><a href="#ConnectionPanel.compose-127"><span class="linenos">127</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.compose-128"><a href="#ConnectionPanel.compose-128"><span class="linenos">128</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Connection Management&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-129"><a href="#ConnectionPanel.compose-129"><span class="linenos">129</span></a>
</span><span id="ConnectionPanel.compose-130"><a href="#ConnectionPanel.compose-130"><span class="linenos">130</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel.compose-131"><a href="#ConnectionPanel.compose-131"><span class="linenos">131</span></a>            <span class="c1"># Connection controls</span>
</span><span id="ConnectionPanel.compose-132"><a href="#ConnectionPanel.compose-132"><span class="linenos">132</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;connection-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel.compose-133"><a href="#ConnectionPanel.compose-133"><span class="linenos">133</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Disconnect Selected&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;disconnect-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-134"><a href="#ConnectionPanel.compose-134"><span class="linenos">134</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Disconnect All&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;disconnect-all-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-135"><a href="#ConnectionPanel.compose-135"><span class="linenos">135</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Refresh&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;refresh-connections-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-136"><a href="#ConnectionPanel.compose-136"><span class="linenos">136</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Auto Refresh&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;auto-refresh-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-137"><a href="#ConnectionPanel.compose-137"><span class="linenos">137</span></a>
</span><span id="ConnectionPanel.compose-138"><a href="#ConnectionPanel.compose-138"><span class="linenos">138</span></a>            <span class="c1"># Connection filter</span>
</span><span id="ConnectionPanel.compose-139"><a href="#ConnectionPanel.compose-139"><span class="linenos">139</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;connection-filter&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel.compose-140"><a href="#ConnectionPanel.compose-140"><span class="linenos">140</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Filter:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;filter-label&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-141"><a href="#ConnectionPanel.compose-141"><span class="linenos">141</span></a>                <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span>
</span><span id="ConnectionPanel.compose-142"><a href="#ConnectionPanel.compose-142"><span class="linenos">142</span></a>                    <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Filter by address or key ID...&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connection-filter-input&quot;</span>
</span><span id="ConnectionPanel.compose-143"><a href="#ConnectionPanel.compose-143"><span class="linenos">143</span></a>                <span class="p">)</span>
</span><span id="ConnectionPanel.compose-144"><a href="#ConnectionPanel.compose-144"><span class="linenos">144</span></a>
</span><span id="ConnectionPanel.compose-145"><a href="#ConnectionPanel.compose-145"><span class="linenos">145</span></a>            <span class="c1"># Connections table</span>
</span><span id="ConnectionPanel.compose-146"><a href="#ConnectionPanel.compose-146"><span class="linenos">146</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Active Connections:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-147"><a href="#ConnectionPanel.compose-147"><span class="linenos">147</span></a>            <span class="k">yield</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connections-table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-148"><a href="#ConnectionPanel.compose-148"><span class="linenos">148</span></a>
</span><span id="ConnectionPanel.compose-149"><a href="#ConnectionPanel.compose-149"><span class="linenos">149</span></a>            <span class="c1"># Pagination controls</span>
</span><span id="ConnectionPanel.compose-150"><a href="#ConnectionPanel.compose-150"><span class="linenos">150</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;pagination-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel.compose-151"><a href="#ConnectionPanel.compose-151"><span class="linenos">151</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Previous&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;prev-page-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-152"><a href="#ConnectionPanel.compose-152"><span class="linenos">152</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Page 1 of 1&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;page-info&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-153"><a href="#ConnectionPanel.compose-153"><span class="linenos">153</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Next&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;next-page-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-154"><a href="#ConnectionPanel.compose-154"><span class="linenos">154</span></a>
</span><span id="ConnectionPanel.compose-155"><a href="#ConnectionPanel.compose-155"><span class="linenos">155</span></a>            <span class="c1"># API Key controls</span>
</span><span id="ConnectionPanel.compose-156"><a href="#ConnectionPanel.compose-156"><span class="linenos">156</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;api-key-controls&quot;</span><span class="p">):</span>
</span><span id="ConnectionPanel.compose-157"><a href="#ConnectionPanel.compose-157"><span class="linenos">157</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Generate API Key&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;generate-api-key-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-158"><a href="#ConnectionPanel.compose-158"><span class="linenos">158</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Revoke Selected&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;revoke-api-key-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-159"><a href="#ConnectionPanel.compose-159"><span class="linenos">159</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Refresh Keys&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;refresh-keys-btn&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-160"><a href="#ConnectionPanel.compose-160"><span class="linenos">160</span></a>
</span><span id="ConnectionPanel.compose-161"><a href="#ConnectionPanel.compose-161"><span class="linenos">161</span></a>            <span class="c1"># API Keys table</span>
</span><span id="ConnectionPanel.compose-162"><a href="#ConnectionPanel.compose-162"><span class="linenos">162</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;API Keys:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.compose-163"><a href="#ConnectionPanel.compose-163"><span class="linenos">163</span></a>            <span class="k">yield</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api-keys-table&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Compose the connection panel layout.</p>

<p>Returns:
    ComposeResult: The composed UI elements</p>
</div>


                            </div>
                            <div id="ConnectionPanel.on_mount" class="classattr">
                                        <input id="ConnectionPanel.on_mount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_mount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.on_mount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.on_mount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.on_mount-165"><a href="#ConnectionPanel.on_mount-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_mount-166"><a href="#ConnectionPanel.on_mount-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.on_mount-167"><a href="#ConnectionPanel.on_mount-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection panel mounted&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.on_mount-168"><a href="#ConnectionPanel.on_mount-168"><span class="linenos">168</span></a>
</span><span id="ConnectionPanel.on_mount-169"><a href="#ConnectionPanel.on_mount-169"><span class="linenos">169</span></a>        <span class="c1"># Initialize connections table with enhanced columns</span>
</span><span id="ConnectionPanel.on_mount-170"><a href="#ConnectionPanel.on_mount-170"><span class="linenos">170</span></a>        <span class="n">connections_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connections-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel.on_mount-171"><a href="#ConnectionPanel.on_mount-171"><span class="linenos">171</span></a>        <span class="n">connections_table</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span>
</span><span id="ConnectionPanel.on_mount-172"><a href="#ConnectionPanel.on_mount-172"><span class="linenos">172</span></a>            <span class="s2">&quot;Client Address&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-173"><a href="#ConnectionPanel.on_mount-173"><span class="linenos">173</span></a>            <span class="s2">&quot;Key ID&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-174"><a href="#ConnectionPanel.on_mount-174"><span class="linenos">174</span></a>            <span class="s2">&quot;Permissions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-175"><a href="#ConnectionPanel.on_mount-175"><span class="linenos">175</span></a>            <span class="s2">&quot;RPS&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-176"><a href="#ConnectionPanel.on_mount-176"><span class="linenos">176</span></a>            <span class="s2">&quot;Violations&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-177"><a href="#ConnectionPanel.on_mount-177"><span class="linenos">177</span></a>            <span class="s2">&quot;Connected At&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-178"><a href="#ConnectionPanel.on_mount-178"><span class="linenos">178</span></a>            <span class="s2">&quot;Status&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-179"><a href="#ConnectionPanel.on_mount-179"><span class="linenos">179</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.on_mount-180"><a href="#ConnectionPanel.on_mount-180"><span class="linenos">180</span></a>
</span><span id="ConnectionPanel.on_mount-181"><a href="#ConnectionPanel.on_mount-181"><span class="linenos">181</span></a>        <span class="c1"># Initialize API keys table</span>
</span><span id="ConnectionPanel.on_mount-182"><a href="#ConnectionPanel.on_mount-182"><span class="linenos">182</span></a>        <span class="n">api_keys_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#api-keys-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel.on_mount-183"><a href="#ConnectionPanel.on_mount-183"><span class="linenos">183</span></a>        <span class="n">api_keys_table</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span>
</span><span id="ConnectionPanel.on_mount-184"><a href="#ConnectionPanel.on_mount-184"><span class="linenos">184</span></a>            <span class="s2">&quot;Key ID&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-185"><a href="#ConnectionPanel.on_mount-185"><span class="linenos">185</span></a>            <span class="s2">&quot;Created&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-186"><a href="#ConnectionPanel.on_mount-186"><span class="linenos">186</span></a>            <span class="s2">&quot;Expires&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-187"><a href="#ConnectionPanel.on_mount-187"><span class="linenos">187</span></a>            <span class="s2">&quot;Permissions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-188"><a href="#ConnectionPanel.on_mount-188"><span class="linenos">188</span></a>            <span class="s2">&quot;Active Sessions&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.on_mount-189"><a href="#ConnectionPanel.on_mount-189"><span class="linenos">189</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.on_mount-190"><a href="#ConnectionPanel.on_mount-190"><span class="linenos">190</span></a>
</span><span id="ConnectionPanel.on_mount-191"><a href="#ConnectionPanel.on_mount-191"><span class="linenos">191</span></a>        <span class="c1"># Start auto-refresh if enabled</span>
</span><span id="ConnectionPanel.on_mount-192"><a href="#ConnectionPanel.on_mount-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_auto_refresh</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle panel mount event.</p>
</div>


                            </div>
                            <div id="ConnectionPanel.update_connections" class="classattr">
                                        <input id="ConnectionPanel.update_connections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_connections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.update_connections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.update_connections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.update_connections-194"><a href="#ConnectionPanel.update_connections-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.update_connections-195"><a href="#ConnectionPanel.update_connections-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the connections display.</span>
</span><span id="ConnectionPanel.update_connections-196"><a href="#ConnectionPanel.update_connections-196"><span class="linenos">196</span></a>
</span><span id="ConnectionPanel.update_connections-197"><a href="#ConnectionPanel.update_connections-197"><span class="linenos">197</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.update_connections-198"><a href="#ConnectionPanel.update_connections-198"><span class="linenos">198</span></a><span class="sd">            connections: List of connection information</span>
</span><span id="ConnectionPanel.update_connections-199"><a href="#ConnectionPanel.update_connections-199"><span class="linenos">199</span></a>
</span><span id="ConnectionPanel.update_connections-200"><a href="#ConnectionPanel.update_connections-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.update_connections-201"><a href="#ConnectionPanel.update_connections-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">connections</span>
</span><span id="ConnectionPanel.update_connections-202"><a href="#ConnectionPanel.update_connections-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filter</span><span class="p">()</span>
</span><span id="ConnectionPanel.update_connections-203"><a href="#ConnectionPanel.update_connections-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Update the connections display.</p>

<p>Args:
    connections: List of connection information</p>
</div>


                            </div>
                            <div id="ConnectionPanel.update_api_keys" class="classattr">
                                        <input id="ConnectionPanel.update_api_keys-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_api_keys</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">api_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.update_api_keys-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.update_api_keys"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.update_api_keys-335"><a href="#ConnectionPanel.update_api_keys-335"><span class="linenos">335</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_api_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.update_api_keys-336"><a href="#ConnectionPanel.update_api_keys-336"><span class="linenos">336</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the API keys display.</span>
</span><span id="ConnectionPanel.update_api_keys-337"><a href="#ConnectionPanel.update_api_keys-337"><span class="linenos">337</span></a>
</span><span id="ConnectionPanel.update_api_keys-338"><a href="#ConnectionPanel.update_api_keys-338"><span class="linenos">338</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.update_api_keys-339"><a href="#ConnectionPanel.update_api_keys-339"><span class="linenos">339</span></a><span class="sd">            api_keys: List of API key information</span>
</span><span id="ConnectionPanel.update_api_keys-340"><a href="#ConnectionPanel.update_api_keys-340"><span class="linenos">340</span></a>
</span><span id="ConnectionPanel.update_api_keys-341"><a href="#ConnectionPanel.update_api_keys-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.update_api_keys-342"><a href="#ConnectionPanel.update_api_keys-342"><span class="linenos">342</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;update_api_keys called&quot;</span><span class="p">,</span> <span class="n">api_keys_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">),</span> <span class="n">api_keys</span><span class="o">=</span><span class="n">api_keys</span><span class="p">)</span>
</span><span id="ConnectionPanel.update_api_keys-343"><a href="#ConnectionPanel.update_api_keys-343"><span class="linenos">343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span> <span class="o">=</span> <span class="n">api_keys</span>
</span><span id="ConnectionPanel.update_api_keys-344"><a href="#ConnectionPanel.update_api_keys-344"><span class="linenos">344</span></a>
</span><span id="ConnectionPanel.update_api_keys-345"><a href="#ConnectionPanel.update_api_keys-345"><span class="linenos">345</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ConnectionPanel.update_api_keys-346"><a href="#ConnectionPanel.update_api_keys-346"><span class="linenos">346</span></a>            <span class="n">api_keys_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#api-keys-table&quot;</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
</span><span id="ConnectionPanel.update_api_keys-347"><a href="#ConnectionPanel.update_api_keys-347"><span class="linenos">347</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found API keys table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.update_api_keys-348"><a href="#ConnectionPanel.update_api_keys-348"><span class="linenos">348</span></a>
</span><span id="ConnectionPanel.update_api_keys-349"><a href="#ConnectionPanel.update_api_keys-349"><span class="linenos">349</span></a>            <span class="c1"># Clear existing data</span>
</span><span id="ConnectionPanel.update_api_keys-350"><a href="#ConnectionPanel.update_api_keys-350"><span class="linenos">350</span></a>            <span class="n">api_keys_table</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ConnectionPanel.update_api_keys-351"><a href="#ConnectionPanel.update_api_keys-351"><span class="linenos">351</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cleared API keys table&quot;</span><span class="p">)</span>
</span><span id="ConnectionPanel.update_api_keys-352"><a href="#ConnectionPanel.update_api_keys-352"><span class="linenos">352</span></a>
</span><span id="ConnectionPanel.update_api_keys-353"><a href="#ConnectionPanel.update_api_keys-353"><span class="linenos">353</span></a>            <span class="c1"># Add API key data</span>
</span><span id="ConnectionPanel.update_api_keys-354"><a href="#ConnectionPanel.update_api_keys-354"><span class="linenos">354</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">api_keys</span><span class="p">:</span>
</span><span id="ConnectionPanel.update_api_keys-355"><a href="#ConnectionPanel.update_api_keys-355"><span class="linenos">355</span></a>                <span class="n">permissions</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ConnectionPanel.update_api_keys-356"><a href="#ConnectionPanel.update_api_keys-356"><span class="linenos">356</span></a>                <span class="n">permissions_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">])</span>
</span><span id="ConnectionPanel.update_api_keys-357"><a href="#ConnectionPanel.update_api_keys-357"><span class="linenos">357</span></a>
</span><span id="ConnectionPanel.update_api_keys-358"><a href="#ConnectionPanel.update_api_keys-358"><span class="linenos">358</span></a>                <span class="n">api_keys_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
</span><span id="ConnectionPanel.update_api_keys-359"><a href="#ConnectionPanel.update_api_keys-359"><span class="linenos">359</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel.update_api_keys-360"><a href="#ConnectionPanel.update_api_keys-360"><span class="linenos">360</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel.update_api_keys-361"><a href="#ConnectionPanel.update_api_keys-361"><span class="linenos">361</span></a>                    <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expires_at&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
</span><span id="ConnectionPanel.update_api_keys-362"><a href="#ConnectionPanel.update_api_keys-362"><span class="linenos">362</span></a>                    <span class="n">permissions_str</span> <span class="ow">or</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
</span><span id="ConnectionPanel.update_api_keys-363"><a href="#ConnectionPanel.update_api_keys-363"><span class="linenos">363</span></a>                    <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active_sessions&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="ConnectionPanel.update_api_keys-364"><a href="#ConnectionPanel.update_api_keys-364"><span class="linenos">364</span></a>                <span class="p">)</span>
</span><span id="ConnectionPanel.update_api_keys-365"><a href="#ConnectionPanel.update_api_keys-365"><span class="linenos">365</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added API key row&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key_id&quot;</span><span class="p">))</span>
</span><span id="ConnectionPanel.update_api_keys-366"><a href="#ConnectionPanel.update_api_keys-366"><span class="linenos">366</span></a>
</span><span id="ConnectionPanel.update_api_keys-367"><a href="#ConnectionPanel.update_api_keys-367"><span class="linenos">367</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated API keys display&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">))</span>
</span><span id="ConnectionPanel.update_api_keys-368"><a href="#ConnectionPanel.update_api_keys-368"><span class="linenos">368</span></a>
</span><span id="ConnectionPanel.update_api_keys-369"><a href="#ConnectionPanel.update_api_keys-369"><span class="linenos">369</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ConnectionPanel.update_api_keys-370"><a href="#ConnectionPanel.update_api_keys-370"><span class="linenos">370</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating API keys display&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Update the API keys display.</p>

<p>Args:
    api_keys: List of API key information</p>
</div>


                            </div>
                            <div id="ConnectionPanel.on_button_pressed" class="classattr">
                                        <input id="ConnectionPanel.on_button_pressed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_button_pressed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_button</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.on_button_pressed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.on_button_pressed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.on_button_pressed-372"><a href="#ConnectionPanel.on_button_pressed-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-373"><a href="#ConnectionPanel.on_button_pressed-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="ConnectionPanel.on_button_pressed-374"><a href="#ConnectionPanel.on_button_pressed-374"><span class="linenos">374</span></a>
</span><span id="ConnectionPanel.on_button_pressed-375"><a href="#ConnectionPanel.on_button_pressed-375"><span class="linenos">375</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.on_button_pressed-376"><a href="#ConnectionPanel.on_button_pressed-376"><span class="linenos">376</span></a><span class="sd">            event: Button press event</span>
</span><span id="ConnectionPanel.on_button_pressed-377"><a href="#ConnectionPanel.on_button_pressed-377"><span class="linenos">377</span></a>
</span><span id="ConnectionPanel.on_button_pressed-378"><a href="#ConnectionPanel.on_button_pressed-378"><span class="linenos">378</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.on_button_pressed-379"><a href="#ConnectionPanel.on_button_pressed-379"><span class="linenos">379</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="ConnectionPanel.on_button_pressed-380"><a href="#ConnectionPanel.on_button_pressed-380"><span class="linenos">380</span></a>
</span><span id="ConnectionPanel.on_button_pressed-381"><a href="#ConnectionPanel.on_button_pressed-381"><span class="linenos">381</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;disconnect-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-382"><a href="#ConnectionPanel.on_button_pressed-382"><span class="linenos">382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_selected_connection</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-383"><a href="#ConnectionPanel.on_button_pressed-383"><span class="linenos">383</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;disconnect-all-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-384"><a href="#ConnectionPanel.on_button_pressed-384"><span class="linenos">384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_all_connections</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-385"><a href="#ConnectionPanel.on_button_pressed-385"><span class="linenos">385</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;refresh-connections-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-386"><a href="#ConnectionPanel.on_button_pressed-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_connections</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-387"><a href="#ConnectionPanel.on_button_pressed-387"><span class="linenos">387</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;auto-refresh-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-388"><a href="#ConnectionPanel.on_button_pressed-388"><span class="linenos">388</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-389"><a href="#ConnectionPanel.on_button_pressed-389"><span class="linenos">389</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;prev-page-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-390"><a href="#ConnectionPanel.on_button_pressed-390"><span class="linenos">390</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_page</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-391"><a href="#ConnectionPanel.on_button_pressed-391"><span class="linenos">391</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;next-page-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-392"><a href="#ConnectionPanel.on_button_pressed-392"><span class="linenos">392</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_next_page</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-393"><a href="#ConnectionPanel.on_button_pressed-393"><span class="linenos">393</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;generate-api-key-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-394"><a href="#ConnectionPanel.on_button_pressed-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_generate_api_key</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-395"><a href="#ConnectionPanel.on_button_pressed-395"><span class="linenos">395</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;revoke-api-key-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-396"><a href="#ConnectionPanel.on_button_pressed-396"><span class="linenos">396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_revoke_selected_api_key</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_button_pressed-397"><a href="#ConnectionPanel.on_button_pressed-397"><span class="linenos">397</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;refresh-keys-btn&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_button_pressed-398"><a href="#ConnectionPanel.on_button_pressed-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_api_keys</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle button press events.</p>

<p>Args:
    event: Button press event</p>
</div>


                            </div>
                            <div id="ConnectionPanel.on_data_table_row_selected" class="classattr">
                                        <input id="ConnectionPanel.on_data_table_row_selected-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_data_table_row_selected</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_data_table</span><span class="o">.</span><span class="n">DataTable</span><span class="o">.</span><span class="n">RowSelected</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.on_data_table_row_selected-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.on_data_table_row_selected"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.on_data_table_row_selected-400"><a href="#ConnectionPanel.on_data_table_row_selected-400"><span class="linenos">400</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_data_table_row_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">DataTable</span><span class="o">.</span><span class="n">RowSelected</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-401"><a href="#ConnectionPanel.on_data_table_row_selected-401"><span class="linenos">401</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle data table row selection.</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-402"><a href="#ConnectionPanel.on_data_table_row_selected-402"><span class="linenos">402</span></a>
</span><span id="ConnectionPanel.on_data_table_row_selected-403"><a href="#ConnectionPanel.on_data_table_row_selected-403"><span class="linenos">403</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-404"><a href="#ConnectionPanel.on_data_table_row_selected-404"><span class="linenos">404</span></a><span class="sd">            event: Row selection event</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-405"><a href="#ConnectionPanel.on_data_table_row_selected-405"><span class="linenos">405</span></a>
</span><span id="ConnectionPanel.on_data_table_row_selected-406"><a href="#ConnectionPanel.on_data_table_row_selected-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-407"><a href="#ConnectionPanel.on_data_table_row_selected-407"><span class="linenos">407</span></a>        <span class="n">table_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">data_table</span><span class="o">.</span><span class="n">id</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-408"><a href="#ConnectionPanel.on_data_table_row_selected-408"><span class="linenos">408</span></a>
</span><span id="ConnectionPanel.on_data_table_row_selected-409"><a href="#ConnectionPanel.on_data_table_row_selected-409"><span class="linenos">409</span></a>        <span class="k">if</span> <span class="n">table_id</span> <span class="o">==</span> <span class="s2">&quot;connections-table&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-410"><a href="#ConnectionPanel.on_data_table_row_selected-410"><span class="linenos">410</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_select_connection</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">row_key</span><span class="p">)</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-411"><a href="#ConnectionPanel.on_data_table_row_selected-411"><span class="linenos">411</span></a>        <span class="k">elif</span> <span class="n">table_id</span> <span class="o">==</span> <span class="s2">&quot;api-keys-table&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_data_table_row_selected-412"><a href="#ConnectionPanel.on_data_table_row_selected-412"><span class="linenos">412</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_select_api_key</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">row_key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle data table row selection.</p>

<p>Args:
    event: Row selection event</p>
</div>


                            </div>
                            <div id="ConnectionPanel.on_input_changed" class="classattr">
                                        <input id="ConnectionPanel.on_input_changed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_input_changed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_input</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">Changed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.on_input_changed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.on_input_changed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.on_input_changed-414"><a href="#ConnectionPanel.on_input_changed-414"><span class="linenos">414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Input</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_input_changed-415"><a href="#ConnectionPanel.on_input_changed-415"><span class="linenos">415</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle input change events.</span>
</span><span id="ConnectionPanel.on_input_changed-416"><a href="#ConnectionPanel.on_input_changed-416"><span class="linenos">416</span></a>
</span><span id="ConnectionPanel.on_input_changed-417"><a href="#ConnectionPanel.on_input_changed-417"><span class="linenos">417</span></a><span class="sd">        Args:</span>
</span><span id="ConnectionPanel.on_input_changed-418"><a href="#ConnectionPanel.on_input_changed-418"><span class="linenos">418</span></a><span class="sd">            event: Input change event</span>
</span><span id="ConnectionPanel.on_input_changed-419"><a href="#ConnectionPanel.on_input_changed-419"><span class="linenos">419</span></a>
</span><span id="ConnectionPanel.on_input_changed-420"><a href="#ConnectionPanel.on_input_changed-420"><span class="linenos">420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.on_input_changed-421"><a href="#ConnectionPanel.on_input_changed-421"><span class="linenos">421</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;connection-filter-input&quot;</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_input_changed-422"><a href="#ConnectionPanel.on_input_changed-422"><span class="linenos">422</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span>
</span><span id="ConnectionPanel.on_input_changed-423"><a href="#ConnectionPanel.on_input_changed-423"><span class="linenos">423</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_page</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Reset to first page when filtering</span>
</span><span id="ConnectionPanel.on_input_changed-424"><a href="#ConnectionPanel.on_input_changed-424"><span class="linenos">424</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filter</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_input_changed-425"><a href="#ConnectionPanel.on_input_changed-425"><span class="linenos">425</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_connections_display</span><span class="p">()</span>
</span><span id="ConnectionPanel.on_input_changed-426"><a href="#ConnectionPanel.on_input_changed-426"><span class="linenos">426</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Filter applied&quot;</span><span class="p">,</span> <span class="n">filter_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_text</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle input change events.</p>

<p>Args:
    event: Input change event</p>
</div>


                            </div>
                            <div id="ConnectionPanel.get_connection_statistics" class="classattr">
                                        <input id="ConnectionPanel.get_connection_statistics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_connection_statistics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.get_connection_statistics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.get_connection_statistics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.get_connection_statistics-558"><a href="#ConnectionPanel.get_connection_statistics-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ConnectionPanel.get_connection_statistics-559"><a href="#ConnectionPanel.get_connection_statistics-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get connection statistics.</span>
</span><span id="ConnectionPanel.get_connection_statistics-560"><a href="#ConnectionPanel.get_connection_statistics-560"><span class="linenos">560</span></a>
</span><span id="ConnectionPanel.get_connection_statistics-561"><a href="#ConnectionPanel.get_connection_statistics-561"><span class="linenos">561</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel.get_connection_statistics-562"><a href="#ConnectionPanel.get_connection_statistics-562"><span class="linenos">562</span></a><span class="sd">            Dictionary of connection statistics</span>
</span><span id="ConnectionPanel.get_connection_statistics-563"><a href="#ConnectionPanel.get_connection_statistics-563"><span class="linenos">563</span></a>
</span><span id="ConnectionPanel.get_connection_statistics-564"><a href="#ConnectionPanel.get_connection_statistics-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.get_connection_statistics-565"><a href="#ConnectionPanel.get_connection_statistics-565"><span class="linenos">565</span></a>        <span class="n">total_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
</span><span id="ConnectionPanel.get_connection_statistics-566"><a href="#ConnectionPanel.get_connection_statistics-566"><span class="linenos">566</span></a>        <span class="n">authenticated_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel.get_connection_statistics-567"><a href="#ConnectionPanel.get_connection_statistics-567"><span class="linenos">567</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_authenticated&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)]</span>
</span><span id="ConnectionPanel.get_connection_statistics-568"><a href="#ConnectionPanel.get_connection_statistics-568"><span class="linenos">568</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.get_connection_statistics-569"><a href="#ConnectionPanel.get_connection_statistics-569"><span class="linenos">569</span></a>        <span class="n">initialized_connections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel.get_connection_statistics-570"><a href="#ConnectionPanel.get_connection_statistics-570"><span class="linenos">570</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_initialized&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)]</span>
</span><span id="ConnectionPanel.get_connection_statistics-571"><a href="#ConnectionPanel.get_connection_statistics-571"><span class="linenos">571</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.get_connection_statistics-572"><a href="#ConnectionPanel.get_connection_statistics-572"><span class="linenos">572</span></a>        <span class="n">connections_with_violations</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="ConnectionPanel.get_connection_statistics-573"><a href="#ConnectionPanel.get_connection_statistics-573"><span class="linenos">573</span></a>            <span class="p">[</span><span class="n">conn</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ConnectionPanel.get_connection_statistics-574"><a href="#ConnectionPanel.get_connection_statistics-574"><span class="linenos">574</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.get_connection_statistics-575"><a href="#ConnectionPanel.get_connection_statistics-575"><span class="linenos">575</span></a>
</span><span id="ConnectionPanel.get_connection_statistics-576"><a href="#ConnectionPanel.get_connection_statistics-576"><span class="linenos">576</span></a>        <span class="c1"># Calculate average RPS</span>
</span><span id="ConnectionPanel.get_connection_statistics-577"><a href="#ConnectionPanel.get_connection_statistics-577"><span class="linenos">577</span></a>        <span class="n">total_rps</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="ConnectionPanel.get_connection_statistics-578"><a href="#ConnectionPanel.get_connection_statistics-578"><span class="linenos">578</span></a>            <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rps&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;requests_per_second&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span>
</span><span id="ConnectionPanel.get_connection_statistics-579"><a href="#ConnectionPanel.get_connection_statistics-579"><span class="linenos">579</span></a>        <span class="p">)</span>
</span><span id="ConnectionPanel.get_connection_statistics-580"><a href="#ConnectionPanel.get_connection_statistics-580"><span class="linenos">580</span></a>        <span class="n">avg_rps</span> <span class="o">=</span> <span class="n">total_rps</span> <span class="o">/</span> <span class="n">total_connections</span> <span class="k">if</span> <span class="n">total_connections</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="ConnectionPanel.get_connection_statistics-581"><a href="#ConnectionPanel.get_connection_statistics-581"><span class="linenos">581</span></a>
</span><span id="ConnectionPanel.get_connection_statistics-582"><a href="#ConnectionPanel.get_connection_statistics-582"><span class="linenos">582</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ConnectionPanel.get_connection_statistics-583"><a href="#ConnectionPanel.get_connection_statistics-583"><span class="linenos">583</span></a>            <span class="s2">&quot;total_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-584"><a href="#ConnectionPanel.get_connection_statistics-584"><span class="linenos">584</span></a>            <span class="s2">&quot;authenticated_connections&quot;</span><span class="p">:</span> <span class="n">authenticated_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-585"><a href="#ConnectionPanel.get_connection_statistics-585"><span class="linenos">585</span></a>            <span class="s2">&quot;initialized_connections&quot;</span><span class="p">:</span> <span class="n">initialized_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-586"><a href="#ConnectionPanel.get_connection_statistics-586"><span class="linenos">586</span></a>            <span class="s2">&quot;unauthenticated_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span> <span class="o">-</span> <span class="n">authenticated_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-587"><a href="#ConnectionPanel.get_connection_statistics-587"><span class="linenos">587</span></a>            <span class="s2">&quot;uninitialized_connections&quot;</span><span class="p">:</span> <span class="n">total_connections</span> <span class="o">-</span> <span class="n">initialized_connections</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-588"><a href="#ConnectionPanel.get_connection_statistics-588"><span class="linenos">588</span></a>            <span class="s2">&quot;connections_with_violations&quot;</span><span class="p">:</span> <span class="n">connections_with_violations</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_connection_statistics-589"><a href="#ConnectionPanel.get_connection_statistics-589"><span class="linenos">589</span></a>            <span class="s2">&quot;average_rps&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">avg_rps</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="ConnectionPanel.get_connection_statistics-590"><a href="#ConnectionPanel.get_connection_statistics-590"><span class="linenos">590</span></a>            <span class="s2">&quot;filtered_connections&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered_connections</span><span class="p">),</span>
</span><span id="ConnectionPanel.get_connection_statistics-591"><a href="#ConnectionPanel.get_connection_statistics-591"><span class="linenos">591</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get connection statistics.</p>

<p>Returns:
    Dictionary of connection statistics</p>
</div>


                            </div>
                            <div id="ConnectionPanel.get_api_key_statistics" class="classattr">
                                        <input id="ConnectionPanel.get_api_key_statistics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_api_key_statistics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.get_api_key_statistics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.get_api_key_statistics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.get_api_key_statistics-593"><a href="#ConnectionPanel.get_api_key_statistics-593"><span class="linenos">593</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_api_key_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ConnectionPanel.get_api_key_statistics-594"><a href="#ConnectionPanel.get_api_key_statistics-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get API key statistics.</span>
</span><span id="ConnectionPanel.get_api_key_statistics-595"><a href="#ConnectionPanel.get_api_key_statistics-595"><span class="linenos">595</span></a>
</span><span id="ConnectionPanel.get_api_key_statistics-596"><a href="#ConnectionPanel.get_api_key_statistics-596"><span class="linenos">596</span></a><span class="sd">        Returns:</span>
</span><span id="ConnectionPanel.get_api_key_statistics-597"><a href="#ConnectionPanel.get_api_key_statistics-597"><span class="linenos">597</span></a><span class="sd">            Dictionary of API key statistics</span>
</span><span id="ConnectionPanel.get_api_key_statistics-598"><a href="#ConnectionPanel.get_api_key_statistics-598"><span class="linenos">598</span></a>
</span><span id="ConnectionPanel.get_api_key_statistics-599"><a href="#ConnectionPanel.get_api_key_statistics-599"><span class="linenos">599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.get_api_key_statistics-600"><a href="#ConnectionPanel.get_api_key_statistics-600"><span class="linenos">600</span></a>        <span class="n">total_keys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span><span class="p">)</span>
</span><span id="ConnectionPanel.get_api_key_statistics-601"><a href="#ConnectionPanel.get_api_key_statistics-601"><span class="linenos">601</span></a>        <span class="n">active_keys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_keys</span> <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active_sessions&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="ConnectionPanel.get_api_key_statistics-602"><a href="#ConnectionPanel.get_api_key_statistics-602"><span class="linenos">602</span></a>
</span><span id="ConnectionPanel.get_api_key_statistics-603"><a href="#ConnectionPanel.get_api_key_statistics-603"><span class="linenos">603</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ConnectionPanel.get_api_key_statistics-604"><a href="#ConnectionPanel.get_api_key_statistics-604"><span class="linenos">604</span></a>            <span class="s2">&quot;total_api_keys&quot;</span><span class="p">:</span> <span class="n">total_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_api_key_statistics-605"><a href="#ConnectionPanel.get_api_key_statistics-605"><span class="linenos">605</span></a>            <span class="s2">&quot;active_api_keys&quot;</span><span class="p">:</span> <span class="n">active_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_api_key_statistics-606"><a href="#ConnectionPanel.get_api_key_statistics-606"><span class="linenos">606</span></a>            <span class="s2">&quot;inactive_api_keys&quot;</span><span class="p">:</span> <span class="n">total_keys</span> <span class="o">-</span> <span class="n">active_keys</span><span class="p">,</span>
</span><span id="ConnectionPanel.get_api_key_statistics-607"><a href="#ConnectionPanel.get_api_key_statistics-607"><span class="linenos">607</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get API key statistics.</p>

<p>Returns:
    Dictionary of API key statistics</p>
</div>


                            </div>
                            <div id="ConnectionPanel.cleanup" class="classattr">
                                        <input id="ConnectionPanel.cleanup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cleanup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.cleanup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.cleanup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.cleanup-609"><a href="#ConnectionPanel.cleanup-609"><span class="linenos">609</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.cleanup-610"><a href="#ConnectionPanel.cleanup-610"><span class="linenos">610</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cleanup resources when panel is destroyed.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.cleanup-611"><a href="#ConnectionPanel.cleanup-611"><span class="linenos">611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_auto_refresh</span><span class="p">()</span>
</span><span id="ConnectionPanel.cleanup-612"><a href="#ConnectionPanel.cleanup-612"><span class="linenos">612</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection panel cleaned up&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Cleanup resources when panel is destroyed.</p>
</div>


                            </div>
                            <div id="ConnectionPanel.on_unmount" class="classattr">
                                        <input id="ConnectionPanel.on_unmount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_unmount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ConnectionPanel.on_unmount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConnectionPanel.on_unmount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConnectionPanel.on_unmount-614"><a href="#ConnectionPanel.on_unmount-614"><span class="linenos">614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ConnectionPanel.on_unmount-615"><a href="#ConnectionPanel.on_unmount-615"><span class="linenos">615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel unmount event.&quot;&quot;&quot;</span>
</span><span id="ConnectionPanel.on_unmount-616"><a href="#ConnectionPanel.on_unmount-616"><span class="linenos">616</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle panel unmount event.</p>
</div>


                            </div>
                            <div id="ConnectionPanel.can_focus" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus</span><span class="annotation">: bool</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.can_focus"></a>
    
            <div class="docstring"><p>Widget may receive focus.</p>
</div>


                            </div>
                            <div id="ConnectionPanel.can_focus_children" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus_children</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#ConnectionPanel.can_focus_children"></a>
    
            <div class="docstring"><p>Widget's children may receive focus.</p>
</div>


                            </div>
                </section>
                <section id="DShieldTUIApp">
                            <input id="DShieldTUIApp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DShieldTUIApp</span><wbr>(<span class="base">typing.Generic[~ReturnType]</span>, <span class="base">textual.dom.DOMNode</span>):

                <label class="view-source-button" for="DShieldTUIApp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp-85"><a href="#DShieldTUIApp-85"><span class="linenos"> 85</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DShieldTUIApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
</span><span id="DShieldTUIApp-86"><a href="#DShieldTUIApp-86"><span class="linenos"> 86</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main TUI application for DShield MCP Server.</span>
</span><span id="DShieldTUIApp-87"><a href="#DShieldTUIApp-87"><span class="linenos"> 87</span></a>
</span><span id="DShieldTUIApp-88"><a href="#DShieldTUIApp-88"><span class="linenos"> 88</span></a><span class="sd">    This class provides the main terminal user interface with panels for</span>
</span><span id="DShieldTUIApp-89"><a href="#DShieldTUIApp-89"><span class="linenos"> 89</span></a><span class="sd">    connection management, server control, and log monitoring.</span>
</span><span id="DShieldTUIApp-90"><a href="#DShieldTUIApp-90"><span class="linenos"> 90</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-91"><a href="#DShieldTUIApp-91"><span class="linenos"> 91</span></a>
</span><span id="DShieldTUIApp-92"><a href="#DShieldTUIApp-92"><span class="linenos"> 92</span></a>    <span class="n">CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-93"><a href="#DShieldTUIApp-93"><span class="linenos"> 93</span></a><span class="s2">    Screen {</span>
</span><span id="DShieldTUIApp-94"><a href="#DShieldTUIApp-94"><span class="linenos"> 94</span></a><span class="s2">        layout: vertical;</span>
</span><span id="DShieldTUIApp-95"><a href="#DShieldTUIApp-95"><span class="linenos"> 95</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-96"><a href="#DShieldTUIApp-96"><span class="linenos"> 96</span></a>
</span><span id="DShieldTUIApp-97"><a href="#DShieldTUIApp-97"><span class="linenos"> 97</span></a><span class="s2">    #main-container {</span>
</span><span id="DShieldTUIApp-98"><a href="#DShieldTUIApp-98"><span class="linenos"> 98</span></a><span class="s2">        layout: horizontal;</span>
</span><span id="DShieldTUIApp-99"><a href="#DShieldTUIApp-99"><span class="linenos"> 99</span></a><span class="s2">        height: 1fr;</span>
</span><span id="DShieldTUIApp-100"><a href="#DShieldTUIApp-100"><span class="linenos">100</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-101"><a href="#DShieldTUIApp-101"><span class="linenos">101</span></a>
</span><span id="DShieldTUIApp-102"><a href="#DShieldTUIApp-102"><span class="linenos">102</span></a><span class="s2">    #left-panel {</span>
</span><span id="DShieldTUIApp-103"><a href="#DShieldTUIApp-103"><span class="linenos">103</span></a><span class="s2">        width: 1fr;</span>
</span><span id="DShieldTUIApp-104"><a href="#DShieldTUIApp-104"><span class="linenos">104</span></a><span class="s2">        layout: vertical;</span>
</span><span id="DShieldTUIApp-105"><a href="#DShieldTUIApp-105"><span class="linenos">105</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-106"><a href="#DShieldTUIApp-106"><span class="linenos">106</span></a>
</span><span id="DShieldTUIApp-107"><a href="#DShieldTUIApp-107"><span class="linenos">107</span></a><span class="s2">    #right-panel {</span>
</span><span id="DShieldTUIApp-108"><a href="#DShieldTUIApp-108"><span class="linenos">108</span></a><span class="s2">        width: 1fr;</span>
</span><span id="DShieldTUIApp-109"><a href="#DShieldTUIApp-109"><span class="linenos">109</span></a><span class="s2">        layout: vertical;</span>
</span><span id="DShieldTUIApp-110"><a href="#DShieldTUIApp-110"><span class="linenos">110</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-111"><a href="#DShieldTUIApp-111"><span class="linenos">111</span></a>
</span><span id="DShieldTUIApp-112"><a href="#DShieldTUIApp-112"><span class="linenos">112</span></a><span class="s2">    .panel {</span>
</span><span id="DShieldTUIApp-113"><a href="#DShieldTUIApp-113"><span class="linenos">113</span></a><span class="s2">        border: solid $primary;</span>
</span><span id="DShieldTUIApp-114"><a href="#DShieldTUIApp-114"><span class="linenos">114</span></a><span class="s2">        margin: 1;</span>
</span><span id="DShieldTUIApp-115"><a href="#DShieldTUIApp-115"><span class="linenos">115</span></a><span class="s2">        padding: 1;</span>
</span><span id="DShieldTUIApp-116"><a href="#DShieldTUIApp-116"><span class="linenos">116</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-117"><a href="#DShieldTUIApp-117"><span class="linenos">117</span></a>
</span><span id="DShieldTUIApp-118"><a href="#DShieldTUIApp-118"><span class="linenos">118</span></a><span class="s2">    .connection-item {</span>
</span><span id="DShieldTUIApp-119"><a href="#DShieldTUIApp-119"><span class="linenos">119</span></a><span class="s2">        margin: 1;</span>
</span><span id="DShieldTUIApp-120"><a href="#DShieldTUIApp-120"><span class="linenos">120</span></a><span class="s2">        padding: 1;</span>
</span><span id="DShieldTUIApp-121"><a href="#DShieldTUIApp-121"><span class="linenos">121</span></a><span class="s2">        border: solid $secondary;</span>
</span><span id="DShieldTUIApp-122"><a href="#DShieldTUIApp-122"><span class="linenos">122</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-123"><a href="#DShieldTUIApp-123"><span class="linenos">123</span></a>
</span><span id="DShieldTUIApp-124"><a href="#DShieldTUIApp-124"><span class="linenos">124</span></a><span class="s2">    .server-controls {</span>
</span><span id="DShieldTUIApp-125"><a href="#DShieldTUIApp-125"><span class="linenos">125</span></a><span class="s2">        layout: horizontal;</span>
</span><span id="DShieldTUIApp-126"><a href="#DShieldTUIApp-126"><span class="linenos">126</span></a><span class="s2">        height: auto;</span>
</span><span id="DShieldTUIApp-127"><a href="#DShieldTUIApp-127"><span class="linenos">127</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-128"><a href="#DShieldTUIApp-128"><span class="linenos">128</span></a>
</span><span id="DShieldTUIApp-129"><a href="#DShieldTUIApp-129"><span class="linenos">129</span></a><span class="s2">    .log-entry {</span>
</span><span id="DShieldTUIApp-130"><a href="#DShieldTUIApp-130"><span class="linenos">130</span></a><span class="s2">        margin: 1;</span>
</span><span id="DShieldTUIApp-131"><a href="#DShieldTUIApp-131"><span class="linenos">131</span></a><span class="s2">        padding: 1;</span>
</span><span id="DShieldTUIApp-132"><a href="#DShieldTUIApp-132"><span class="linenos">132</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-133"><a href="#DShieldTUIApp-133"><span class="linenos">133</span></a>
</span><span id="DShieldTUIApp-134"><a href="#DShieldTUIApp-134"><span class="linenos">134</span></a><span class="s2">    .log-entry.error {</span>
</span><span id="DShieldTUIApp-135"><a href="#DShieldTUIApp-135"><span class="linenos">135</span></a><span class="s2">        color: $error;</span>
</span><span id="DShieldTUIApp-136"><a href="#DShieldTUIApp-136"><span class="linenos">136</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-137"><a href="#DShieldTUIApp-137"><span class="linenos">137</span></a>
</span><span id="DShieldTUIApp-138"><a href="#DShieldTUIApp-138"><span class="linenos">138</span></a><span class="s2">    .log-entry.warning {</span>
</span><span id="DShieldTUIApp-139"><a href="#DShieldTUIApp-139"><span class="linenos">139</span></a><span class="s2">        color: $warning;</span>
</span><span id="DShieldTUIApp-140"><a href="#DShieldTUIApp-140"><span class="linenos">140</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-141"><a href="#DShieldTUIApp-141"><span class="linenos">141</span></a>
</span><span id="DShieldTUIApp-142"><a href="#DShieldTUIApp-142"><span class="linenos">142</span></a><span class="s2">    .log-entry.info {</span>
</span><span id="DShieldTUIApp-143"><a href="#DShieldTUIApp-143"><span class="linenos">143</span></a><span class="s2">        color: $accent;</span>
</span><span id="DShieldTUIApp-144"><a href="#DShieldTUIApp-144"><span class="linenos">144</span></a><span class="s2">    }</span>
</span><span id="DShieldTUIApp-145"><a href="#DShieldTUIApp-145"><span class="linenos">145</span></a><span class="s2">    &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-146"><a href="#DShieldTUIApp-146"><span class="linenos">146</span></a>
</span><span id="DShieldTUIApp-147"><a href="#DShieldTUIApp-147"><span class="linenos">147</span></a>    <span class="n">BINDINGS</span><span class="p">:</span> <span class="n">ClassVar</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="DShieldTUIApp-148"><a href="#DShieldTUIApp-148"><span class="linenos">148</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="s2">&quot;quit&quot;</span><span class="p">,</span> <span class="s2">&quot;Quit&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-149"><a href="#DShieldTUIApp-149"><span class="linenos">149</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;restart_server&quot;</span><span class="p">,</span> <span class="s2">&quot;Restart Server&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-150"><a href="#DShieldTUIApp-150"><span class="linenos">150</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;stop_server&quot;</span><span class="p">,</span> <span class="s2">&quot;Stop Server&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-151"><a href="#DShieldTUIApp-151"><span class="linenos">151</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;generate_api_key&quot;</span><span class="p">,</span> <span class="s2">&quot;Generate API Key&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-152"><a href="#DShieldTUIApp-152"><span class="linenos">152</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;clear_logs&quot;</span><span class="p">,</span> <span class="s2">&quot;Clear Logs&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-153"><a href="#DShieldTUIApp-153"><span class="linenos">153</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;test_log&quot;</span><span class="p">,</span> <span class="s2">&quot;Test Log&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-154"><a href="#DShieldTUIApp-154"><span class="linenos">154</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;focus_filter&quot;</span><span class="p">,</span> <span class="s2">&quot;Focus Filter&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-155"><a href="#DShieldTUIApp-155"><span class="linenos">155</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;show_help&quot;</span><span class="p">,</span> <span class="s2">&quot;Help&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-156"><a href="#DShieldTUIApp-156"><span class="linenos">156</span></a>        <span class="n">Binding</span><span class="p">(</span><span class="s2">&quot;tab&quot;</span><span class="p">,</span> <span class="s2">&quot;switch_panel&quot;</span><span class="p">,</span> <span class="s2">&quot;Switch Panel&quot;</span><span class="p">),</span>
</span><span id="DShieldTUIApp-157"><a href="#DShieldTUIApp-157"><span class="linenos">157</span></a>    <span class="p">]</span>
</span><span id="DShieldTUIApp-158"><a href="#DShieldTUIApp-158"><span class="linenos">158</span></a>
</span><span id="DShieldTUIApp-159"><a href="#DShieldTUIApp-159"><span class="linenos">159</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-160"><a href="#DShieldTUIApp-160"><span class="linenos">160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the TUI application.</span>
</span><span id="DShieldTUIApp-161"><a href="#DShieldTUIApp-161"><span class="linenos">161</span></a>
</span><span id="DShieldTUIApp-162"><a href="#DShieldTUIApp-162"><span class="linenos">162</span></a><span class="sd">        Args:</span>
</span><span id="DShieldTUIApp-163"><a href="#DShieldTUIApp-163"><span class="linenos">163</span></a><span class="sd">            config_path: Optional path to configuration file</span>
</span><span id="DShieldTUIApp-164"><a href="#DShieldTUIApp-164"><span class="linenos">164</span></a>
</span><span id="DShieldTUIApp-165"><a href="#DShieldTUIApp-165"><span class="linenos">165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-166"><a href="#DShieldTUIApp-166"><span class="linenos">166</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="DShieldTUIApp-167"><a href="#DShieldTUIApp-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="n">config_path</span>
</span><span id="DShieldTUIApp-168"><a href="#DShieldTUIApp-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span> <span class="o">=</span> <span class="n">UserConfigManager</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="DShieldTUIApp-169"><a href="#DShieldTUIApp-169"><span class="linenos">169</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-170"><a href="#DShieldTUIApp-170"><span class="linenos">170</span></a>
</span><span id="DShieldTUIApp-171"><a href="#DShieldTUIApp-171"><span class="linenos">171</span></a>        <span class="c1"># Server components</span>
</span><span id="DShieldTUIApp-172"><a href="#DShieldTUIApp-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">:</span> <span class="n">EnhancedTCPServer</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-173"><a href="#DShieldTUIApp-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_process</span><span class="p">:</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-174"><a href="#DShieldTUIApp-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-175"><a href="#DShieldTUIApp-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="DShieldTUIApp-176"><a href="#DShieldTUIApp-176"><span class="linenos">176</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_port</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
</span><span id="DShieldTUIApp-177"><a href="#DShieldTUIApp-177"><span class="linenos">177</span></a>
</span><span id="DShieldTUIApp-178"><a href="#DShieldTUIApp-178"><span class="linenos">178</span></a>        <span class="c1"># UI state</span>
</span><span id="DShieldTUIApp-179"><a href="#DShieldTUIApp-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mounted</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="DShieldTUIApp-180"><a href="#DShieldTUIApp-180"><span class="linenos">180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_address</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">bind_address</span><span class="p">)</span>
</span><span id="DShieldTUIApp-181"><a href="#DShieldTUIApp-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="DShieldTUIApp-182"><a href="#DShieldTUIApp-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-183"><a href="#DShieldTUIApp-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-184"><a href="#DShieldTUIApp-184"><span class="linenos">184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="DShieldTUIApp-185"><a href="#DShieldTUIApp-185"><span class="linenos">185</span></a>
</span><span id="DShieldTUIApp-186"><a href="#DShieldTUIApp-186"><span class="linenos">186</span></a>        <span class="c1"># Metrics system</span>
</span><span id="DShieldTUIApp-187"><a href="#DShieldTUIApp-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="p">:</span> <span class="n">MetricsSubscriber</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-188"><a href="#DShieldTUIApp-188"><span class="linenos">188</span></a>
</span><span id="DShieldTUIApp-189"><a href="#DShieldTUIApp-189"><span class="linenos">189</span></a>        <span class="c1"># Update tasks</span>
</span><span id="DShieldTUIApp-190"><a href="#DShieldTUIApp-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-191"><a href="#DShieldTUIApp-191"><span class="linenos">191</span></a>
</span><span id="DShieldTUIApp-192"><a href="#DShieldTUIApp-192"><span class="linenos">192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="DShieldTUIApp-193"><a href="#DShieldTUIApp-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the TUI layout.</span>
</span><span id="DShieldTUIApp-194"><a href="#DShieldTUIApp-194"><span class="linenos">194</span></a>
</span><span id="DShieldTUIApp-195"><a href="#DShieldTUIApp-195"><span class="linenos">195</span></a><span class="sd">        Returns:</span>
</span><span id="DShieldTUIApp-196"><a href="#DShieldTUIApp-196"><span class="linenos">196</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="DShieldTUIApp-197"><a href="#DShieldTUIApp-197"><span class="linenos">197</span></a>
</span><span id="DShieldTUIApp-198"><a href="#DShieldTUIApp-198"><span class="linenos">198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-199"><a href="#DShieldTUIApp-199"><span class="linenos">199</span></a>        <span class="k">yield</span> <span class="n">Header</span><span class="p">()</span>
</span><span id="DShieldTUIApp-200"><a href="#DShieldTUIApp-200"><span class="linenos">200</span></a>
</span><span id="DShieldTUIApp-201"><a href="#DShieldTUIApp-201"><span class="linenos">201</span></a>        <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;main-container&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp-202"><a href="#DShieldTUIApp-202"><span class="linenos">202</span></a>            <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;left-panel&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp-203"><a href="#DShieldTUIApp-203"><span class="linenos">203</span></a>                <span class="k">yield</span> <span class="n">ConnectionPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connection-panel&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-204"><a href="#DShieldTUIApp-204"><span class="linenos">204</span></a>                <span class="k">yield</span> <span class="n">ServerPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-panel&quot;</span><span class="p">,</span> <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="DShieldTUIApp-205"><a href="#DShieldTUIApp-205"><span class="linenos">205</span></a>
</span><span id="DShieldTUIApp-206"><a href="#DShieldTUIApp-206"><span class="linenos">206</span></a>            <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;right-panel&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp-207"><a href="#DShieldTUIApp-207"><span class="linenos">207</span></a>                <span class="k">yield</span> <span class="n">LiveMetricsPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;live-metrics-panel&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-208"><a href="#DShieldTUIApp-208"><span class="linenos">208</span></a>                <span class="k">yield</span> <span class="n">LogPanel</span><span class="p">(</span>
</span><span id="DShieldTUIApp-209"><a href="#DShieldTUIApp-209"><span class="linenos">209</span></a>                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;log-panel&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">log_history_size</span>
</span><span id="DShieldTUIApp-210"><a href="#DShieldTUIApp-210"><span class="linenos">210</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-211"><a href="#DShieldTUIApp-211"><span class="linenos">211</span></a>
</span><span id="DShieldTUIApp-212"><a href="#DShieldTUIApp-212"><span class="linenos">212</span></a>        <span class="k">yield</span> <span class="n">StatusBar</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;status-bar&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-213"><a href="#DShieldTUIApp-213"><span class="linenos">213</span></a>        <span class="k">yield</span> <span class="n">Footer</span><span class="p">()</span>
</span><span id="DShieldTUIApp-214"><a href="#DShieldTUIApp-214"><span class="linenos">214</span></a>
</span><span id="DShieldTUIApp-215"><a href="#DShieldTUIApp-215"><span class="linenos">215</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-216"><a href="#DShieldTUIApp-216"><span class="linenos">216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle application mount event.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-217"><a href="#DShieldTUIApp-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TUI application mounted&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-218"><a href="#DShieldTUIApp-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;DShield MCP Server Manager&quot;</span>
</span><span id="DShieldTUIApp-219"><a href="#DShieldTUIApp-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="DShieldTUIApp-220"><a href="#DShieldTUIApp-220"><span class="linenos">220</span></a>
</span><span id="DShieldTUIApp-221"><a href="#DShieldTUIApp-221"><span class="linenos">221</span></a>        <span class="c1"># Mark UI as mounted</span>
</span><span id="DShieldTUIApp-222"><a href="#DShieldTUIApp-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mounted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="DShieldTUIApp-223"><a href="#DShieldTUIApp-223"><span class="linenos">223</span></a>
</span><span id="DShieldTUIApp-224"><a href="#DShieldTUIApp-224"><span class="linenos">224</span></a>        <span class="c1"># Initialize metrics subscriber</span>
</span><span id="DShieldTUIApp-225"><a href="#DShieldTUIApp-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_metrics_subscriber</span><span class="p">()</span>
</span><span id="DShieldTUIApp-226"><a href="#DShieldTUIApp-226"><span class="linenos">226</span></a>
</span><span id="DShieldTUIApp-227"><a href="#DShieldTUIApp-227"><span class="linenos">227</span></a>        <span class="c1"># Start update task in a separate thread</span>
</span><span id="DShieldTUIApp-228"><a href="#DShieldTUIApp-228"><span class="linenos">228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_periodic_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="DShieldTUIApp-229"><a href="#DShieldTUIApp-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="DShieldTUIApp-230"><a href="#DShieldTUIApp-230"><span class="linenos">230</span></a>
</span><span id="DShieldTUIApp-231"><a href="#DShieldTUIApp-231"><span class="linenos">231</span></a>        <span class="c1"># Auto-start server if configured</span>
</span><span id="DShieldTUIApp-232"><a href="#DShieldTUIApp-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">server_management</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;auto_start_server&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="DShieldTUIApp-233"><a href="#DShieldTUIApp-233"><span class="linenos">233</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_restart_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-234"><a href="#DShieldTUIApp-234"><span class="linenos">234</span></a>
</span><span id="DShieldTUIApp-235"><a href="#DShieldTUIApp-235"><span class="linenos">235</span></a>        <span class="c1"># Add a test log entry to verify log panel is working</span>
</span><span id="DShieldTUIApp-236"><a href="#DShieldTUIApp-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;TUI application started successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-237"><a href="#DShieldTUIApp-237"><span class="linenos">237</span></a>
</span><span id="DShieldTUIApp-238"><a href="#DShieldTUIApp-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-239"><a href="#DShieldTUIApp-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle application unmount event.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-240"><a href="#DShieldTUIApp-240"><span class="linenos">240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TUI application unmounting&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-241"><a href="#DShieldTUIApp-241"><span class="linenos">241</span></a>
</span><span id="DShieldTUIApp-242"><a href="#DShieldTUIApp-242"><span class="linenos">242</span></a>        <span class="c1"># Stop metrics subscriber</span>
</span><span id="DShieldTUIApp-243"><a href="#DShieldTUIApp-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="p">:</span>
</span><span id="DShieldTUIApp-244"><a href="#DShieldTUIApp-244"><span class="linenos">244</span></a>            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="o">.</span><span class="n">stop</span><span class="p">())</span>
</span><span id="DShieldTUIApp-245"><a href="#DShieldTUIApp-245"><span class="linenos">245</span></a>
</span><span id="DShieldTUIApp-246"><a href="#DShieldTUIApp-246"><span class="linenos">246</span></a>        <span class="c1"># Stop update task</span>
</span><span id="DShieldTUIApp-247"><a href="#DShieldTUIApp-247"><span class="linenos">247</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="DShieldTUIApp-248"><a href="#DShieldTUIApp-248"><span class="linenos">248</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span>
</span><span id="DShieldTUIApp-249"><a href="#DShieldTUIApp-249"><span class="linenos">249</span></a>            <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="p">,</span> <span class="s2">&quot;is_alive&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-250"><a href="#DShieldTUIApp-250"><span class="linenos">250</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="o">.</span><span class="n">is_alive</span><span class="p">()</span>
</span><span id="DShieldTUIApp-251"><a href="#DShieldTUIApp-251"><span class="linenos">251</span></a>        <span class="p">):</span>
</span><span id="DShieldTUIApp-252"><a href="#DShieldTUIApp-252"><span class="linenos">252</span></a>            <span class="c1"># The thread will stop when the daemon process exits</span>
</span><span id="DShieldTUIApp-253"><a href="#DShieldTUIApp-253"><span class="linenos">253</span></a>            <span class="k">pass</span>
</span><span id="DShieldTUIApp-254"><a href="#DShieldTUIApp-254"><span class="linenos">254</span></a>
</span><span id="DShieldTUIApp-255"><a href="#DShieldTUIApp-255"><span class="linenos">255</span></a>        <span class="c1"># Stop server</span>
</span><span id="DShieldTUIApp-256"><a href="#DShieldTUIApp-256"><span class="linenos">256</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-257"><a href="#DShieldTUIApp-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_stop_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-258"><a href="#DShieldTUIApp-258"><span class="linenos">258</span></a>
</span><span id="DShieldTUIApp-259"><a href="#DShieldTUIApp-259"><span class="linenos">259</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_initialize_metrics_subscriber</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-260"><a href="#DShieldTUIApp-260"><span class="linenos">260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the metrics subscriber system.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-261"><a href="#DShieldTUIApp-261"><span class="linenos">261</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-262"><a href="#DShieldTUIApp-262"><span class="linenos">262</span></a>            <span class="c1"># Create metrics subscriber</span>
</span><span id="DShieldTUIApp-263"><a href="#DShieldTUIApp-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span> <span class="o">=</span> <span class="n">MetricsSubscriber</span><span class="p">(</span>
</span><span id="DShieldTUIApp-264"><a href="#DShieldTUIApp-264"><span class="linenos">264</span></a>                <span class="n">update_interval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># Update every second</span>
</span><span id="DShieldTUIApp-265"><a href="#DShieldTUIApp-265"><span class="linenos">265</span></a>                <span class="n">max_subscribers</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="DShieldTUIApp-266"><a href="#DShieldTUIApp-266"><span class="linenos">266</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-267"><a href="#DShieldTUIApp-267"><span class="linenos">267</span></a>
</span><span id="DShieldTUIApp-268"><a href="#DShieldTUIApp-268"><span class="linenos">268</span></a>            <span class="c1"># Set metrics collector function</span>
</span><span id="DShieldTUIApp-269"><a href="#DShieldTUIApp-269"><span class="linenos">269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="o">.</span><span class="n">set_metrics_collector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collect_server_metrics</span><span class="p">)</span>
</span><span id="DShieldTUIApp-270"><a href="#DShieldTUIApp-270"><span class="linenos">270</span></a>
</span><span id="DShieldTUIApp-271"><a href="#DShieldTUIApp-271"><span class="linenos">271</span></a>            <span class="c1"># Start the subscriber</span>
</span><span id="DShieldTUIApp-272"><a href="#DShieldTUIApp-272"><span class="linenos">272</span></a>            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
</span><span id="DShieldTUIApp-273"><a href="#DShieldTUIApp-273"><span class="linenos">273</span></a>
</span><span id="DShieldTUIApp-274"><a href="#DShieldTUIApp-274"><span class="linenos">274</span></a>            <span class="c1"># Connect to live metrics panel</span>
</span><span id="DShieldTUIApp-275"><a href="#DShieldTUIApp-275"><span class="linenos">275</span></a>            <span class="n">live_metrics_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#live-metrics-panel&quot;</span><span class="p">,</span> <span class="n">LiveMetricsPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-276"><a href="#DShieldTUIApp-276"><span class="linenos">276</span></a>            <span class="n">live_metrics_panel</span><span class="o">.</span><span class="n">set_metrics_subscriber</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="p">)</span>
</span><span id="DShieldTUIApp-277"><a href="#DShieldTUIApp-277"><span class="linenos">277</span></a>
</span><span id="DShieldTUIApp-278"><a href="#DShieldTUIApp-278"><span class="linenos">278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Metrics subscriber initialized successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-279"><a href="#DShieldTUIApp-279"><span class="linenos">279</span></a>
</span><span id="DShieldTUIApp-280"><a href="#DShieldTUIApp-280"><span class="linenos">280</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-281"><a href="#DShieldTUIApp-281"><span class="linenos">281</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to initialize metrics subscriber&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-282"><a href="#DShieldTUIApp-282"><span class="linenos">282</span></a>
</span><span id="DShieldTUIApp-283"><a href="#DShieldTUIApp-283"><span class="linenos">283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_collect_server_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="DShieldTUIApp-284"><a href="#DShieldTUIApp-284"><span class="linenos">284</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect server metrics for the metrics subscriber.</span>
</span><span id="DShieldTUIApp-285"><a href="#DShieldTUIApp-285"><span class="linenos">285</span></a>
</span><span id="DShieldTUIApp-286"><a href="#DShieldTUIApp-286"><span class="linenos">286</span></a><span class="sd">        Returns:</span>
</span><span id="DShieldTUIApp-287"><a href="#DShieldTUIApp-287"><span class="linenos">287</span></a><span class="sd">            Dictionary of raw server metrics</span>
</span><span id="DShieldTUIApp-288"><a href="#DShieldTUIApp-288"><span class="linenos">288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-289"><a href="#DShieldTUIApp-289"><span class="linenos">289</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-290"><a href="#DShieldTUIApp-290"><span class="linenos">290</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">:</span>
</span><span id="DShieldTUIApp-291"><a href="#DShieldTUIApp-291"><span class="linenos">291</span></a>                <span class="k">return</span> <span class="p">{}</span>
</span><span id="DShieldTUIApp-292"><a href="#DShieldTUIApp-292"><span class="linenos">292</span></a>
</span><span id="DShieldTUIApp-293"><a href="#DShieldTUIApp-293"><span class="linenos">293</span></a>            <span class="c1"># Get server statistics</span>
</span><span id="DShieldTUIApp-294"><a href="#DShieldTUIApp-294"><span class="linenos">294</span></a>            <span class="n">server_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">get_server_statistics</span><span class="p">()</span>
</span><span id="DShieldTUIApp-295"><a href="#DShieldTUIApp-295"><span class="linenos">295</span></a>
</span><span id="DShieldTUIApp-296"><a href="#DShieldTUIApp-296"><span class="linenos">296</span></a>            <span class="c1"># Enhance with additional metrics</span>
</span><span id="DShieldTUIApp-297"><a href="#DShieldTUIApp-297"><span class="linenos">297</span></a>            <span class="n">enhanced_stats</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-298"><a href="#DShieldTUIApp-298"><span class="linenos">298</span></a>                <span class="o">**</span><span class="n">server_stats</span><span class="p">,</span>
</span><span id="DShieldTUIApp-299"><a href="#DShieldTUIApp-299"><span class="linenos">299</span></a>                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="DShieldTUIApp-300"><a href="#DShieldTUIApp-300"><span class="linenos">300</span></a>                <span class="s2">&quot;tui_state&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-301"><a href="#DShieldTUIApp-301"><span class="linenos">301</span></a>                    <span class="s2">&quot;mounted&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mounted</span><span class="p">,</span>
</span><span id="DShieldTUIApp-302"><a href="#DShieldTUIApp-302"><span class="linenos">302</span></a>                    <span class="s2">&quot;server_running&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">,</span>
</span><span id="DShieldTUIApp-303"><a href="#DShieldTUIApp-303"><span class="linenos">303</span></a>                    <span class="s2">&quot;connection_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">),</span>
</span><span id="DShieldTUIApp-304"><a href="#DShieldTUIApp-304"><span class="linenos">304</span></a>                    <span class="s2">&quot;log_entries_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_entries</span><span class="p">),</span>
</span><span id="DShieldTUIApp-305"><a href="#DShieldTUIApp-305"><span class="linenos">305</span></a>                <span class="p">},</span>
</span><span id="DShieldTUIApp-306"><a href="#DShieldTUIApp-306"><span class="linenos">306</span></a>            <span class="p">}</span>
</span><span id="DShieldTUIApp-307"><a href="#DShieldTUIApp-307"><span class="linenos">307</span></a>
</span><span id="DShieldTUIApp-308"><a href="#DShieldTUIApp-308"><span class="linenos">308</span></a>            <span class="k">return</span> <span class="n">enhanced_stats</span>
</span><span id="DShieldTUIApp-309"><a href="#DShieldTUIApp-309"><span class="linenos">309</span></a>
</span><span id="DShieldTUIApp-310"><a href="#DShieldTUIApp-310"><span class="linenos">310</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-311"><a href="#DShieldTUIApp-311"><span class="linenos">311</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error collecting server metrics&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-312"><a href="#DShieldTUIApp-312"><span class="linenos">312</span></a>            <span class="k">return</span> <span class="p">{}</span>
</span><span id="DShieldTUIApp-313"><a href="#DShieldTUIApp-313"><span class="linenos">313</span></a>
</span><span id="DShieldTUIApp-314"><a href="#DShieldTUIApp-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_periodic_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-315"><a href="#DShieldTUIApp-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Periodic update task for refreshing UI data.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-316"><a href="#DShieldTUIApp-316"><span class="linenos">316</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="DShieldTUIApp-317"><a href="#DShieldTUIApp-317"><span class="linenos">317</span></a>
</span><span id="DShieldTUIApp-318"><a href="#DShieldTUIApp-318"><span class="linenos">318</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="DShieldTUIApp-319"><a href="#DShieldTUIApp-319"><span class="linenos">319</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-320"><a href="#DShieldTUIApp-320"><span class="linenos">320</span></a>                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">refresh_interval_ms</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="DShieldTUIApp-321"><a href="#DShieldTUIApp-321"><span class="linenos">321</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_update_ui_data</span><span class="p">()</span>
</span><span id="DShieldTUIApp-322"><a href="#DShieldTUIApp-322"><span class="linenos">322</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-323"><a href="#DShieldTUIApp-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error in periodic update&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-324"><a href="#DShieldTUIApp-324"><span class="linenos">324</span></a>
</span><span id="DShieldTUIApp-325"><a href="#DShieldTUIApp-325"><span class="linenos">325</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_ui_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-326"><a href="#DShieldTUIApp-326"><span class="linenos">326</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update UI data from server components.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-327"><a href="#DShieldTUIApp-327"><span class="linenos">327</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-328"><a href="#DShieldTUIApp-328"><span class="linenos">328</span></a>            <span class="c1"># Check if the UI is mounted before trying to update panels</span>
</span><span id="DShieldTUIApp-329"><a href="#DShieldTUIApp-329"><span class="linenos">329</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_mounted&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mounted</span><span class="p">:</span>
</span><span id="DShieldTUIApp-330"><a href="#DShieldTUIApp-330"><span class="linenos">330</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;UI not mounted yet, skipping update&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-331"><a href="#DShieldTUIApp-331"><span class="linenos">331</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-332"><a href="#DShieldTUIApp-332"><span class="linenos">332</span></a>
</span><span id="DShieldTUIApp-333"><a href="#DShieldTUIApp-333"><span class="linenos">333</span></a>            <span class="c1"># Update server status</span>
</span><span id="DShieldTUIApp-334"><a href="#DShieldTUIApp-334"><span class="linenos">334</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">:</span>
</span><span id="DShieldTUIApp-335"><a href="#DShieldTUIApp-335"><span class="linenos">335</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">get_server_statistics</span><span class="p">()</span>
</span><span id="DShieldTUIApp-336"><a href="#DShieldTUIApp-336"><span class="linenos">336</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ServerStatusUpdate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">))</span>
</span><span id="DShieldTUIApp-337"><a href="#DShieldTUIApp-337"><span class="linenos">337</span></a>
</span><span id="DShieldTUIApp-338"><a href="#DShieldTUIApp-338"><span class="linenos">338</span></a>            <span class="c1"># Update connections</span>
</span><span id="DShieldTUIApp-339"><a href="#DShieldTUIApp-339"><span class="linenos">339</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">:</span>
</span><span id="DShieldTUIApp-340"><a href="#DShieldTUIApp-340"><span class="linenos">340</span></a>                <span class="c1"># Use get_connections_info method instead of get_all_connections</span>
</span><span id="DShieldTUIApp-341"><a href="#DShieldTUIApp-341"><span class="linenos">341</span></a>                <span class="n">connections_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">connection_manager</span><span class="o">.</span><span class="n">get_connections_info</span><span class="p">()</span>
</span><span id="DShieldTUIApp-342"><a href="#DShieldTUIApp-342"><span class="linenos">342</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">connections_info</span>
</span><span id="DShieldTUIApp-343"><a href="#DShieldTUIApp-343"><span class="linenos">343</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">ConnectionUpdate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">))</span>
</span><span id="DShieldTUIApp-344"><a href="#DShieldTUIApp-344"><span class="linenos">344</span></a>
</span><span id="DShieldTUIApp-345"><a href="#DShieldTUIApp-345"><span class="linenos">345</span></a>            <span class="c1"># Update logs (simplified for now)</span>
</span><span id="DShieldTUIApp-346"><a href="#DShieldTUIApp-346"><span class="linenos">346</span></a>            <span class="c1"># In a real implementation, this would integrate with the logging system</span>
</span><span id="DShieldTUIApp-347"><a href="#DShieldTUIApp-347"><span class="linenos">347</span></a>
</span><span id="DShieldTUIApp-348"><a href="#DShieldTUIApp-348"><span class="linenos">348</span></a>            <span class="c1"># Update server panel status</span>
</span><span id="DShieldTUIApp-349"><a href="#DShieldTUIApp-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_panel_status</span><span class="p">()</span>
</span><span id="DShieldTUIApp-350"><a href="#DShieldTUIApp-350"><span class="linenos">350</span></a>
</span><span id="DShieldTUIApp-351"><a href="#DShieldTUIApp-351"><span class="linenos">351</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-352"><a href="#DShieldTUIApp-352"><span class="linenos">352</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating UI data&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-353"><a href="#DShieldTUIApp-353"><span class="linenos">353</span></a>
</span><span id="DShieldTUIApp-354"><a href="#DShieldTUIApp-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_server_panel_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-355"><a href="#DShieldTUIApp-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the server panel status display.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-356"><a href="#DShieldTUIApp-356"><span class="linenos">356</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-357"><a href="#DShieldTUIApp-357"><span class="linenos">357</span></a>            <span class="c1"># Debug: List all available panels</span>
</span><span id="DShieldTUIApp-358"><a href="#DShieldTUIApp-358"><span class="linenos">358</span></a>            <span class="n">all_panels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ServerPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-359"><a href="#DShieldTUIApp-359"><span class="linenos">359</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="DShieldTUIApp-360"><a href="#DShieldTUIApp-360"><span class="linenos">360</span></a>                <span class="s2">&quot;Available server panels&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">all_panels</span><span class="p">),</span> <span class="n">panels</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">all_panels</span><span class="p">]</span>
</span><span id="DShieldTUIApp-361"><a href="#DShieldTUIApp-361"><span class="linenos">361</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-362"><a href="#DShieldTUIApp-362"><span class="linenos">362</span></a>
</span><span id="DShieldTUIApp-363"><a href="#DShieldTUIApp-363"><span class="linenos">363</span></a>            <span class="c1"># Get the server panel - try multiple ways to find it</span>
</span><span id="DShieldTUIApp-364"><a href="#DShieldTUIApp-364"><span class="linenos">364</span></a>            <span class="n">server_panel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-365"><a href="#DShieldTUIApp-365"><span class="linenos">365</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-366"><a href="#DShieldTUIApp-366"><span class="linenos">366</span></a>                <span class="n">server_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-panel&quot;</span><span class="p">,</span> <span class="n">ServerPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-367"><a href="#DShieldTUIApp-367"><span class="linenos">367</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found server panel by ID&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-368"><a href="#DShieldTUIApp-368"><span class="linenos">368</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-369"><a href="#DShieldTUIApp-369"><span class="linenos">369</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to find server panel by ID&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-370"><a href="#DShieldTUIApp-370"><span class="linenos">370</span></a>                <span class="c1"># Try to find it by class</span>
</span><span id="DShieldTUIApp-371"><a href="#DShieldTUIApp-371"><span class="linenos">371</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-372"><a href="#DShieldTUIApp-372"><span class="linenos">372</span></a>                    <span class="n">server_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="n">ServerPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-373"><a href="#DShieldTUIApp-373"><span class="linenos">373</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found server panel by class&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-374"><a href="#DShieldTUIApp-374"><span class="linenos">374</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e2</span><span class="p">:</span>
</span><span id="DShieldTUIApp-375"><a href="#DShieldTUIApp-375"><span class="linenos">375</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to find server panel by class&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e2</span><span class="p">))</span>
</span><span id="DShieldTUIApp-376"><a href="#DShieldTUIApp-376"><span class="linenos">376</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Server panel not found, skipping status update&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-377"><a href="#DShieldTUIApp-377"><span class="linenos">377</span></a>                    <span class="k">return</span>
</span><span id="DShieldTUIApp-378"><a href="#DShieldTUIApp-378"><span class="linenos">378</span></a>
</span><span id="DShieldTUIApp-379"><a href="#DShieldTUIApp-379"><span class="linenos">379</span></a>            <span class="k">if</span> <span class="n">server_panel</span><span class="p">:</span>
</span><span id="DShieldTUIApp-380"><a href="#DShieldTUIApp-380"><span class="linenos">380</span></a>                <span class="c1"># Update the server panel with current status</span>
</span><span id="DShieldTUIApp-381"><a href="#DShieldTUIApp-381"><span class="linenos">381</span></a>                <span class="n">server_panel</span><span class="o">.</span><span class="n">update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">)</span>
</span><span id="DShieldTUIApp-382"><a href="#DShieldTUIApp-382"><span class="linenos">382</span></a>
</span><span id="DShieldTUIApp-383"><a href="#DShieldTUIApp-383"><span class="linenos">383</span></a>                <span class="c1"># Update server statistics</span>
</span><span id="DShieldTUIApp-384"><a href="#DShieldTUIApp-384"><span class="linenos">384</span></a>                <span class="n">stats</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-385"><a href="#DShieldTUIApp-385"><span class="linenos">385</span></a>                    <span class="s2">&quot;active_connections&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="DShieldTUIApp-386"><a href="#DShieldTUIApp-386"><span class="linenos">386</span></a>                    <span class="s2">&quot;total_requests&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="DShieldTUIApp-387"><a href="#DShieldTUIApp-387"><span class="linenos">387</span></a>                    <span class="s2">&quot;error_rate&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="DShieldTUIApp-388"><a href="#DShieldTUIApp-388"><span class="linenos">388</span></a>                <span class="p">}</span>
</span><span id="DShieldTUIApp-389"><a href="#DShieldTUIApp-389"><span class="linenos">389</span></a>                <span class="n">server_panel</span><span class="o">.</span><span class="n">update_server_statistics</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span>
</span><span id="DShieldTUIApp-390"><a href="#DShieldTUIApp-390"><span class="linenos">390</span></a>
</span><span id="DShieldTUIApp-391"><a href="#DShieldTUIApp-391"><span class="linenos">391</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server panel status&quot;</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">)</span>
</span><span id="DShieldTUIApp-392"><a href="#DShieldTUIApp-392"><span class="linenos">392</span></a>
</span><span id="DShieldTUIApp-393"><a href="#DShieldTUIApp-393"><span class="linenos">393</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-394"><a href="#DShieldTUIApp-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating server panel status&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-395"><a href="#DShieldTUIApp-395"><span class="linenos">395</span></a>
</span><span id="DShieldTUIApp-396"><a href="#DShieldTUIApp-396"><span class="linenos">396</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_connection_panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-397"><a href="#DShieldTUIApp-397"><span class="linenos">397</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the connection panel with API keys and connections.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-398"><a href="#DShieldTUIApp-398"><span class="linenos">398</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-399"><a href="#DShieldTUIApp-399"><span class="linenos">399</span></a>            <span class="c1"># Get the connection panel - try multiple ways to find it</span>
</span><span id="DShieldTUIApp-400"><a href="#DShieldTUIApp-400"><span class="linenos">400</span></a>            <span class="n">connection_panel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-401"><a href="#DShieldTUIApp-401"><span class="linenos">401</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-402"><a href="#DShieldTUIApp-402"><span class="linenos">402</span></a>                <span class="n">connection_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connection-panel&quot;</span><span class="p">,</span> <span class="n">ConnectionPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-403"><a href="#DShieldTUIApp-403"><span class="linenos">403</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="DShieldTUIApp-404"><a href="#DShieldTUIApp-404"><span class="linenos">404</span></a>                <span class="c1"># Try to find it by class</span>
</span><span id="DShieldTUIApp-405"><a href="#DShieldTUIApp-405"><span class="linenos">405</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-406"><a href="#DShieldTUIApp-406"><span class="linenos">406</span></a>                    <span class="n">connection_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="n">ConnectionPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-407"><a href="#DShieldTUIApp-407"><span class="linenos">407</span></a>                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="DShieldTUIApp-408"><a href="#DShieldTUIApp-408"><span class="linenos">408</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Connection panel not found, skipping update&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-409"><a href="#DShieldTUIApp-409"><span class="linenos">409</span></a>                    <span class="k">return</span>
</span><span id="DShieldTUIApp-410"><a href="#DShieldTUIApp-410"><span class="linenos">410</span></a>
</span><span id="DShieldTUIApp-411"><a href="#DShieldTUIApp-411"><span class="linenos">411</span></a>            <span class="k">if</span> <span class="n">connection_panel</span><span class="p">:</span>
</span><span id="DShieldTUIApp-412"><a href="#DShieldTUIApp-412"><span class="linenos">412</span></a>                <span class="c1"># Get API keys from the connection manager</span>
</span><span id="DShieldTUIApp-413"><a href="#DShieldTUIApp-413"><span class="linenos">413</span></a>                <span class="n">api_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-414"><a href="#DShieldTUIApp-414"><span class="linenos">414</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">,</span> <span class="s1">&#39;connection_manager&#39;</span><span class="p">):</span>
</span><span id="DShieldTUIApp-415"><a href="#DShieldTUIApp-415"><span class="linenos">415</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-416"><a href="#DShieldTUIApp-416"><span class="linenos">416</span></a>                        <span class="n">api_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">connection_manager</span><span class="o">.</span><span class="n">get_api_keys_info</span><span class="p">()</span>
</span><span id="DShieldTUIApp-417"><a href="#DShieldTUIApp-417"><span class="linenos">417</span></a>                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-418"><a href="#DShieldTUIApp-418"><span class="linenos">418</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="DShieldTUIApp-419"><a href="#DShieldTUIApp-419"><span class="linenos">419</span></a>                            <span class="s2">&quot;Error getting API keys from connection manager&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="DShieldTUIApp-420"><a href="#DShieldTUIApp-420"><span class="linenos">420</span></a>                        <span class="p">)</span>
</span><span id="DShieldTUIApp-421"><a href="#DShieldTUIApp-421"><span class="linenos">421</span></a>                        <span class="n">api_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-422"><a href="#DShieldTUIApp-422"><span class="linenos">422</span></a>
</span><span id="DShieldTUIApp-423"><a href="#DShieldTUIApp-423"><span class="linenos">423</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="DShieldTUIApp-424"><a href="#DShieldTUIApp-424"><span class="linenos">424</span></a>                    <span class="s2">&quot;Updating connection panel&quot;</span><span class="p">,</span> <span class="n">api_keys_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">),</span> <span class="n">api_keys</span><span class="o">=</span><span class="n">api_keys</span>
</span><span id="DShieldTUIApp-425"><a href="#DShieldTUIApp-425"><span class="linenos">425</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-426"><a href="#DShieldTUIApp-426"><span class="linenos">426</span></a>                <span class="n">connection_panel</span><span class="o">.</span><span class="n">update_api_keys</span><span class="p">(</span><span class="n">api_keys</span><span class="p">)</span>
</span><span id="DShieldTUIApp-427"><a href="#DShieldTUIApp-427"><span class="linenos">427</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection panel update_api_keys called&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-428"><a href="#DShieldTUIApp-428"><span class="linenos">428</span></a>
</span><span id="DShieldTUIApp-429"><a href="#DShieldTUIApp-429"><span class="linenos">429</span></a>                <span class="c1"># Get connections from the connection manager</span>
</span><span id="DShieldTUIApp-430"><a href="#DShieldTUIApp-430"><span class="linenos">430</span></a>                <span class="n">connections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-431"><a href="#DShieldTUIApp-431"><span class="linenos">431</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">,</span> <span class="s1">&#39;connection_manager&#39;</span><span class="p">):</span>
</span><span id="DShieldTUIApp-432"><a href="#DShieldTUIApp-432"><span class="linenos">432</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-433"><a href="#DShieldTUIApp-433"><span class="linenos">433</span></a>                        <span class="n">connections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">connection_manager</span><span class="o">.</span><span class="n">get_connections_info</span><span class="p">()</span>
</span><span id="DShieldTUIApp-434"><a href="#DShieldTUIApp-434"><span class="linenos">434</span></a>                        <span class="c1"># Enhance connection data with additional information</span>
</span><span id="DShieldTUIApp-435"><a href="#DShieldTUIApp-435"><span class="linenos">435</span></a>                        <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">connections</span><span class="p">:</span>
</span><span id="DShieldTUIApp-436"><a href="#DShieldTUIApp-436"><span class="linenos">436</span></a>                            <span class="c1"># Add RPS and violations if not present</span>
</span><span id="DShieldTUIApp-437"><a href="#DShieldTUIApp-437"><span class="linenos">437</span></a>                            <span class="k">if</span> <span class="s1">&#39;rps&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="DShieldTUIApp-438"><a href="#DShieldTUIApp-438"><span class="linenos">438</span></a>                                <span class="n">conn</span><span class="p">[</span><span class="s1">&#39;rps&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;requests_per_second&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="DShieldTUIApp-439"><a href="#DShieldTUIApp-439"><span class="linenos">439</span></a>                            <span class="k">if</span> <span class="s1">&#39;violations&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="DShieldTUIApp-440"><a href="#DShieldTUIApp-440"><span class="linenos">440</span></a>                                <span class="n">conn</span><span class="p">[</span><span class="s1">&#39;violations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rate_limit_violations&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="DShieldTUIApp-441"><a href="#DShieldTUIApp-441"><span class="linenos">441</span></a>
</span><span id="DShieldTUIApp-442"><a href="#DShieldTUIApp-442"><span class="linenos">442</span></a>                            <span class="c1"># Ensure permissions are properly formatted</span>
</span><span id="DShieldTUIApp-443"><a href="#DShieldTUIApp-443"><span class="linenos">443</span></a>                            <span class="k">if</span> <span class="s1">&#39;permissions&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">conn</span> <span class="ow">and</span> <span class="s1">&#39;api_key_permissions&#39;</span> <span class="ow">in</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="DShieldTUIApp-444"><a href="#DShieldTUIApp-444"><span class="linenos">444</span></a>                                <span class="n">conn</span><span class="p">[</span><span class="s1">&#39;permissions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span><span class="p">[</span><span class="s1">&#39;api_key_permissions&#39;</span><span class="p">]</span>
</span><span id="DShieldTUIApp-445"><a href="#DShieldTUIApp-445"><span class="linenos">445</span></a>                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-446"><a href="#DShieldTUIApp-446"><span class="linenos">446</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="DShieldTUIApp-447"><a href="#DShieldTUIApp-447"><span class="linenos">447</span></a>                            <span class="s2">&quot;Error getting connections from connection manager&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="DShieldTUIApp-448"><a href="#DShieldTUIApp-448"><span class="linenos">448</span></a>                        <span class="p">)</span>
</span><span id="DShieldTUIApp-449"><a href="#DShieldTUIApp-449"><span class="linenos">449</span></a>                        <span class="n">connections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DShieldTUIApp-450"><a href="#DShieldTUIApp-450"><span class="linenos">450</span></a>
</span><span id="DShieldTUIApp-451"><a href="#DShieldTUIApp-451"><span class="linenos">451</span></a>                <span class="n">connection_panel</span><span class="o">.</span><span class="n">update_connections</span><span class="p">(</span><span class="n">connections</span><span class="p">)</span>
</span><span id="DShieldTUIApp-452"><a href="#DShieldTUIApp-452"><span class="linenos">452</span></a>
</span><span id="DShieldTUIApp-453"><a href="#DShieldTUIApp-453"><span class="linenos">453</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="DShieldTUIApp-454"><a href="#DShieldTUIApp-454"><span class="linenos">454</span></a>                    <span class="s2">&quot;Updated connection panel successfully&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-455"><a href="#DShieldTUIApp-455"><span class="linenos">455</span></a>                    <span class="n">api_keys_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">api_keys</span><span class="p">),</span>
</span><span id="DShieldTUIApp-456"><a href="#DShieldTUIApp-456"><span class="linenos">456</span></a>                    <span class="n">connections_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">connections</span><span class="p">),</span>
</span><span id="DShieldTUIApp-457"><a href="#DShieldTUIApp-457"><span class="linenos">457</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-458"><a href="#DShieldTUIApp-458"><span class="linenos">458</span></a>
</span><span id="DShieldTUIApp-459"><a href="#DShieldTUIApp-459"><span class="linenos">459</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-460"><a href="#DShieldTUIApp-460"><span class="linenos">460</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating connection panel&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-461"><a href="#DShieldTUIApp-461"><span class="linenos">461</span></a>
</span><span id="DShieldTUIApp-462"><a href="#DShieldTUIApp-462"><span class="linenos">462</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_log_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-463"><a href="#DShieldTUIApp-463"><span class="linenos">463</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a log entry to the log panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-464"><a href="#DShieldTUIApp-464"><span class="linenos">464</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-465"><a href="#DShieldTUIApp-465"><span class="linenos">465</span></a>            <span class="c1"># Debug: List all available log panels</span>
</span><span id="DShieldTUIApp-466"><a href="#DShieldTUIApp-466"><span class="linenos">466</span></a>            <span class="n">all_log_panels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-467"><a href="#DShieldTUIApp-467"><span class="linenos">467</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="DShieldTUIApp-468"><a href="#DShieldTUIApp-468"><span class="linenos">468</span></a>                <span class="s2">&quot;Available log panels&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-469"><a href="#DShieldTUIApp-469"><span class="linenos">469</span></a>                <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">all_log_panels</span><span class="p">),</span>
</span><span id="DShieldTUIApp-470"><a href="#DShieldTUIApp-470"><span class="linenos">470</span></a>                <span class="n">panels</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">all_log_panels</span><span class="p">],</span>
</span><span id="DShieldTUIApp-471"><a href="#DShieldTUIApp-471"><span class="linenos">471</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-472"><a href="#DShieldTUIApp-472"><span class="linenos">472</span></a>
</span><span id="DShieldTUIApp-473"><a href="#DShieldTUIApp-473"><span class="linenos">473</span></a>            <span class="c1"># Get the log panel - try multiple ways to find it</span>
</span><span id="DShieldTUIApp-474"><a href="#DShieldTUIApp-474"><span class="linenos">474</span></a>            <span class="n">log_panel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-475"><a href="#DShieldTUIApp-475"><span class="linenos">475</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-476"><a href="#DShieldTUIApp-476"><span class="linenos">476</span></a>                <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-panel&quot;</span><span class="p">,</span> <span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-477"><a href="#DShieldTUIApp-477"><span class="linenos">477</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found log panel by ID&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-478"><a href="#DShieldTUIApp-478"><span class="linenos">478</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-479"><a href="#DShieldTUIApp-479"><span class="linenos">479</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to find log panel by ID&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-480"><a href="#DShieldTUIApp-480"><span class="linenos">480</span></a>                <span class="c1"># Try to find it by class</span>
</span><span id="DShieldTUIApp-481"><a href="#DShieldTUIApp-481"><span class="linenos">481</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-482"><a href="#DShieldTUIApp-482"><span class="linenos">482</span></a>                    <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-483"><a href="#DShieldTUIApp-483"><span class="linenos">483</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found log panel by class&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-484"><a href="#DShieldTUIApp-484"><span class="linenos">484</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e2</span><span class="p">:</span>
</span><span id="DShieldTUIApp-485"><a href="#DShieldTUIApp-485"><span class="linenos">485</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to find log panel by class&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e2</span><span class="p">))</span>
</span><span id="DShieldTUIApp-486"><a href="#DShieldTUIApp-486"><span class="linenos">486</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Log panel not found, skipping log entry&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-487"><a href="#DShieldTUIApp-487"><span class="linenos">487</span></a>                    <span class="k">return</span>
</span><span id="DShieldTUIApp-488"><a href="#DShieldTUIApp-488"><span class="linenos">488</span></a>
</span><span id="DShieldTUIApp-489"><a href="#DShieldTUIApp-489"><span class="linenos">489</span></a>            <span class="k">if</span> <span class="n">log_panel</span><span class="p">:</span>
</span><span id="DShieldTUIApp-490"><a href="#DShieldTUIApp-490"><span class="linenos">490</span></a>                <span class="c1"># Create log entry</span>
</span><span id="DShieldTUIApp-491"><a href="#DShieldTUIApp-491"><span class="linenos">491</span></a>                <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="DShieldTUIApp-492"><a href="#DShieldTUIApp-492"><span class="linenos">492</span></a>
</span><span id="DShieldTUIApp-493"><a href="#DShieldTUIApp-493"><span class="linenos">493</span></a>                <span class="n">log_entry</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-494"><a href="#DShieldTUIApp-494"><span class="linenos">494</span></a>                    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="DShieldTUIApp-495"><a href="#DShieldTUIApp-495"><span class="linenos">495</span></a>                    <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">,</span>
</span><span id="DShieldTUIApp-496"><a href="#DShieldTUIApp-496"><span class="linenos">496</span></a>                    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
</span><span id="DShieldTUIApp-497"><a href="#DShieldTUIApp-497"><span class="linenos">497</span></a>                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;tui&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-498"><a href="#DShieldTUIApp-498"><span class="linenos">498</span></a>                <span class="p">}</span>
</span><span id="DShieldTUIApp-499"><a href="#DShieldTUIApp-499"><span class="linenos">499</span></a>
</span><span id="DShieldTUIApp-500"><a href="#DShieldTUIApp-500"><span class="linenos">500</span></a>                <span class="c1"># Add the log entry</span>
</span><span id="DShieldTUIApp-501"><a href="#DShieldTUIApp-501"><span class="linenos">501</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="DShieldTUIApp-502"><a href="#DShieldTUIApp-502"><span class="linenos">502</span></a>                    <span class="s2">&quot;Adding log entry to panel&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">log_entry</span><span class="o">=</span><span class="n">log_entry</span>
</span><span id="DShieldTUIApp-503"><a href="#DShieldTUIApp-503"><span class="linenos">503</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-504"><a href="#DShieldTUIApp-504"><span class="linenos">504</span></a>                <span class="n">log_panel</span><span class="o">.</span><span class="n">add_log_entries</span><span class="p">([</span><span class="n">log_entry</span><span class="p">])</span>
</span><span id="DShieldTUIApp-505"><a href="#DShieldTUIApp-505"><span class="linenos">505</span></a>
</span><span id="DShieldTUIApp-506"><a href="#DShieldTUIApp-506"><span class="linenos">506</span></a>                <span class="c1"># Force update the display to bypass any filtering issues</span>
</span><span id="DShieldTUIApp-507"><a href="#DShieldTUIApp-507"><span class="linenos">507</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-508"><a href="#DShieldTUIApp-508"><span class="linenos">508</span></a>                    <span class="n">log_panel</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="DShieldTUIApp-509"><a href="#DShieldTUIApp-509"><span class="linenos">509</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Forced log panel display update&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-510"><a href="#DShieldTUIApp-510"><span class="linenos">510</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-511"><a href="#DShieldTUIApp-511"><span class="linenos">511</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to force log panel update&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-512"><a href="#DShieldTUIApp-512"><span class="linenos">512</span></a>
</span><span id="DShieldTUIApp-513"><a href="#DShieldTUIApp-513"><span class="linenos">513</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added log entry successfully&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</span><span id="DShieldTUIApp-514"><a href="#DShieldTUIApp-514"><span class="linenos">514</span></a>
</span><span id="DShieldTUIApp-515"><a href="#DShieldTUIApp-515"><span class="linenos">515</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-516"><a href="#DShieldTUIApp-516"><span class="linenos">516</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error adding log entry&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-517"><a href="#DShieldTUIApp-517"><span class="linenos">517</span></a>
</span><span id="DShieldTUIApp-518"><a href="#DShieldTUIApp-518"><span class="linenos">518</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-519"><a href="#DShieldTUIApp-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Quit the application.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-520"><a href="#DShieldTUIApp-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Quitting TUI application&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-521"><a href="#DShieldTUIApp-521"><span class="linenos">521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="DShieldTUIApp-522"><a href="#DShieldTUIApp-522"><span class="linenos">522</span></a>
</span><span id="DShieldTUIApp-523"><a href="#DShieldTUIApp-523"><span class="linenos">523</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_restart_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-524"><a href="#DShieldTUIApp-524"><span class="linenos">524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Restart the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-525"><a href="#DShieldTUIApp-525"><span class="linenos">525</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Restarting TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-526"><a href="#DShieldTUIApp-526"><span class="linenos">526</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Restarting TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-527"><a href="#DShieldTUIApp-527"><span class="linenos">527</span></a>
</span><span id="DShieldTUIApp-528"><a href="#DShieldTUIApp-528"><span class="linenos">528</span></a>        <span class="c1"># Stop existing server</span>
</span><span id="DShieldTUIApp-529"><a href="#DShieldTUIApp-529"><span class="linenos">529</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-530"><a href="#DShieldTUIApp-530"><span class="linenos">530</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_stop_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-531"><a href="#DShieldTUIApp-531"><span class="linenos">531</span></a>
</span><span id="DShieldTUIApp-532"><a href="#DShieldTUIApp-532"><span class="linenos">532</span></a>        <span class="c1"># Start new server</span>
</span><span id="DShieldTUIApp-533"><a href="#DShieldTUIApp-533"><span class="linenos">533</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-534"><a href="#DShieldTUIApp-534"><span class="linenos">534</span></a>
</span><span id="DShieldTUIApp-535"><a href="#DShieldTUIApp-535"><span class="linenos">535</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-536"><a href="#DShieldTUIApp-536"><span class="linenos">536</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-537"><a href="#DShieldTUIApp-537"><span class="linenos">537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-538"><a href="#DShieldTUIApp-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Stopping TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-539"><a href="#DShieldTUIApp-539"><span class="linenos">539</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-540"><a href="#DShieldTUIApp-540"><span class="linenos">540</span></a>
</span><span id="DShieldTUIApp-541"><a href="#DShieldTUIApp-541"><span class="linenos">541</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">action_generate_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-542"><a href="#DShieldTUIApp-542"><span class="linenos">542</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a new API key.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-543"><a href="#DShieldTUIApp-543"><span class="linenos">543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating new API key&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-544"><a href="#DShieldTUIApp-544"><span class="linenos">544</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_api_key</span><span class="p">()</span>
</span><span id="DShieldTUIApp-545"><a href="#DShieldTUIApp-545"><span class="linenos">545</span></a>
</span><span id="DShieldTUIApp-546"><a href="#DShieldTUIApp-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_test_log</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-547"><a href="#DShieldTUIApp-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test log entry creation.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-548"><a href="#DShieldTUIApp-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Testing log entry creation&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-549"><a href="#DShieldTUIApp-549"><span class="linenos">549</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Test log entry created&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-550"><a href="#DShieldTUIApp-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Test log entry added&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-551"><a href="#DShieldTUIApp-551"><span class="linenos">551</span></a>
</span><span id="DShieldTUIApp-552"><a href="#DShieldTUIApp-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-553"><a href="#DShieldTUIApp-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the log display.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-554"><a href="#DShieldTUIApp-554"><span class="linenos">554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Clearing logs&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-555"><a href="#DShieldTUIApp-555"><span class="linenos">555</span></a>        <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-panel&quot;</span><span class="p">,</span> <span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-556"><a href="#DShieldTUIApp-556"><span class="linenos">556</span></a>        <span class="n">log_panel</span><span class="o">.</span><span class="n">clear_logs</span><span class="p">()</span>
</span><span id="DShieldTUIApp-557"><a href="#DShieldTUIApp-557"><span class="linenos">557</span></a>
</span><span id="DShieldTUIApp-558"><a href="#DShieldTUIApp-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_show_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-559"><a href="#DShieldTUIApp-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show help information.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-560"><a href="#DShieldTUIApp-560"><span class="linenos">560</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Showing help&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-561"><a href="#DShieldTUIApp-561"><span class="linenos">561</span></a>        <span class="c1"># This would show a help dialog</span>
</span><span id="DShieldTUIApp-562"><a href="#DShieldTUIApp-562"><span class="linenos">562</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Help: Use Tab to switch panels, Ctrl+C to quit&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-563"><a href="#DShieldTUIApp-563"><span class="linenos">563</span></a>
</span><span id="DShieldTUIApp-564"><a href="#DShieldTUIApp-564"><span class="linenos">564</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_switch_panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-565"><a href="#DShieldTUIApp-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Switch between panels.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-566"><a href="#DShieldTUIApp-566"><span class="linenos">566</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
</span><span id="DShieldTUIApp-567"><a href="#DShieldTUIApp-567"><span class="linenos">567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Switched to panel&quot;</span><span class="p">,</span> <span class="n">panel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-568"><a href="#DShieldTUIApp-568"><span class="linenos">568</span></a>
</span><span id="DShieldTUIApp-569"><a href="#DShieldTUIApp-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_focus_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-570"><a href="#DShieldTUIApp-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Focus the log filter input field.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-571"><a href="#DShieldTUIApp-571"><span class="linenos">571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Focusing log filter&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-572"><a href="#DShieldTUIApp-572"><span class="linenos">572</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-573"><a href="#DShieldTUIApp-573"><span class="linenos">573</span></a>            <span class="c1"># Find the search input in the log panel</span>
</span><span id="DShieldTUIApp-574"><a href="#DShieldTUIApp-574"><span class="linenos">574</span></a>            <span class="n">search_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#search-input&quot;</span><span class="p">,</span> <span class="n">Input</span><span class="p">)</span>
</span><span id="DShieldTUIApp-575"><a href="#DShieldTUIApp-575"><span class="linenos">575</span></a>            <span class="n">search_input</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>
</span><span id="DShieldTUIApp-576"><a href="#DShieldTUIApp-576"><span class="linenos">576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Filter focused - type to search logs&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="DShieldTUIApp-577"><a href="#DShieldTUIApp-577"><span class="linenos">577</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-578"><a href="#DShieldTUIApp-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to focus filter&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-579"><a href="#DShieldTUIApp-579"><span class="linenos">579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Failed to focus filter&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="DShieldTUIApp-580"><a href="#DShieldTUIApp-580"><span class="linenos">580</span></a>
</span><span id="DShieldTUIApp-581"><a href="#DShieldTUIApp-581"><span class="linenos">581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerStart</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-582"><a href="#DShieldTUIApp-582"><span class="linenos">582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server start message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-583"><a href="#DShieldTUIApp-583"><span class="linenos">583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server start message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-584"><a href="#DShieldTUIApp-584"><span class="linenos">584</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span><span id="DShieldTUIApp-585"><a href="#DShieldTUIApp-585"><span class="linenos">585</span></a>
</span><span id="DShieldTUIApp-586"><a href="#DShieldTUIApp-586"><span class="linenos">586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerStop</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-587"><a href="#DShieldTUIApp-587"><span class="linenos">587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server stop message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-588"><a href="#DShieldTUIApp-588"><span class="linenos">588</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server stop message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-589"><a href="#DShieldTUIApp-589"><span class="linenos">589</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span><span id="DShieldTUIApp-590"><a href="#DShieldTUIApp-590"><span class="linenos">590</span></a>
</span><span id="DShieldTUIApp-591"><a href="#DShieldTUIApp-591"><span class="linenos">591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_restart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerRestart</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-592"><a href="#DShieldTUIApp-592"><span class="linenos">592</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server restart message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-593"><a href="#DShieldTUIApp-593"><span class="linenos">593</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server restart message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-594"><a href="#DShieldTUIApp-594"><span class="linenos">594</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span><span id="DShieldTUIApp-595"><a href="#DShieldTUIApp-595"><span class="linenos">595</span></a>
</span><span id="DShieldTUIApp-596"><a href="#DShieldTUIApp-596"><span class="linenos">596</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_start_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-597"><a href="#DShieldTUIApp-597"><span class="linenos">597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-598"><a href="#DShieldTUIApp-598"><span class="linenos">598</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-599"><a href="#DShieldTUIApp-599"><span class="linenos">599</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;DEBUG: _start_server called&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-600"><a href="#DShieldTUIApp-600"><span class="linenos">600</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Attempting to start TCP server...&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-601"><a href="#DShieldTUIApp-601"><span class="linenos">601</span></a>
</span><span id="DShieldTUIApp-602"><a href="#DShieldTUIApp-602"><span class="linenos">602</span></a>            <span class="c1"># Check if auto_start is enabled</span>
</span><span id="DShieldTUIApp-603"><a href="#DShieldTUIApp-603"><span class="linenos">603</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="DShieldTUIApp-604"><a href="#DShieldTUIApp-604"><span class="linenos">604</span></a>                <span class="sa">f</span><span class="s2">&quot;DEBUG: auto_start_server = &quot;</span>
</span><span id="DShieldTUIApp-605"><a href="#DShieldTUIApp-605"><span class="linenos">605</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">server_management</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;auto_start_server&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="DShieldTUIApp-606"><a href="#DShieldTUIApp-606"><span class="linenos">606</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-607"><a href="#DShieldTUIApp-607"><span class="linenos">607</span></a>
</span><span id="DShieldTUIApp-608"><a href="#DShieldTUIApp-608"><span class="linenos">608</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-609"><a href="#DShieldTUIApp-609"><span class="linenos">609</span></a>
</span><span id="DShieldTUIApp-610"><a href="#DShieldTUIApp-610"><span class="linenos">610</span></a>            <span class="c1"># Create server configuration</span>
</span><span id="DShieldTUIApp-611"><a href="#DShieldTUIApp-611"><span class="linenos">611</span></a>            <span class="n">tcp_config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-612"><a href="#DShieldTUIApp-612"><span class="linenos">612</span></a>                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_port</span><span class="p">,</span>
</span><span id="DShieldTUIApp-613"><a href="#DShieldTUIApp-613"><span class="linenos">613</span></a>                <span class="s2">&quot;bind_address&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
</span><span id="DShieldTUIApp-614"><a href="#DShieldTUIApp-614"><span class="linenos">614</span></a>                <span class="s2">&quot;max_connections&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">max_connections</span><span class="p">,</span>
</span><span id="DShieldTUIApp-615"><a href="#DShieldTUIApp-615"><span class="linenos">615</span></a>                <span class="s2">&quot;connection_timeout_seconds&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="DShieldTUIApp-616"><a href="#DShieldTUIApp-616"><span class="linenos">616</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">connection_timeout_seconds</span>
</span><span id="DShieldTUIApp-617"><a href="#DShieldTUIApp-617"><span class="linenos">617</span></a>                <span class="p">),</span>
</span><span id="DShieldTUIApp-618"><a href="#DShieldTUIApp-618"><span class="linenos">618</span></a>                <span class="s2">&quot;connection_management&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-619"><a href="#DShieldTUIApp-619"><span class="linenos">619</span></a>                    <span class="s2">&quot;api_key_management&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="DShieldTUIApp-620"><a href="#DShieldTUIApp-620"><span class="linenos">620</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">api_key_management</span>
</span><span id="DShieldTUIApp-621"><a href="#DShieldTUIApp-621"><span class="linenos">621</span></a>                    <span class="p">),</span>
</span><span id="DShieldTUIApp-622"><a href="#DShieldTUIApp-622"><span class="linenos">622</span></a>                    <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">permissions</span><span class="p">,</span>
</span><span id="DShieldTUIApp-623"><a href="#DShieldTUIApp-623"><span class="linenos">623</span></a>                <span class="p">},</span>
</span><span id="DShieldTUIApp-624"><a href="#DShieldTUIApp-624"><span class="linenos">624</span></a>                <span class="s2">&quot;security&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-625"><a href="#DShieldTUIApp-625"><span class="linenos">625</span></a>                    <span class="s2">&quot;global_rate_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span><span id="DShieldTUIApp-626"><a href="#DShieldTUIApp-626"><span class="linenos">626</span></a>                    <span class="s2">&quot;global_burst_limit&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="DShieldTUIApp-627"><a href="#DShieldTUIApp-627"><span class="linenos">627</span></a>                    <span class="s2">&quot;client_rate_limit&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="DShieldTUIApp-628"><a href="#DShieldTUIApp-628"><span class="linenos">628</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tcp_transport_settings</span><span class="o">.</span><span class="n">api_key_management</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="DShieldTUIApp-629"><a href="#DShieldTUIApp-629"><span class="linenos">629</span></a>                            <span class="s2">&quot;rate_limit_per_key&quot;</span><span class="p">,</span> <span class="mi">60</span>
</span><span id="DShieldTUIApp-630"><a href="#DShieldTUIApp-630"><span class="linenos">630</span></a>                        <span class="p">)</span>
</span><span id="DShieldTUIApp-631"><a href="#DShieldTUIApp-631"><span class="linenos">631</span></a>                    <span class="p">),</span>
</span><span id="DShieldTUIApp-632"><a href="#DShieldTUIApp-632"><span class="linenos">632</span></a>                    <span class="s2">&quot;client_burst_limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="DShieldTUIApp-633"><a href="#DShieldTUIApp-633"><span class="linenos">633</span></a>                    <span class="s2">&quot;abuse_threshold&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="DShieldTUIApp-634"><a href="#DShieldTUIApp-634"><span class="linenos">634</span></a>                    <span class="s2">&quot;block_duration_seconds&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
</span><span id="DShieldTUIApp-635"><a href="#DShieldTUIApp-635"><span class="linenos">635</span></a>                    <span class="s2">&quot;max_connection_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span id="DShieldTUIApp-636"><a href="#DShieldTUIApp-636"><span class="linenos">636</span></a>                    <span class="s2">&quot;connection_window_seconds&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
</span><span id="DShieldTUIApp-637"><a href="#DShieldTUIApp-637"><span class="linenos">637</span></a>                    <span class="s2">&quot;input_validation&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-638"><a href="#DShieldTUIApp-638"><span class="linenos">638</span></a>                        <span class="s2">&quot;max_message_size&quot;</span><span class="p">:</span> <span class="mi">1048576</span><span class="p">,</span>
</span><span id="DShieldTUIApp-639"><a href="#DShieldTUIApp-639"><span class="linenos">639</span></a>                        <span class="s2">&quot;max_field_length&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
</span><span id="DShieldTUIApp-640"><a href="#DShieldTUIApp-640"><span class="linenos">640</span></a>                        <span class="s2">&quot;allowed_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="DShieldTUIApp-641"><a href="#DShieldTUIApp-641"><span class="linenos">641</span></a>                            <span class="s2">&quot;initialize&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-642"><a href="#DShieldTUIApp-642"><span class="linenos">642</span></a>                            <span class="s2">&quot;initialized&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-643"><a href="#DShieldTUIApp-643"><span class="linenos">643</span></a>                            <span class="s2">&quot;tools/list&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-644"><a href="#DShieldTUIApp-644"><span class="linenos">644</span></a>                            <span class="s2">&quot;tools/call&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-645"><a href="#DShieldTUIApp-645"><span class="linenos">645</span></a>                            <span class="s2">&quot;resources/list&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-646"><a href="#DShieldTUIApp-646"><span class="linenos">646</span></a>                            <span class="s2">&quot;resources/read&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-647"><a href="#DShieldTUIApp-647"><span class="linenos">647</span></a>                            <span class="s2">&quot;prompts/list&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-648"><a href="#DShieldTUIApp-648"><span class="linenos">648</span></a>                            <span class="s2">&quot;prompts/get&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-649"><a href="#DShieldTUIApp-649"><span class="linenos">649</span></a>                            <span class="s2">&quot;authenticate&quot;</span><span class="p">,</span>
</span><span id="DShieldTUIApp-650"><a href="#DShieldTUIApp-650"><span class="linenos">650</span></a>                        <span class="p">],</span>
</span><span id="DShieldTUIApp-651"><a href="#DShieldTUIApp-651"><span class="linenos">651</span></a>                    <span class="p">},</span>
</span><span id="DShieldTUIApp-652"><a href="#DShieldTUIApp-652"><span class="linenos">652</span></a>                <span class="p">},</span>
</span><span id="DShieldTUIApp-653"><a href="#DShieldTUIApp-653"><span class="linenos">653</span></a>                <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DShieldTUIApp-654"><a href="#DShieldTUIApp-654"><span class="linenos">654</span></a>                    <span class="s2">&quot;session_timeout_seconds&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
</span><span id="DShieldTUIApp-655"><a href="#DShieldTUIApp-655"><span class="linenos">655</span></a>                    <span class="s2">&quot;max_sessions_per_key&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span id="DShieldTUIApp-656"><a href="#DShieldTUIApp-656"><span class="linenos">656</span></a>                <span class="p">},</span>
</span><span id="DShieldTUIApp-657"><a href="#DShieldTUIApp-657"><span class="linenos">657</span></a>            <span class="p">}</span>
</span><span id="DShieldTUIApp-658"><a href="#DShieldTUIApp-658"><span class="linenos">658</span></a>
</span><span id="DShieldTUIApp-659"><a href="#DShieldTUIApp-659"><span class="linenos">659</span></a>            <span class="c1"># Create MCP server instance</span>
</span><span id="DShieldTUIApp-660"><a href="#DShieldTUIApp-660"><span class="linenos">660</span></a>            <span class="n">mcp_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_mcp_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-661"><a href="#DShieldTUIApp-661"><span class="linenos">661</span></a>
</span><span id="DShieldTUIApp-662"><a href="#DShieldTUIApp-662"><span class="linenos">662</span></a>            <span class="c1"># Create and start the enhanced TCP server</span>
</span><span id="DShieldTUIApp-663"><a href="#DShieldTUIApp-663"><span class="linenos">663</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span> <span class="o">=</span> <span class="n">EnhancedTCPServer</span><span class="p">(</span><span class="n">mcp_server</span><span class="p">,</span> <span class="n">tcp_config</span><span class="p">)</span>
</span><span id="DShieldTUIApp-664"><a href="#DShieldTUIApp-664"><span class="linenos">664</span></a>
</span><span id="DShieldTUIApp-665"><a href="#DShieldTUIApp-665"><span class="linenos">665</span></a>            <span class="c1"># Start the server in a separate thread to avoid blocking the TUI</span>
</span><span id="DShieldTUIApp-666"><a href="#DShieldTUIApp-666"><span class="linenos">666</span></a>            <span class="k">def</span><span class="w"> </span><span class="nf">start_server_async</span><span class="p">():</span>
</span><span id="DShieldTUIApp-667"><a href="#DShieldTUIApp-667"><span class="linenos">667</span></a><span class="w">                </span><span class="sd">&quot;&quot;&quot;Start the TCP server asynchronously.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-668"><a href="#DShieldTUIApp-668"><span class="linenos">668</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-669"><a href="#DShieldTUIApp-669"><span class="linenos">669</span></a>                    <span class="c1"># Create a new event loop for this thread</span>
</span><span id="DShieldTUIApp-670"><a href="#DShieldTUIApp-670"><span class="linenos">670</span></a>                    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
</span><span id="DShieldTUIApp-671"><a href="#DShieldTUIApp-671"><span class="linenos">671</span></a>                    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
</span><span id="DShieldTUIApp-672"><a href="#DShieldTUIApp-672"><span class="linenos">672</span></a>
</span><span id="DShieldTUIApp-673"><a href="#DShieldTUIApp-673"><span class="linenos">673</span></a>                    <span class="c1"># Start the server</span>
</span><span id="DShieldTUIApp-674"><a href="#DShieldTUIApp-674"><span class="linenos">674</span></a>                    <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
</span><span id="DShieldTUIApp-675"><a href="#DShieldTUIApp-675"><span class="linenos">675</span></a>
</span><span id="DShieldTUIApp-676"><a href="#DShieldTUIApp-676"><span class="linenos">676</span></a>                    <span class="c1"># Keep the loop running</span>
</span><span id="DShieldTUIApp-677"><a href="#DShieldTUIApp-677"><span class="linenos">677</span></a>                    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
</span><span id="DShieldTUIApp-678"><a href="#DShieldTUIApp-678"><span class="linenos">678</span></a>
</span><span id="DShieldTUIApp-679"><a href="#DShieldTUIApp-679"><span class="linenos">679</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-680"><a href="#DShieldTUIApp-680"><span class="linenos">680</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error in TCP server thread&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-681"><a href="#DShieldTUIApp-681"><span class="linenos">681</span></a>                <span class="k">finally</span><span class="p">:</span>
</span><span id="DShieldTUIApp-682"><a href="#DShieldTUIApp-682"><span class="linenos">682</span></a>                    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="DShieldTUIApp-683"><a href="#DShieldTUIApp-683"><span class="linenos">683</span></a>
</span><span id="DShieldTUIApp-684"><a href="#DShieldTUIApp-684"><span class="linenos">684</span></a>            <span class="c1"># Start the server in a daemon thread</span>
</span><span id="DShieldTUIApp-685"><a href="#DShieldTUIApp-685"><span class="linenos">685</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">start_server_async</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="DShieldTUIApp-686"><a href="#DShieldTUIApp-686"><span class="linenos">686</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="DShieldTUIApp-687"><a href="#DShieldTUIApp-687"><span class="linenos">687</span></a>
</span><span id="DShieldTUIApp-688"><a href="#DShieldTUIApp-688"><span class="linenos">688</span></a>            <span class="c1"># Check if the server thread is actually running</span>
</span><span id="DShieldTUIApp-689"><a href="#DShieldTUIApp-689"><span class="linenos">689</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="p">:</span>
</span><span id="DShieldTUIApp-690"><a href="#DShieldTUIApp-690"><span class="linenos">690</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Server thread started: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-691"><a href="#DShieldTUIApp-691"><span class="linenos">691</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Server thread name: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-692"><a href="#DShieldTUIApp-692"><span class="linenos">692</span></a>
</span><span id="DShieldTUIApp-693"><a href="#DShieldTUIApp-693"><span class="linenos">693</span></a>            <span class="c1"># Give the server a moment to start</span>
</span><span id="DShieldTUIApp-694"><a href="#DShieldTUIApp-694"><span class="linenos">694</span></a>            <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="DShieldTUIApp-695"><a href="#DShieldTUIApp-695"><span class="linenos">695</span></a>
</span><span id="DShieldTUIApp-696"><a href="#DShieldTUIApp-696"><span class="linenos">696</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-697"><a href="#DShieldTUIApp-697"><span class="linenos">697</span></a>
</span><span id="DShieldTUIApp-698"><a href="#DShieldTUIApp-698"><span class="linenos">698</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="DShieldTUIApp-699"><a href="#DShieldTUIApp-699"><span class="linenos">699</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TCP server started successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-700"><a href="#DShieldTUIApp-700"><span class="linenos">700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server started successfully&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-701"><a href="#DShieldTUIApp-701"><span class="linenos">701</span></a>
</span><span id="DShieldTUIApp-702"><a href="#DShieldTUIApp-702"><span class="linenos">702</span></a>            <span class="c1"># Update server panel status</span>
</span><span id="DShieldTUIApp-703"><a href="#DShieldTUIApp-703"><span class="linenos">703</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_panel_status</span><span class="p">()</span>
</span><span id="DShieldTUIApp-704"><a href="#DShieldTUIApp-704"><span class="linenos">704</span></a>
</span><span id="DShieldTUIApp-705"><a href="#DShieldTUIApp-705"><span class="linenos">705</span></a>            <span class="c1"># Add log entry</span>
</span><span id="DShieldTUIApp-706"><a href="#DShieldTUIApp-706"><span class="linenos">706</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;TCP server started successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-707"><a href="#DShieldTUIApp-707"><span class="linenos">707</span></a>
</span><span id="DShieldTUIApp-708"><a href="#DShieldTUIApp-708"><span class="linenos">708</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-709"><a href="#DShieldTUIApp-709"><span class="linenos">709</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to start TCP server&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-710"><a href="#DShieldTUIApp-710"><span class="linenos">710</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to start server: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-711"><a href="#DShieldTUIApp-711"><span class="linenos">711</span></a>
</span><span id="DShieldTUIApp-712"><a href="#DShieldTUIApp-712"><span class="linenos">712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-713"><a href="#DShieldTUIApp-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-714"><a href="#DShieldTUIApp-714"><span class="linenos">714</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-715"><a href="#DShieldTUIApp-715"><span class="linenos">715</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-716"><a href="#DShieldTUIApp-716"><span class="linenos">716</span></a>
</span><span id="DShieldTUIApp-717"><a href="#DShieldTUIApp-717"><span class="linenos">717</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">:</span>
</span><span id="DShieldTUIApp-718"><a href="#DShieldTUIApp-718"><span class="linenos">718</span></a>                <span class="c1"># Stop the TCP server asynchronously</span>
</span><span id="DShieldTUIApp-719"><a href="#DShieldTUIApp-719"><span class="linenos">719</span></a>                <span class="k">def</span><span class="w"> </span><span class="nf">stop_server_async</span><span class="p">():</span>
</span><span id="DShieldTUIApp-720"><a href="#DShieldTUIApp-720"><span class="linenos">720</span></a><span class="w">                    </span><span class="sd">&quot;&quot;&quot;Stop the TCP server asynchronously.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-721"><a href="#DShieldTUIApp-721"><span class="linenos">721</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-722"><a href="#DShieldTUIApp-722"><span class="linenos">722</span></a>                        <span class="c1"># Create a new event loop for this thread</span>
</span><span id="DShieldTUIApp-723"><a href="#DShieldTUIApp-723"><span class="linenos">723</span></a>                        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
</span><span id="DShieldTUIApp-724"><a href="#DShieldTUIApp-724"><span class="linenos">724</span></a>                        <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
</span><span id="DShieldTUIApp-725"><a href="#DShieldTUIApp-725"><span class="linenos">725</span></a>
</span><span id="DShieldTUIApp-726"><a href="#DShieldTUIApp-726"><span class="linenos">726</span></a>                        <span class="c1"># Stop the server</span>
</span><span id="DShieldTUIApp-727"><a href="#DShieldTUIApp-727"><span class="linenos">727</span></a>                        <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="o">.</span><span class="n">stop</span><span class="p">())</span>
</span><span id="DShieldTUIApp-728"><a href="#DShieldTUIApp-728"><span class="linenos">728</span></a>
</span><span id="DShieldTUIApp-729"><a href="#DShieldTUIApp-729"><span class="linenos">729</span></a>                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-730"><a href="#DShieldTUIApp-730"><span class="linenos">730</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error stopping TCP server in thread&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-731"><a href="#DShieldTUIApp-731"><span class="linenos">731</span></a>                    <span class="k">finally</span><span class="p">:</span>
</span><span id="DShieldTUIApp-732"><a href="#DShieldTUIApp-732"><span class="linenos">732</span></a>                        <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="DShieldTUIApp-733"><a href="#DShieldTUIApp-733"><span class="linenos">733</span></a>
</span><span id="DShieldTUIApp-734"><a href="#DShieldTUIApp-734"><span class="linenos">734</span></a>                <span class="c1"># Stop the server in a separate thread</span>
</span><span id="DShieldTUIApp-735"><a href="#DShieldTUIApp-735"><span class="linenos">735</span></a>                <span class="n">stop_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">stop_server_async</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="DShieldTUIApp-736"><a href="#DShieldTUIApp-736"><span class="linenos">736</span></a>                <span class="n">stop_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="DShieldTUIApp-737"><a href="#DShieldTUIApp-737"><span class="linenos">737</span></a>                <span class="n">stop_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># Wait up to 5 seconds for graceful shutdown</span>
</span><span id="DShieldTUIApp-738"><a href="#DShieldTUIApp-738"><span class="linenos">738</span></a>
</span><span id="DShieldTUIApp-739"><a href="#DShieldTUIApp-739"><span class="linenos">739</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-740"><a href="#DShieldTUIApp-740"><span class="linenos">740</span></a>
</span><span id="DShieldTUIApp-741"><a href="#DShieldTUIApp-741"><span class="linenos">741</span></a>            <span class="c1"># Stop the server thread if it exists</span>
</span><span id="DShieldTUIApp-742"><a href="#DShieldTUIApp-742"><span class="linenos">742</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;server_thread&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="DShieldTUIApp-743"><a href="#DShieldTUIApp-743"><span class="linenos">743</span></a>                <span class="c1"># The thread will stop when the event loop is closed</span>
</span><span id="DShieldTUIApp-744"><a href="#DShieldTUIApp-744"><span class="linenos">744</span></a>                <span class="k">pass</span>
</span><span id="DShieldTUIApp-745"><a href="#DShieldTUIApp-745"><span class="linenos">745</span></a>
</span><span id="DShieldTUIApp-746"><a href="#DShieldTUIApp-746"><span class="linenos">746</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="DShieldTUIApp-747"><a href="#DShieldTUIApp-747"><span class="linenos">747</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TCP server stopped successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-748"><a href="#DShieldTUIApp-748"><span class="linenos">748</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server stopped&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-749"><a href="#DShieldTUIApp-749"><span class="linenos">749</span></a>
</span><span id="DShieldTUIApp-750"><a href="#DShieldTUIApp-750"><span class="linenos">750</span></a>            <span class="c1"># Update server panel status</span>
</span><span id="DShieldTUIApp-751"><a href="#DShieldTUIApp-751"><span class="linenos">751</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_panel_status</span><span class="p">()</span>
</span><span id="DShieldTUIApp-752"><a href="#DShieldTUIApp-752"><span class="linenos">752</span></a>
</span><span id="DShieldTUIApp-753"><a href="#DShieldTUIApp-753"><span class="linenos">753</span></a>            <span class="c1"># Add log entry</span>
</span><span id="DShieldTUIApp-754"><a href="#DShieldTUIApp-754"><span class="linenos">754</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;TCP server stopped successfully&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-755"><a href="#DShieldTUIApp-755"><span class="linenos">755</span></a>
</span><span id="DShieldTUIApp-756"><a href="#DShieldTUIApp-756"><span class="linenos">756</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-757"><a href="#DShieldTUIApp-757"><span class="linenos">757</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error stopping TCP server&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-758"><a href="#DShieldTUIApp-758"><span class="linenos">758</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error stopping server: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-759"><a href="#DShieldTUIApp-759"><span class="linenos">759</span></a>
</span><span id="DShieldTUIApp-760"><a href="#DShieldTUIApp-760"><span class="linenos">760</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_mcp_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="DShieldTUIApp-761"><a href="#DShieldTUIApp-761"><span class="linenos">761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and initialize DShieldMCPServer instance.</span>
</span><span id="DShieldTUIApp-762"><a href="#DShieldTUIApp-762"><span class="linenos">762</span></a>
</span><span id="DShieldTUIApp-763"><a href="#DShieldTUIApp-763"><span class="linenos">763</span></a><span class="sd">        Returns:</span>
</span><span id="DShieldTUIApp-764"><a href="#DShieldTUIApp-764"><span class="linenos">764</span></a><span class="sd">            Initialized DShieldMCPServer instance</span>
</span><span id="DShieldTUIApp-765"><a href="#DShieldTUIApp-765"><span class="linenos">765</span></a>
</span><span id="DShieldTUIApp-766"><a href="#DShieldTUIApp-766"><span class="linenos">766</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-767"><a href="#DShieldTUIApp-767"><span class="linenos">767</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-768"><a href="#DShieldTUIApp-768"><span class="linenos">768</span></a>            <span class="c1"># Get the DShieldMCPServer class using late import</span>
</span><span id="DShieldTUIApp-769"><a href="#DShieldTUIApp-769"><span class="linenos">769</span></a>            <span class="n">DShieldMCPServer</span> <span class="o">=</span> <span class="n">_get_dshield_mcp_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp-770"><a href="#DShieldTUIApp-770"><span class="linenos">770</span></a>
</span><span id="DShieldTUIApp-771"><a href="#DShieldTUIApp-771"><span class="linenos">771</span></a>            <span class="c1"># Create server instance</span>
</span><span id="DShieldTUIApp-772"><a href="#DShieldTUIApp-772"><span class="linenos">772</span></a>            <span class="n">mcp_server</span> <span class="o">=</span> <span class="n">DShieldMCPServer</span><span class="p">()</span>
</span><span id="DShieldTUIApp-773"><a href="#DShieldTUIApp-773"><span class="linenos">773</span></a>
</span><span id="DShieldTUIApp-774"><a href="#DShieldTUIApp-774"><span class="linenos">774</span></a>            <span class="c1"># Initialize the server (this sets up all the components)</span>
</span><span id="DShieldTUIApp-775"><a href="#DShieldTUIApp-775"><span class="linenos">775</span></a>            <span class="c1"># Note: This is a synchronous call, but the server initialization</span>
</span><span id="DShieldTUIApp-776"><a href="#DShieldTUIApp-776"><span class="linenos">776</span></a>            <span class="c1"># should be done asynchronously in a real implementation</span>
</span><span id="DShieldTUIApp-777"><a href="#DShieldTUIApp-777"><span class="linenos">777</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created DShieldMCPServer instance&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-778"><a href="#DShieldTUIApp-778"><span class="linenos">778</span></a>
</span><span id="DShieldTUIApp-779"><a href="#DShieldTUIApp-779"><span class="linenos">779</span></a>            <span class="k">return</span> <span class="n">mcp_server</span>
</span><span id="DShieldTUIApp-780"><a href="#DShieldTUIApp-780"><span class="linenos">780</span></a>
</span><span id="DShieldTUIApp-781"><a href="#DShieldTUIApp-781"><span class="linenos">781</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-782"><a href="#DShieldTUIApp-782"><span class="linenos">782</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to create DShieldMCPServer&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-783"><a href="#DShieldTUIApp-783"><span class="linenos">783</span></a>            <span class="k">raise</span>
</span><span id="DShieldTUIApp-784"><a href="#DShieldTUIApp-784"><span class="linenos">784</span></a>
</span><span id="DShieldTUIApp-785"><a href="#DShieldTUIApp-785"><span class="linenos">785</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_generate_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-786"><a href="#DShieldTUIApp-786"><span class="linenos">786</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a new API key using the new API key management system.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-787"><a href="#DShieldTUIApp-787"><span class="linenos">787</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-788"><a href="#DShieldTUIApp-788"><span class="linenos">788</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-789"><a href="#DShieldTUIApp-789"><span class="linenos">789</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server must be running to generate API keys&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-790"><a href="#DShieldTUIApp-790"><span class="linenos">790</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-791"><a href="#DShieldTUIApp-791"><span class="linenos">791</span></a>
</span><span id="DShieldTUIApp-792"><a href="#DShieldTUIApp-792"><span class="linenos">792</span></a>            <span class="c1"># Open the API key generation screen</span>
</span><span id="DShieldTUIApp-793"><a href="#DShieldTUIApp-793"><span class="linenos">793</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">.screens.api_key_screen</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIKeyGenerationScreen</span>
</span><span id="DShieldTUIApp-794"><a href="#DShieldTUIApp-794"><span class="linenos">794</span></a>
</span><span id="DShieldTUIApp-795"><a href="#DShieldTUIApp-795"><span class="linenos">795</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">push_screen</span><span class="p">(</span><span class="n">APIKeyGenerationScreen</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_api_key_generated</span><span class="p">)</span>
</span><span id="DShieldTUIApp-796"><a href="#DShieldTUIApp-796"><span class="linenos">796</span></a>
</span><span id="DShieldTUIApp-797"><a href="#DShieldTUIApp-797"><span class="linenos">797</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-798"><a href="#DShieldTUIApp-798"><span class="linenos">798</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to open API key generation screen&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-799"><a href="#DShieldTUIApp-799"><span class="linenos">799</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to open API key generation screen: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-800"><a href="#DShieldTUIApp-800"><span class="linenos">800</span></a>
</span><span id="DShieldTUIApp-801"><a href="#DShieldTUIApp-801"><span class="linenos">801</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_on_api_key_generated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-802"><a href="#DShieldTUIApp-802"><span class="linenos">802</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API key generation completion.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-803"><a href="#DShieldTUIApp-803"><span class="linenos">803</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-804"><a href="#DShieldTUIApp-804"><span class="linenos">804</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-805"><a href="#DShieldTUIApp-805"><span class="linenos">805</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server must be running to generate API keys&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-806"><a href="#DShieldTUIApp-806"><span class="linenos">806</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-807"><a href="#DShieldTUIApp-807"><span class="linenos">807</span></a>
</span><span id="DShieldTUIApp-808"><a href="#DShieldTUIApp-808"><span class="linenos">808</span></a>            <span class="c1"># Get the connection manager from the TCP server</span>
</span><span id="DShieldTUIApp-809"><a href="#DShieldTUIApp-809"><span class="linenos">809</span></a>            <span class="n">connection_manager</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">,</span> <span class="s2">&quot;connection_manager&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="DShieldTUIApp-810"><a href="#DShieldTUIApp-810"><span class="linenos">810</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">connection_manager</span><span class="p">:</span>
</span><span id="DShieldTUIApp-811"><a href="#DShieldTUIApp-811"><span class="linenos">811</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Connection manager not available&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-812"><a href="#DShieldTUIApp-812"><span class="linenos">812</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-813"><a href="#DShieldTUIApp-813"><span class="linenos">813</span></a>
</span><span id="DShieldTUIApp-814"><a href="#DShieldTUIApp-814"><span class="linenos">814</span></a>            <span class="c1"># Generate the API key using the connection manager</span>
</span><span id="DShieldTUIApp-815"><a href="#DShieldTUIApp-815"><span class="linenos">815</span></a>            <span class="n">api_key</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection_manager</span><span class="o">.</span><span class="n">generate_api_key</span><span class="p">(</span>
</span><span id="DShieldTUIApp-816"><a href="#DShieldTUIApp-816"><span class="linenos">816</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">key_config</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
</span><span id="DShieldTUIApp-817"><a href="#DShieldTUIApp-817"><span class="linenos">817</span></a>                <span class="n">permissions</span><span class="o">=</span><span class="n">key_config</span><span class="p">[</span><span class="s2">&quot;permissions&quot;</span><span class="p">],</span>
</span><span id="DShieldTUIApp-818"><a href="#DShieldTUIApp-818"><span class="linenos">818</span></a>                <span class="n">expiration_days</span><span class="o">=</span><span class="n">key_config</span><span class="p">[</span><span class="s2">&quot;expiration_days&quot;</span><span class="p">],</span>
</span><span id="DShieldTUIApp-819"><a href="#DShieldTUIApp-819"><span class="linenos">819</span></a>                <span class="n">rate_limit</span><span class="o">=</span><span class="n">key_config</span><span class="p">[</span><span class="s2">&quot;rate_limit&quot;</span><span class="p">],</span>
</span><span id="DShieldTUIApp-820"><a href="#DShieldTUIApp-820"><span class="linenos">820</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-821"><a href="#DShieldTUIApp-821"><span class="linenos">821</span></a>
</span><span id="DShieldTUIApp-822"><a href="#DShieldTUIApp-822"><span class="linenos">822</span></a>            <span class="k">if</span> <span class="n">api_key</span><span class="p">:</span>
</span><span id="DShieldTUIApp-823"><a href="#DShieldTUIApp-823"><span class="linenos">823</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="DShieldTUIApp-824"><a href="#DShieldTUIApp-824"><span class="linenos">824</span></a>                    <span class="s2">&quot;Generated new API key&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="n">api_key</span><span class="o">.</span><span class="n">key_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">key_config</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="DShieldTUIApp-825"><a href="#DShieldTUIApp-825"><span class="linenos">825</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-826"><a href="#DShieldTUIApp-826"><span class="linenos">826</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span>
</span><span id="DShieldTUIApp-827"><a href="#DShieldTUIApp-827"><span class="linenos">827</span></a>                    <span class="sa">f</span><span class="s2">&quot;API Key generated: </span><span class="si">{</span><span class="n">key_config</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">api_key</span><span class="o">.</span><span class="n">key_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span>
</span><span id="DShieldTUIApp-828"><a href="#DShieldTUIApp-828"><span class="linenos">828</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-829"><a href="#DShieldTUIApp-829"><span class="linenos">829</span></a>
</span><span id="DShieldTUIApp-830"><a href="#DShieldTUIApp-830"><span class="linenos">830</span></a>                <span class="c1"># Add log entry for API key generation</span>
</span><span id="DShieldTUIApp-831"><a href="#DShieldTUIApp-831"><span class="linenos">831</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span>
</span><span id="DShieldTUIApp-832"><a href="#DShieldTUIApp-832"><span class="linenos">832</span></a>                    <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;API Key generated: </span><span class="si">{</span><span class="n">key_config</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">api_key</span><span class="o">.</span><span class="n">key_id</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="DShieldTUIApp-833"><a href="#DShieldTUIApp-833"><span class="linenos">833</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp-834"><a href="#DShieldTUIApp-834"><span class="linenos">834</span></a>
</span><span id="DShieldTUIApp-835"><a href="#DShieldTUIApp-835"><span class="linenos">835</span></a>                <span class="c1"># Update connection panel</span>
</span><span id="DShieldTUIApp-836"><a href="#DShieldTUIApp-836"><span class="linenos">836</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_update_connection_panel</span><span class="p">()</span>
</span><span id="DShieldTUIApp-837"><a href="#DShieldTUIApp-837"><span class="linenos">837</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DShieldTUIApp-838"><a href="#DShieldTUIApp-838"><span class="linenos">838</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Failed to generate API key&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-839"><a href="#DShieldTUIApp-839"><span class="linenos">839</span></a>
</span><span id="DShieldTUIApp-840"><a href="#DShieldTUIApp-840"><span class="linenos">840</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-841"><a href="#DShieldTUIApp-841"><span class="linenos">841</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate API key&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-842"><a href="#DShieldTUIApp-842"><span class="linenos">842</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to generate API key: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-843"><a href="#DShieldTUIApp-843"><span class="linenos">843</span></a>
</span><span id="DShieldTUIApp-844"><a href="#DShieldTUIApp-844"><span class="linenos">844</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ServerStatusUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-845"><a href="#DShieldTUIApp-845"><span class="linenos">845</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server status update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-846"><a href="#DShieldTUIApp-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">status</span>
</span><span id="DShieldTUIApp-847"><a href="#DShieldTUIApp-847"><span class="linenos">847</span></a>
</span><span id="DShieldTUIApp-848"><a href="#DShieldTUIApp-848"><span class="linenos">848</span></a>        <span class="c1"># Update status bar</span>
</span><span id="DShieldTUIApp-849"><a href="#DShieldTUIApp-849"><span class="linenos">849</span></a>        <span class="n">status_bar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#status-bar&quot;</span><span class="p">,</span> <span class="n">StatusBar</span><span class="p">)</span>
</span><span id="DShieldTUIApp-850"><a href="#DShieldTUIApp-850"><span class="linenos">850</span></a>        <span class="n">status_bar</span><span class="o">.</span><span class="n">update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">)</span>
</span><span id="DShieldTUIApp-851"><a href="#DShieldTUIApp-851"><span class="linenos">851</span></a>
</span><span id="DShieldTUIApp-852"><a href="#DShieldTUIApp-852"><span class="linenos">852</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ConnectionUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-853"><a href="#DShieldTUIApp-853"><span class="linenos">853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-854"><a href="#DShieldTUIApp-854"><span class="linenos">854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">connections</span>
</span><span id="DShieldTUIApp-855"><a href="#DShieldTUIApp-855"><span class="linenos">855</span></a>
</span><span id="DShieldTUIApp-856"><a href="#DShieldTUIApp-856"><span class="linenos">856</span></a>        <span class="c1"># Update connection panel</span>
</span><span id="DShieldTUIApp-857"><a href="#DShieldTUIApp-857"><span class="linenos">857</span></a>        <span class="n">connection_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connection-panel&quot;</span><span class="p">,</span> <span class="n">ConnectionPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-858"><a href="#DShieldTUIApp-858"><span class="linenos">858</span></a>        <span class="n">connection_panel</span><span class="o">.</span><span class="n">update_connections</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
</span><span id="DShieldTUIApp-859"><a href="#DShieldTUIApp-859"><span class="linenos">859</span></a>
</span><span id="DShieldTUIApp-860"><a href="#DShieldTUIApp-860"><span class="linenos">860</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_log_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">LogUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-861"><a href="#DShieldTUIApp-861"><span class="linenos">861</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle log update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-862"><a href="#DShieldTUIApp-862"><span class="linenos">862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_entries</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">log_entries</span><span class="p">)</span>
</span><span id="DShieldTUIApp-863"><a href="#DShieldTUIApp-863"><span class="linenos">863</span></a>
</span><span id="DShieldTUIApp-864"><a href="#DShieldTUIApp-864"><span class="linenos">864</span></a>        <span class="c1"># Update log panel</span>
</span><span id="DShieldTUIApp-865"><a href="#DShieldTUIApp-865"><span class="linenos">865</span></a>        <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-panel&quot;</span><span class="p">,</span> <span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-866"><a href="#DShieldTUIApp-866"><span class="linenos">866</span></a>        <span class="n">log_panel</span><span class="o">.</span><span class="n">add_log_entries</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">log_entries</span><span class="p">)</span>
</span><span id="DShieldTUIApp-867"><a href="#DShieldTUIApp-867"><span class="linenos">867</span></a>
</span><span id="DShieldTUIApp-868"><a href="#DShieldTUIApp-868"><span class="linenos">868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_api_key_generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-869"><a href="#DShieldTUIApp-869"><span class="linenos">869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API key generation message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-870"><a href="#DShieldTUIApp-870"><span class="linenos">870</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received API key generation message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-871"><a href="#DShieldTUIApp-871"><span class="linenos">871</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action_generate_api_key</span><span class="p">())</span>
</span><span id="DShieldTUIApp-872"><a href="#DShieldTUIApp-872"><span class="linenos">872</span></a>
</span><span id="DShieldTUIApp-873"><a href="#DShieldTUIApp-873"><span class="linenos">873</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_api_key_revoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-874"><a href="#DShieldTUIApp-874"><span class="linenos">874</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API key revocation message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-875"><a href="#DShieldTUIApp-875"><span class="linenos">875</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="DShieldTUIApp-876"><a href="#DShieldTUIApp-876"><span class="linenos">876</span></a>            <span class="s2">&quot;Received API key revocation message&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;api_key_id&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-877"><a href="#DShieldTUIApp-877"><span class="linenos">877</span></a>        <span class="p">)</span>
</span><span id="DShieldTUIApp-878"><a href="#DShieldTUIApp-878"><span class="linenos">878</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_revoke_api_key</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;api_key_id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)))</span>
</span><span id="DShieldTUIApp-879"><a href="#DShieldTUIApp-879"><span class="linenos">879</span></a>
</span><span id="DShieldTUIApp-880"><a href="#DShieldTUIApp-880"><span class="linenos">880</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-881"><a href="#DShieldTUIApp-881"><span class="linenos">881</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection disconnect message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-882"><a href="#DShieldTUIApp-882"><span class="linenos">882</span></a>        <span class="n">client_address</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;client_address&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="DShieldTUIApp-883"><a href="#DShieldTUIApp-883"><span class="linenos">883</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received connection disconnect message&quot;</span><span class="p">,</span> <span class="n">client_address</span><span class="o">=</span><span class="n">client_address</span><span class="p">)</span>
</span><span id="DShieldTUIApp-884"><a href="#DShieldTUIApp-884"><span class="linenos">884</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_connection</span><span class="p">(</span><span class="n">client_address</span><span class="p">))</span>
</span><span id="DShieldTUIApp-885"><a href="#DShieldTUIApp-885"><span class="linenos">885</span></a>
</span><span id="DShieldTUIApp-886"><a href="#DShieldTUIApp-886"><span class="linenos">886</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-887"><a href="#DShieldTUIApp-887"><span class="linenos">887</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection refresh message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-888"><a href="#DShieldTUIApp-888"><span class="linenos">888</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received connection refresh message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-889"><a href="#DShieldTUIApp-889"><span class="linenos">889</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_connection_panel</span><span class="p">()</span>
</span><span id="DShieldTUIApp-890"><a href="#DShieldTUIApp-890"><span class="linenos">890</span></a>
</span><span id="DShieldTUIApp-891"><a href="#DShieldTUIApp-891"><span class="linenos">891</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-892"><a href="#DShieldTUIApp-892"><span class="linenos">892</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection filter message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-893"><a href="#DShieldTUIApp-893"><span class="linenos">893</span></a>        <span class="n">filter_text</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;filter_text&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-894"><a href="#DShieldTUIApp-894"><span class="linenos">894</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received connection filter message&quot;</span><span class="p">,</span> <span class="n">filter_text</span><span class="o">=</span><span class="n">filter_text</span><span class="p">)</span>
</span><span id="DShieldTUIApp-895"><a href="#DShieldTUIApp-895"><span class="linenos">895</span></a>        <span class="c1"># Filtering is handled by the connection panel itself</span>
</span><span id="DShieldTUIApp-896"><a href="#DShieldTUIApp-896"><span class="linenos">896</span></a>
</span><span id="DShieldTUIApp-897"><a href="#DShieldTUIApp-897"><span class="linenos">897</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_disconnect_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-898"><a href="#DShieldTUIApp-898"><span class="linenos">898</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnect a specific connection.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-899"><a href="#DShieldTUIApp-899"><span class="linenos">899</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-900"><a href="#DShieldTUIApp-900"><span class="linenos">900</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">client_address</span><span class="p">:</span>
</span><span id="DShieldTUIApp-901"><a href="#DShieldTUIApp-901"><span class="linenos">901</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;No client address provided&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-902"><a href="#DShieldTUIApp-902"><span class="linenos">902</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-903"><a href="#DShieldTUIApp-903"><span class="linenos">903</span></a>
</span><span id="DShieldTUIApp-904"><a href="#DShieldTUIApp-904"><span class="linenos">904</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-905"><a href="#DShieldTUIApp-905"><span class="linenos">905</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server must be running to disconnect connections&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-906"><a href="#DShieldTUIApp-906"><span class="linenos">906</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-907"><a href="#DShieldTUIApp-907"><span class="linenos">907</span></a>
</span><span id="DShieldTUIApp-908"><a href="#DShieldTUIApp-908"><span class="linenos">908</span></a>            <span class="c1"># Get the connection manager from the TCP server</span>
</span><span id="DShieldTUIApp-909"><a href="#DShieldTUIApp-909"><span class="linenos">909</span></a>            <span class="n">connection_manager</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">,</span> <span class="s2">&quot;connection_manager&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="DShieldTUIApp-910"><a href="#DShieldTUIApp-910"><span class="linenos">910</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">connection_manager</span><span class="p">:</span>
</span><span id="DShieldTUIApp-911"><a href="#DShieldTUIApp-911"><span class="linenos">911</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Connection manager not available&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-912"><a href="#DShieldTUIApp-912"><span class="linenos">912</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-913"><a href="#DShieldTUIApp-913"><span class="linenos">913</span></a>
</span><span id="DShieldTUIApp-914"><a href="#DShieldTUIApp-914"><span class="linenos">914</span></a>            <span class="c1"># Find and disconnect the connection</span>
</span><span id="DShieldTUIApp-915"><a href="#DShieldTUIApp-915"><span class="linenos">915</span></a>            <span class="n">connections</span> <span class="o">=</span> <span class="n">connection_manager</span><span class="o">.</span><span class="n">get_connections_info</span><span class="p">()</span>
</span><span id="DShieldTUIApp-916"><a href="#DShieldTUIApp-916"><span class="linenos">916</span></a>            <span class="n">target_connection</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DShieldTUIApp-917"><a href="#DShieldTUIApp-917"><span class="linenos">917</span></a>
</span><span id="DShieldTUIApp-918"><a href="#DShieldTUIApp-918"><span class="linenos">918</span></a>            <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">connections</span><span class="p">:</span>
</span><span id="DShieldTUIApp-919"><a href="#DShieldTUIApp-919"><span class="linenos">919</span></a>                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_address&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">client_address</span><span class="p">):</span>
</span><span id="DShieldTUIApp-920"><a href="#DShieldTUIApp-920"><span class="linenos">920</span></a>                    <span class="n">target_connection</span> <span class="o">=</span> <span class="n">conn</span>
</span><span id="DShieldTUIApp-921"><a href="#DShieldTUIApp-921"><span class="linenos">921</span></a>                    <span class="k">break</span>
</span><span id="DShieldTUIApp-922"><a href="#DShieldTUIApp-922"><span class="linenos">922</span></a>
</span><span id="DShieldTUIApp-923"><a href="#DShieldTUIApp-923"><span class="linenos">923</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">target_connection</span><span class="p">:</span>
</span><span id="DShieldTUIApp-924"><a href="#DShieldTUIApp-924"><span class="linenos">924</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connection not found: </span><span class="si">{</span><span class="n">client_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-925"><a href="#DShieldTUIApp-925"><span class="linenos">925</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-926"><a href="#DShieldTUIApp-926"><span class="linenos">926</span></a>
</span><span id="DShieldTUIApp-927"><a href="#DShieldTUIApp-927"><span class="linenos">927</span></a>            <span class="c1"># Disconnect the connection</span>
</span><span id="DShieldTUIApp-928"><a href="#DShieldTUIApp-928"><span class="linenos">928</span></a>            <span class="c1"># This would typically involve finding the actual connection object</span>
</span><span id="DShieldTUIApp-929"><a href="#DShieldTUIApp-929"><span class="linenos">929</span></a>            <span class="c1"># and calling a disconnect method on it</span>
</span><span id="DShieldTUIApp-930"><a href="#DShieldTUIApp-930"><span class="linenos">930</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disconnecting connection&quot;</span><span class="p">,</span> <span class="n">client_address</span><span class="o">=</span><span class="n">client_address</span><span class="p">)</span>
</span><span id="DShieldTUIApp-931"><a href="#DShieldTUIApp-931"><span class="linenos">931</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Disconnected connection: </span><span class="si">{</span><span class="n">client_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-932"><a href="#DShieldTUIApp-932"><span class="linenos">932</span></a>
</span><span id="DShieldTUIApp-933"><a href="#DShieldTUIApp-933"><span class="linenos">933</span></a>            <span class="c1"># Add log entry</span>
</span><span id="DShieldTUIApp-934"><a href="#DShieldTUIApp-934"><span class="linenos">934</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Disconnected connection: </span><span class="si">{</span><span class="n">client_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-935"><a href="#DShieldTUIApp-935"><span class="linenos">935</span></a>
</span><span id="DShieldTUIApp-936"><a href="#DShieldTUIApp-936"><span class="linenos">936</span></a>            <span class="c1"># Update connection panel</span>
</span><span id="DShieldTUIApp-937"><a href="#DShieldTUIApp-937"><span class="linenos">937</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_connection_panel</span><span class="p">()</span>
</span><span id="DShieldTUIApp-938"><a href="#DShieldTUIApp-938"><span class="linenos">938</span></a>
</span><span id="DShieldTUIApp-939"><a href="#DShieldTUIApp-939"><span class="linenos">939</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-940"><a href="#DShieldTUIApp-940"><span class="linenos">940</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="DShieldTUIApp-941"><a href="#DShieldTUIApp-941"><span class="linenos">941</span></a>                <span class="s2">&quot;Failed to disconnect connection&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">client_address</span><span class="o">=</span><span class="n">client_address</span>
</span><span id="DShieldTUIApp-942"><a href="#DShieldTUIApp-942"><span class="linenos">942</span></a>            <span class="p">)</span>
</span><span id="DShieldTUIApp-943"><a href="#DShieldTUIApp-943"><span class="linenos">943</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to disconnect connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-944"><a href="#DShieldTUIApp-944"><span class="linenos">944</span></a>
</span><span id="DShieldTUIApp-945"><a href="#DShieldTUIApp-945"><span class="linenos">945</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_revoke_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-946"><a href="#DShieldTUIApp-946"><span class="linenos">946</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Revoke an API key.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-947"><a href="#DShieldTUIApp-947"><span class="linenos">947</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp-948"><a href="#DShieldTUIApp-948"><span class="linenos">948</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">key_id</span><span class="p">:</span>
</span><span id="DShieldTUIApp-949"><a href="#DShieldTUIApp-949"><span class="linenos">949</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;No API key ID provided&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-950"><a href="#DShieldTUIApp-950"><span class="linenos">950</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-951"><a href="#DShieldTUIApp-951"><span class="linenos">951</span></a>
</span><span id="DShieldTUIApp-952"><a href="#DShieldTUIApp-952"><span class="linenos">952</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp-953"><a href="#DShieldTUIApp-953"><span class="linenos">953</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Server must be running to revoke API keys&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-954"><a href="#DShieldTUIApp-954"><span class="linenos">954</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-955"><a href="#DShieldTUIApp-955"><span class="linenos">955</span></a>
</span><span id="DShieldTUIApp-956"><a href="#DShieldTUIApp-956"><span class="linenos">956</span></a>            <span class="c1"># Get the connection manager from the TCP server</span>
</span><span id="DShieldTUIApp-957"><a href="#DShieldTUIApp-957"><span class="linenos">957</span></a>            <span class="n">connection_manager</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcp_server</span><span class="p">,</span> <span class="s2">&quot;connection_manager&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="DShieldTUIApp-958"><a href="#DShieldTUIApp-958"><span class="linenos">958</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">connection_manager</span><span class="p">:</span>
</span><span id="DShieldTUIApp-959"><a href="#DShieldTUIApp-959"><span class="linenos">959</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Connection manager not available&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-960"><a href="#DShieldTUIApp-960"><span class="linenos">960</span></a>                <span class="k">return</span>
</span><span id="DShieldTUIApp-961"><a href="#DShieldTUIApp-961"><span class="linenos">961</span></a>
</span><span id="DShieldTUIApp-962"><a href="#DShieldTUIApp-962"><span class="linenos">962</span></a>            <span class="c1"># Revoke the API key</span>
</span><span id="DShieldTUIApp-963"><a href="#DShieldTUIApp-963"><span class="linenos">963</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection_manager</span><span class="o">.</span><span class="n">delete_api_key</span><span class="p">(</span><span class="n">key_id</span><span class="p">)</span>
</span><span id="DShieldTUIApp-964"><a href="#DShieldTUIApp-964"><span class="linenos">964</span></a>            <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="DShieldTUIApp-965"><a href="#DShieldTUIApp-965"><span class="linenos">965</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Revoked API key&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="n">key_id</span><span class="p">)</span>
</span><span id="DShieldTUIApp-966"><a href="#DShieldTUIApp-966"><span class="linenos">966</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API key </span><span class="si">{</span><span class="n">key_id</span><span class="si">}</span><span class="s2"> revoked successfully&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="DShieldTUIApp-967"><a href="#DShieldTUIApp-967"><span class="linenos">967</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;API key </span><span class="si">{</span><span class="n">key_id</span><span class="si">}</span><span class="s2"> revoked&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-968"><a href="#DShieldTUIApp-968"><span class="linenos">968</span></a>                <span class="c1"># Update connection panel</span>
</span><span id="DShieldTUIApp-969"><a href="#DShieldTUIApp-969"><span class="linenos">969</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_update_connection_panel</span><span class="p">()</span>
</span><span id="DShieldTUIApp-970"><a href="#DShieldTUIApp-970"><span class="linenos">970</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DShieldTUIApp-971"><a href="#DShieldTUIApp-971"><span class="linenos">971</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to revoke API key </span><span class="si">{</span><span class="n">key_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp-972"><a href="#DShieldTUIApp-972"><span class="linenos">972</span></a>
</span><span id="DShieldTUIApp-973"><a href="#DShieldTUIApp-973"><span class="linenos">973</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp-974"><a href="#DShieldTUIApp-974"><span class="linenos">974</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to revoke API key&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp-975"><a href="#DShieldTUIApp-975"><span class="linenos">975</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to revoke API key: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="DShieldTUIApp-976"><a href="#DShieldTUIApp-976"><span class="linenos">976</span></a>
</span><span id="DShieldTUIApp-977"><a href="#DShieldTUIApp-977"><span class="linenos">977</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_running</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">running</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-978"><a href="#DShieldTUIApp-978"><span class="linenos">978</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server running state changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-979"><a href="#DShieldTUIApp-979"><span class="linenos">979</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server running state changed&quot;</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="n">running</span><span class="p">)</span>
</span><span id="DShieldTUIApp-980"><a href="#DShieldTUIApp-980"><span class="linenos">980</span></a>
</span><span id="DShieldTUIApp-981"><a href="#DShieldTUIApp-981"><span class="linenos">981</span></a>        <span class="c1"># Update server panel</span>
</span><span id="DShieldTUIApp-982"><a href="#DShieldTUIApp-982"><span class="linenos">982</span></a>        <span class="n">server_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-panel&quot;</span><span class="p">,</span> <span class="n">ServerPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp-983"><a href="#DShieldTUIApp-983"><span class="linenos">983</span></a>        <span class="n">server_panel</span><span class="o">.</span><span class="n">update_server_status</span><span class="p">(</span><span class="n">running</span><span class="p">)</span>
</span><span id="DShieldTUIApp-984"><a href="#DShieldTUIApp-984"><span class="linenos">984</span></a>
</span><span id="DShieldTUIApp-985"><a href="#DShieldTUIApp-985"><span class="linenos">985</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-986"><a href="#DShieldTUIApp-986"><span class="linenos">986</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server port changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-987"><a href="#DShieldTUIApp-987"><span class="linenos">987</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server port changed&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</span><span id="DShieldTUIApp-988"><a href="#DShieldTUIApp-988"><span class="linenos">988</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="DShieldTUIApp-989"><a href="#DShieldTUIApp-989"><span class="linenos">989</span></a>
</span><span id="DShieldTUIApp-990"><a href="#DShieldTUIApp-990"><span class="linenos">990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp-991"><a href="#DShieldTUIApp-991"><span class="linenos">991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server address changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp-992"><a href="#DShieldTUIApp-992"><span class="linenos">992</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server address changed&quot;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">)</span>
</span><span id="DShieldTUIApp-993"><a href="#DShieldTUIApp-993"><span class="linenos">993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Main TUI application for DShield MCP Server.</p>

<p>This class provides the main terminal user interface with panels for
connection management, server control, and log monitoring.</p>
</div>


                            <div id="DShieldTUIApp.CSS" class="classattr">
                                <div class="attr variable">
            <span class="name">CSS</span>        =
<input id="DShieldTUIApp.CSS-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="DShieldTUIApp.CSS-view-value"></label><span class="default_value">&#39;\n    Screen {\n        layout: vertical;\n    }\n\n    #main-container {\n        layout: horizontal;\n        height: 1fr;\n    }\n\n    #left-panel {\n        width: 1fr;\n        layout: vertical;\n    }\n\n    #right-panel {\n        width: 1fr;\n        layout: vertical;\n    }\n\n    .panel {\n        border: solid $primary;\n        margin: 1;\n        padding: 1;\n    }\n\n    .connection-item {\n        margin: 1;\n        padding: 1;\n        border: solid $secondary;\n    }\n\n    .server-controls {\n        layout: horizontal;\n        height: auto;\n    }\n\n    .log-entry {\n        margin: 1;\n        padding: 1;\n    }\n\n    .log-entry.error {\n        color: $error;\n    }\n\n    .log-entry.warning {\n        color: $warning;\n    }\n\n    .log-entry.info {\n        color: $accent;\n    }\n    &#39;</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.CSS"></a>
    
            <div class="docstring"><p>Inline CSS, useful for quick scripts. This is loaded after CSS_PATH,
and therefore takes priority in the event of a specificity clash.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.config_path" class="classattr">
                                <div class="attr variable">
            <span class="name">config_path</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.config_path"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.user_config" class="classattr">
                                <div class="attr variable">
            <span class="name">user_config</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.user_config"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.logger"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.tcp_server" class="classattr">
                                <div class="attr variable">
            <span class="name">tcp_server</span><span class="annotation">: <a href="tcp_server.html#EnhancedTCPServer">src.tcp_server.EnhancedTCPServer</a> | None</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.tcp_server"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_process" class="classattr">
                                <div class="attr variable">
            <span class="name">server_process</span><span class="annotation">: subprocess.Popen[bytes] | None</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_process"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_thread" class="classattr">
                                <div class="attr variable">
            <span class="name">server_thread</span><span class="annotation">: threading.Thread | None</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_thread"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_running" class="classattr">
                                <div class="attr variable">
            <span class="name">server_running</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_running"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_port" class="classattr">
                                <div class="attr variable">
            <span class="name">server_port</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_port"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_address" class="classattr">
                                <div class="attr variable">
            <span class="name">server_address</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_address"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.current_panel" class="classattr">
                                <div class="attr variable">
            <span class="name">current_panel</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.current_panel"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.log_entries" class="classattr">
                                <div class="attr variable">
            <span class="name">log_entries</span><span class="annotation">: list[dict[str, typing.Any]]</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.log_entries"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.connections" class="classattr">
                                <div class="attr variable">
            <span class="name">connections</span><span class="annotation">: list[dict[str, typing.Any]]</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.connections"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.server_status" class="classattr">
                                <div class="attr variable">
            <span class="name">server_status</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.server_status"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.metrics_subscriber" class="classattr">
                                <div class="attr variable">
            <span class="name">metrics_subscriber</span><span class="annotation">: src.tui.metrics_subscriber.MetricsSubscriber | None</span>

        
    </div>
    <a class="headerlink" href="#DShieldTUIApp.metrics_subscriber"></a>
    
    

                            </div>
                            <div id="DShieldTUIApp.compose" class="classattr">
                                        <input id="DShieldTUIApp.compose-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compose</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">textual</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.compose-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.compose"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.compose-192"><a href="#DShieldTUIApp.compose-192"><span class="linenos">192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="DShieldTUIApp.compose-193"><a href="#DShieldTUIApp.compose-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the TUI layout.</span>
</span><span id="DShieldTUIApp.compose-194"><a href="#DShieldTUIApp.compose-194"><span class="linenos">194</span></a>
</span><span id="DShieldTUIApp.compose-195"><a href="#DShieldTUIApp.compose-195"><span class="linenos">195</span></a><span class="sd">        Returns:</span>
</span><span id="DShieldTUIApp.compose-196"><a href="#DShieldTUIApp.compose-196"><span class="linenos">196</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="DShieldTUIApp.compose-197"><a href="#DShieldTUIApp.compose-197"><span class="linenos">197</span></a>
</span><span id="DShieldTUIApp.compose-198"><a href="#DShieldTUIApp.compose-198"><span class="linenos">198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.compose-199"><a href="#DShieldTUIApp.compose-199"><span class="linenos">199</span></a>        <span class="k">yield</span> <span class="n">Header</span><span class="p">()</span>
</span><span id="DShieldTUIApp.compose-200"><a href="#DShieldTUIApp.compose-200"><span class="linenos">200</span></a>
</span><span id="DShieldTUIApp.compose-201"><a href="#DShieldTUIApp.compose-201"><span class="linenos">201</span></a>        <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;main-container&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp.compose-202"><a href="#DShieldTUIApp.compose-202"><span class="linenos">202</span></a>            <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;left-panel&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp.compose-203"><a href="#DShieldTUIApp.compose-203"><span class="linenos">203</span></a>                <span class="k">yield</span> <span class="n">ConnectionPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;connection-panel&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.compose-204"><a href="#DShieldTUIApp.compose-204"><span class="linenos">204</span></a>                <span class="k">yield</span> <span class="n">ServerPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-panel&quot;</span><span class="p">,</span> <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="DShieldTUIApp.compose-205"><a href="#DShieldTUIApp.compose-205"><span class="linenos">205</span></a>
</span><span id="DShieldTUIApp.compose-206"><a href="#DShieldTUIApp.compose-206"><span class="linenos">206</span></a>            <span class="k">with</span> <span class="n">Container</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;right-panel&quot;</span><span class="p">):</span>
</span><span id="DShieldTUIApp.compose-207"><a href="#DShieldTUIApp.compose-207"><span class="linenos">207</span></a>                <span class="k">yield</span> <span class="n">LiveMetricsPanel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;live-metrics-panel&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.compose-208"><a href="#DShieldTUIApp.compose-208"><span class="linenos">208</span></a>                <span class="k">yield</span> <span class="n">LogPanel</span><span class="p">(</span>
</span><span id="DShieldTUIApp.compose-209"><a href="#DShieldTUIApp.compose-209"><span class="linenos">209</span></a>                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;log-panel&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">log_history_size</span>
</span><span id="DShieldTUIApp.compose-210"><a href="#DShieldTUIApp.compose-210"><span class="linenos">210</span></a>                <span class="p">)</span>
</span><span id="DShieldTUIApp.compose-211"><a href="#DShieldTUIApp.compose-211"><span class="linenos">211</span></a>
</span><span id="DShieldTUIApp.compose-212"><a href="#DShieldTUIApp.compose-212"><span class="linenos">212</span></a>        <span class="k">yield</span> <span class="n">StatusBar</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;status-bar&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.compose-213"><a href="#DShieldTUIApp.compose-213"><span class="linenos">213</span></a>        <span class="k">yield</span> <span class="n">Footer</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Compose the TUI layout.</p>

<p>Returns:
    ComposeResult: The composed UI elements</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_mount" class="classattr">
                                        <input id="DShieldTUIApp.on_mount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_mount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_mount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_mount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_mount-215"><a href="#DShieldTUIApp.on_mount-215"><span class="linenos">215</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_mount-216"><a href="#DShieldTUIApp.on_mount-216"><span class="linenos">216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle application mount event.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_mount-217"><a href="#DShieldTUIApp.on_mount-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TUI application mounted&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_mount-218"><a href="#DShieldTUIApp.on_mount-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;DShield MCP Server Manager&quot;</span>
</span><span id="DShieldTUIApp.on_mount-219"><a href="#DShieldTUIApp.on_mount-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="DShieldTUIApp.on_mount-220"><a href="#DShieldTUIApp.on_mount-220"><span class="linenos">220</span></a>
</span><span id="DShieldTUIApp.on_mount-221"><a href="#DShieldTUIApp.on_mount-221"><span class="linenos">221</span></a>        <span class="c1"># Mark UI as mounted</span>
</span><span id="DShieldTUIApp.on_mount-222"><a href="#DShieldTUIApp.on_mount-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mounted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="DShieldTUIApp.on_mount-223"><a href="#DShieldTUIApp.on_mount-223"><span class="linenos">223</span></a>
</span><span id="DShieldTUIApp.on_mount-224"><a href="#DShieldTUIApp.on_mount-224"><span class="linenos">224</span></a>        <span class="c1"># Initialize metrics subscriber</span>
</span><span id="DShieldTUIApp.on_mount-225"><a href="#DShieldTUIApp.on_mount-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_metrics_subscriber</span><span class="p">()</span>
</span><span id="DShieldTUIApp.on_mount-226"><a href="#DShieldTUIApp.on_mount-226"><span class="linenos">226</span></a>
</span><span id="DShieldTUIApp.on_mount-227"><a href="#DShieldTUIApp.on_mount-227"><span class="linenos">227</span></a>        <span class="c1"># Start update task in a separate thread</span>
</span><span id="DShieldTUIApp.on_mount-228"><a href="#DShieldTUIApp.on_mount-228"><span class="linenos">228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_periodic_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_mount-229"><a href="#DShieldTUIApp.on_mount-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="DShieldTUIApp.on_mount-230"><a href="#DShieldTUIApp.on_mount-230"><span class="linenos">230</span></a>
</span><span id="DShieldTUIApp.on_mount-231"><a href="#DShieldTUIApp.on_mount-231"><span class="linenos">231</span></a>        <span class="c1"># Auto-start server if configured</span>
</span><span id="DShieldTUIApp.on_mount-232"><a href="#DShieldTUIApp.on_mount-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_config</span><span class="o">.</span><span class="n">tui_settings</span><span class="o">.</span><span class="n">server_management</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;auto_start_server&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="DShieldTUIApp.on_mount-233"><a href="#DShieldTUIApp.on_mount-233"><span class="linenos">233</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_restart_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp.on_mount-234"><a href="#DShieldTUIApp.on_mount-234"><span class="linenos">234</span></a>
</span><span id="DShieldTUIApp.on_mount-235"><a href="#DShieldTUIApp.on_mount-235"><span class="linenos">235</span></a>        <span class="c1"># Add a test log entry to verify log panel is working</span>
</span><span id="DShieldTUIApp.on_mount-236"><a href="#DShieldTUIApp.on_mount-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;TUI application started successfully&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle application mount event.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_unmount" class="classattr">
                                        <input id="DShieldTUIApp.on_unmount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_unmount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_unmount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_unmount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_unmount-238"><a href="#DShieldTUIApp.on_unmount-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_unmount-239"><a href="#DShieldTUIApp.on_unmount-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle application unmount event.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_unmount-240"><a href="#DShieldTUIApp.on_unmount-240"><span class="linenos">240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TUI application unmounting&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_unmount-241"><a href="#DShieldTUIApp.on_unmount-241"><span class="linenos">241</span></a>
</span><span id="DShieldTUIApp.on_unmount-242"><a href="#DShieldTUIApp.on_unmount-242"><span class="linenos">242</span></a>        <span class="c1"># Stop metrics subscriber</span>
</span><span id="DShieldTUIApp.on_unmount-243"><a href="#DShieldTUIApp.on_unmount-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_unmount-244"><a href="#DShieldTUIApp.on_unmount-244"><span class="linenos">244</span></a>            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics_subscriber</span><span class="o">.</span><span class="n">stop</span><span class="p">())</span>
</span><span id="DShieldTUIApp.on_unmount-245"><a href="#DShieldTUIApp.on_unmount-245"><span class="linenos">245</span></a>
</span><span id="DShieldTUIApp.on_unmount-246"><a href="#DShieldTUIApp.on_unmount-246"><span class="linenos">246</span></a>        <span class="c1"># Stop update task</span>
</span><span id="DShieldTUIApp.on_unmount-247"><a href="#DShieldTUIApp.on_unmount-247"><span class="linenos">247</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="DShieldTUIApp.on_unmount-248"><a href="#DShieldTUIApp.on_unmount-248"><span class="linenos">248</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span>
</span><span id="DShieldTUIApp.on_unmount-249"><a href="#DShieldTUIApp.on_unmount-249"><span class="linenos">249</span></a>            <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="p">,</span> <span class="s2">&quot;is_alive&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_unmount-250"><a href="#DShieldTUIApp.on_unmount-250"><span class="linenos">250</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_task</span><span class="o">.</span><span class="n">is_alive</span><span class="p">()</span>
</span><span id="DShieldTUIApp.on_unmount-251"><a href="#DShieldTUIApp.on_unmount-251"><span class="linenos">251</span></a>        <span class="p">):</span>
</span><span id="DShieldTUIApp.on_unmount-252"><a href="#DShieldTUIApp.on_unmount-252"><span class="linenos">252</span></a>            <span class="c1"># The thread will stop when the daemon process exits</span>
</span><span id="DShieldTUIApp.on_unmount-253"><a href="#DShieldTUIApp.on_unmount-253"><span class="linenos">253</span></a>            <span class="k">pass</span>
</span><span id="DShieldTUIApp.on_unmount-254"><a href="#DShieldTUIApp.on_unmount-254"><span class="linenos">254</span></a>
</span><span id="DShieldTUIApp.on_unmount-255"><a href="#DShieldTUIApp.on_unmount-255"><span class="linenos">255</span></a>        <span class="c1"># Stop server</span>
</span><span id="DShieldTUIApp.on_unmount-256"><a href="#DShieldTUIApp.on_unmount-256"><span class="linenos">256</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_unmount-257"><a href="#DShieldTUIApp.on_unmount-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_stop_server</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle application unmount event.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_quit" class="classattr">
                                        <input id="DShieldTUIApp.action_quit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_quit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_quit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_quit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_quit-518"><a href="#DShieldTUIApp.action_quit-518"><span class="linenos">518</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_quit-519"><a href="#DShieldTUIApp.action_quit-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Quit the application.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_quit-520"><a href="#DShieldTUIApp.action_quit-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Quitting TUI application&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_quit-521"><a href="#DShieldTUIApp.action_quit-521"><span class="linenos">521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Quit the application.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_restart_server" class="classattr">
                                        <input id="DShieldTUIApp.action_restart_server-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_restart_server</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_restart_server-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_restart_server"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_restart_server-523"><a href="#DShieldTUIApp.action_restart_server-523"><span class="linenos">523</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_restart_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_restart_server-524"><a href="#DShieldTUIApp.action_restart_server-524"><span class="linenos">524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Restart the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_restart_server-525"><a href="#DShieldTUIApp.action_restart_server-525"><span class="linenos">525</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Restarting TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_restart_server-526"><a href="#DShieldTUIApp.action_restart_server-526"><span class="linenos">526</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Restarting TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_restart_server-527"><a href="#DShieldTUIApp.action_restart_server-527"><span class="linenos">527</span></a>
</span><span id="DShieldTUIApp.action_restart_server-528"><a href="#DShieldTUIApp.action_restart_server-528"><span class="linenos">528</span></a>        <span class="c1"># Stop existing server</span>
</span><span id="DShieldTUIApp.action_restart_server-529"><a href="#DShieldTUIApp.action_restart_server-529"><span class="linenos">529</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_restart_server-530"><a href="#DShieldTUIApp.action_restart_server-530"><span class="linenos">530</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">action_stop_server</span><span class="p">()</span>
</span><span id="DShieldTUIApp.action_restart_server-531"><a href="#DShieldTUIApp.action_restart_server-531"><span class="linenos">531</span></a>
</span><span id="DShieldTUIApp.action_restart_server-532"><a href="#DShieldTUIApp.action_restart_server-532"><span class="linenos">532</span></a>        <span class="c1"># Start new server</span>
</span><span id="DShieldTUIApp.action_restart_server-533"><a href="#DShieldTUIApp.action_restart_server-533"><span class="linenos">533</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_server</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Restart the TCP server.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_stop_server" class="classattr">
                                        <input id="DShieldTUIApp.action_stop_server-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_stop_server</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_stop_server-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_stop_server"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_stop_server-535"><a href="#DShieldTUIApp.action_stop_server-535"><span class="linenos">535</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_stop_server-536"><a href="#DShieldTUIApp.action_stop_server-536"><span class="linenos">536</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the TCP server.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_stop_server-537"><a href="#DShieldTUIApp.action_stop_server-537"><span class="linenos">537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_stop_server-538"><a href="#DShieldTUIApp.action_stop_server-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Stopping TCP server&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_stop_server-539"><a href="#DShieldTUIApp.action_stop_server-539"><span class="linenos">539</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_server</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Stop the TCP server.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_generate_api_key" class="classattr">
                                        <input id="DShieldTUIApp.action_generate_api_key-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">action_generate_api_key</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_generate_api_key-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_generate_api_key"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_generate_api_key-541"><a href="#DShieldTUIApp.action_generate_api_key-541"><span class="linenos">541</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">action_generate_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_generate_api_key-542"><a href="#DShieldTUIApp.action_generate_api_key-542"><span class="linenos">542</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a new API key.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_generate_api_key-543"><a href="#DShieldTUIApp.action_generate_api_key-543"><span class="linenos">543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating new API key&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_generate_api_key-544"><a href="#DShieldTUIApp.action_generate_api_key-544"><span class="linenos">544</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_api_key</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Generate a new API key.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_test_log" class="classattr">
                                        <input id="DShieldTUIApp.action_test_log-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_test_log</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_test_log-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_test_log"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_test_log-546"><a href="#DShieldTUIApp.action_test_log-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_test_log</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_test_log-547"><a href="#DShieldTUIApp.action_test_log-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test log entry creation.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_test_log-548"><a href="#DShieldTUIApp.action_test_log-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Testing log entry creation&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_test_log-549"><a href="#DShieldTUIApp.action_test_log-549"><span class="linenos">549</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_log_entry</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;Test log entry created&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_test_log-550"><a href="#DShieldTUIApp.action_test_log-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Test log entry added&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Test log entry creation.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_clear_logs" class="classattr">
                                        <input id="DShieldTUIApp.action_clear_logs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_clear_logs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_clear_logs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_clear_logs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_clear_logs-552"><a href="#DShieldTUIApp.action_clear_logs-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_clear_logs-553"><a href="#DShieldTUIApp.action_clear_logs-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the log display.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_clear_logs-554"><a href="#DShieldTUIApp.action_clear_logs-554"><span class="linenos">554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Clearing logs&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_clear_logs-555"><a href="#DShieldTUIApp.action_clear_logs-555"><span class="linenos">555</span></a>        <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-panel&quot;</span><span class="p">,</span> <span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_clear_logs-556"><a href="#DShieldTUIApp.action_clear_logs-556"><span class="linenos">556</span></a>        <span class="n">log_panel</span><span class="o">.</span><span class="n">clear_logs</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Clear the log display.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_show_help" class="classattr">
                                        <input id="DShieldTUIApp.action_show_help-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_show_help</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_show_help-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_show_help"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_show_help-558"><a href="#DShieldTUIApp.action_show_help-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_show_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_show_help-559"><a href="#DShieldTUIApp.action_show_help-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show help information.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_show_help-560"><a href="#DShieldTUIApp.action_show_help-560"><span class="linenos">560</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Showing help&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_show_help-561"><a href="#DShieldTUIApp.action_show_help-561"><span class="linenos">561</span></a>        <span class="c1"># This would show a help dialog</span>
</span><span id="DShieldTUIApp.action_show_help-562"><a href="#DShieldTUIApp.action_show_help-562"><span class="linenos">562</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Help: Use Tab to switch panels, Ctrl+C to quit&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Show help information.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_switch_panel" class="classattr">
                                        <input id="DShieldTUIApp.action_switch_panel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_switch_panel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_switch_panel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_switch_panel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_switch_panel-564"><a href="#DShieldTUIApp.action_switch_panel-564"><span class="linenos">564</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_switch_panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_switch_panel-565"><a href="#DShieldTUIApp.action_switch_panel-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Switch between panels.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_switch_panel-566"><a href="#DShieldTUIApp.action_switch_panel-566"><span class="linenos">566</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
</span><span id="DShieldTUIApp.action_switch_panel-567"><a href="#DShieldTUIApp.action_switch_panel-567"><span class="linenos">567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Switched to panel&quot;</span><span class="p">,</span> <span class="n">panel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_panel</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Switch between panels.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.action_focus_filter" class="classattr">
                                        <input id="DShieldTUIApp.action_focus_filter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">action_focus_filter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.action_focus_filter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.action_focus_filter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.action_focus_filter-569"><a href="#DShieldTUIApp.action_focus_filter-569"><span class="linenos">569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">action_focus_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_focus_filter-570"><a href="#DShieldTUIApp.action_focus_filter-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Focus the log filter input field.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.action_focus_filter-571"><a href="#DShieldTUIApp.action_focus_filter-571"><span class="linenos">571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Focusing log filter&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_focus_filter-572"><a href="#DShieldTUIApp.action_focus_filter-572"><span class="linenos">572</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_focus_filter-573"><a href="#DShieldTUIApp.action_focus_filter-573"><span class="linenos">573</span></a>            <span class="c1"># Find the search input in the log panel</span>
</span><span id="DShieldTUIApp.action_focus_filter-574"><a href="#DShieldTUIApp.action_focus_filter-574"><span class="linenos">574</span></a>            <span class="n">search_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#search-input&quot;</span><span class="p">,</span> <span class="n">Input</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_focus_filter-575"><a href="#DShieldTUIApp.action_focus_filter-575"><span class="linenos">575</span></a>            <span class="n">search_input</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>
</span><span id="DShieldTUIApp.action_focus_filter-576"><a href="#DShieldTUIApp.action_focus_filter-576"><span class="linenos">576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Filter focused - type to search logs&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="DShieldTUIApp.action_focus_filter-577"><a href="#DShieldTUIApp.action_focus_filter-577"><span class="linenos">577</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="DShieldTUIApp.action_focus_filter-578"><a href="#DShieldTUIApp.action_focus_filter-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to focus filter&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="DShieldTUIApp.action_focus_filter-579"><a href="#DShieldTUIApp.action_focus_filter-579"><span class="linenos">579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Failed to focus filter&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Focus the log filter input field.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_server_start" class="classattr">
                                        <input id="DShieldTUIApp.on_server_start-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_server_start</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">server_panel</span><span class="o">.</span><span class="n">ServerStart</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_server_start-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_server_start"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_server_start-581"><a href="#DShieldTUIApp.on_server_start-581"><span class="linenos">581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerStart</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_server_start-582"><a href="#DShieldTUIApp.on_server_start-582"><span class="linenos">582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server start message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_server_start-583"><a href="#DShieldTUIApp.on_server_start-583"><span class="linenos">583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server start message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_server_start-584"><a href="#DShieldTUIApp.on_server_start-584"><span class="linenos">584</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span></pre></div>


            <div class="docstring"><p>Handle server start message from server panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_server_stop" class="classattr">
                                        <input id="DShieldTUIApp.on_server_stop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_server_stop</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">server_panel</span><span class="o">.</span><span class="n">ServerStop</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_server_stop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_server_stop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_server_stop-586"><a href="#DShieldTUIApp.on_server_stop-586"><span class="linenos">586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerStop</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_server_stop-587"><a href="#DShieldTUIApp.on_server_stop-587"><span class="linenos">587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server stop message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_server_stop-588"><a href="#DShieldTUIApp.on_server_stop-588"><span class="linenos">588</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server stop message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_server_stop-589"><a href="#DShieldTUIApp.on_server_stop-589"><span class="linenos">589</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span></pre></div>


            <div class="docstring"><p>Handle server stop message from server panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_server_restart" class="classattr">
                                        <input id="DShieldTUIApp.on_server_restart-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_server_restart</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">server_panel</span><span class="o">.</span><span class="n">ServerRestart</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_server_restart-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_server_restart"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_server_restart-591"><a href="#DShieldTUIApp.on_server_restart-591"><span class="linenos">591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_restart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">ServerRestart</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_server_restart-592"><a href="#DShieldTUIApp.on_server_restart-592"><span class="linenos">592</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server restart message from server panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_server_restart-593"><a href="#DShieldTUIApp.on_server_restart-593"><span class="linenos">593</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received server restart message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_server_restart-594"><a href="#DShieldTUIApp.on_server_restart-594"><span class="linenos">594</span></a>        <span class="c1"># Server panel now handles this directly via process manager</span>
</span></pre></div>


            <div class="docstring"><p>Handle server restart message from server panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_server_status_update" class="classattr">
                                        <input id="DShieldTUIApp.on_server_status_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_server_status_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">tui_app</span><span class="o">.</span><span class="n">ServerStatusUpdate</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_server_status_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_server_status_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_server_status_update-844"><a href="#DShieldTUIApp.on_server_status_update-844"><span class="linenos">844</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_server_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ServerStatusUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_server_status_update-845"><a href="#DShieldTUIApp.on_server_status_update-845"><span class="linenos">845</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server status update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_server_status_update-846"><a href="#DShieldTUIApp.on_server_status_update-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">status</span>
</span><span id="DShieldTUIApp.on_server_status_update-847"><a href="#DShieldTUIApp.on_server_status_update-847"><span class="linenos">847</span></a>
</span><span id="DShieldTUIApp.on_server_status_update-848"><a href="#DShieldTUIApp.on_server_status_update-848"><span class="linenos">848</span></a>        <span class="c1"># Update status bar</span>
</span><span id="DShieldTUIApp.on_server_status_update-849"><a href="#DShieldTUIApp.on_server_status_update-849"><span class="linenos">849</span></a>        <span class="n">status_bar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#status-bar&quot;</span><span class="p">,</span> <span class="n">StatusBar</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_server_status_update-850"><a href="#DShieldTUIApp.on_server_status_update-850"><span class="linenos">850</span></a>        <span class="n">status_bar</span><span class="o">.</span><span class="n">update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle server status update message.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_connection_update" class="classattr">
                                        <input id="DShieldTUIApp.on_connection_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_connection_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">tui_app</span><span class="o">.</span><span class="n">ConnectionUpdate</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_connection_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_connection_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_connection_update-852"><a href="#DShieldTUIApp.on_connection_update-852"><span class="linenos">852</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ConnectionUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_connection_update-853"><a href="#DShieldTUIApp.on_connection_update-853"><span class="linenos">853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_connection_update-854"><a href="#DShieldTUIApp.on_connection_update-854"><span class="linenos">854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">connections</span>
</span><span id="DShieldTUIApp.on_connection_update-855"><a href="#DShieldTUIApp.on_connection_update-855"><span class="linenos">855</span></a>
</span><span id="DShieldTUIApp.on_connection_update-856"><a href="#DShieldTUIApp.on_connection_update-856"><span class="linenos">856</span></a>        <span class="c1"># Update connection panel</span>
</span><span id="DShieldTUIApp.on_connection_update-857"><a href="#DShieldTUIApp.on_connection_update-857"><span class="linenos">857</span></a>        <span class="n">connection_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#connection-panel&quot;</span><span class="p">,</span> <span class="n">ConnectionPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_update-858"><a href="#DShieldTUIApp.on_connection_update-858"><span class="linenos">858</span></a>        <span class="n">connection_panel</span><span class="o">.</span><span class="n">update_connections</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle connection update message.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_log_update" class="classattr">
                                        <input id="DShieldTUIApp.on_log_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_log_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">tui_app</span><span class="o">.</span><span class="n">LogUpdate</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_log_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_log_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_log_update-860"><a href="#DShieldTUIApp.on_log_update-860"><span class="linenos">860</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_log_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">LogUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_log_update-861"><a href="#DShieldTUIApp.on_log_update-861"><span class="linenos">861</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle log update message.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_log_update-862"><a href="#DShieldTUIApp.on_log_update-862"><span class="linenos">862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_entries</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">log_entries</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_log_update-863"><a href="#DShieldTUIApp.on_log_update-863"><span class="linenos">863</span></a>
</span><span id="DShieldTUIApp.on_log_update-864"><a href="#DShieldTUIApp.on_log_update-864"><span class="linenos">864</span></a>        <span class="c1"># Update log panel</span>
</span><span id="DShieldTUIApp.on_log_update-865"><a href="#DShieldTUIApp.on_log_update-865"><span class="linenos">865</span></a>        <span class="n">log_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-panel&quot;</span><span class="p">,</span> <span class="n">LogPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_log_update-866"><a href="#DShieldTUIApp.on_log_update-866"><span class="linenos">866</span></a>        <span class="n">log_panel</span><span class="o">.</span><span class="n">add_log_entries</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">log_entries</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle log update message.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_api_key_generate" class="classattr">
                                        <input id="DShieldTUIApp.on_api_key_generate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_api_key_generate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_api_key_generate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_api_key_generate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_api_key_generate-868"><a href="#DShieldTUIApp.on_api_key_generate-868"><span class="linenos">868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_api_key_generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_api_key_generate-869"><a href="#DShieldTUIApp.on_api_key_generate-869"><span class="linenos">869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API key generation message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_api_key_generate-870"><a href="#DShieldTUIApp.on_api_key_generate-870"><span class="linenos">870</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received API key generation message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_api_key_generate-871"><a href="#DShieldTUIApp.on_api_key_generate-871"><span class="linenos">871</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action_generate_api_key</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Handle API key generation message from connection panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_api_key_revoke" class="classattr">
                                        <input id="DShieldTUIApp.on_api_key_revoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_api_key_revoke</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_api_key_revoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_api_key_revoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_api_key_revoke-873"><a href="#DShieldTUIApp.on_api_key_revoke-873"><span class="linenos">873</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_api_key_revoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_api_key_revoke-874"><a href="#DShieldTUIApp.on_api_key_revoke-874"><span class="linenos">874</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API key revocation message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_api_key_revoke-875"><a href="#DShieldTUIApp.on_api_key_revoke-875"><span class="linenos">875</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="DShieldTUIApp.on_api_key_revoke-876"><a href="#DShieldTUIApp.on_api_key_revoke-876"><span class="linenos">876</span></a>            <span class="s2">&quot;Received API key revocation message&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;api_key_id&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_api_key_revoke-877"><a href="#DShieldTUIApp.on_api_key_revoke-877"><span class="linenos">877</span></a>        <span class="p">)</span>
</span><span id="DShieldTUIApp.on_api_key_revoke-878"><a href="#DShieldTUIApp.on_api_key_revoke-878"><span class="linenos">878</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_revoke_api_key</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;api_key_id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>Handle API key revocation message from connection panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_connection_disconnect" class="classattr">
                                        <input id="DShieldTUIApp.on_connection_disconnect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_connection_disconnect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_connection_disconnect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_connection_disconnect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_connection_disconnect-880"><a href="#DShieldTUIApp.on_connection_disconnect-880"><span class="linenos">880</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_connection_disconnect-881"><a href="#DShieldTUIApp.on_connection_disconnect-881"><span class="linenos">881</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection disconnect message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_connection_disconnect-882"><a href="#DShieldTUIApp.on_connection_disconnect-882"><span class="linenos">882</span></a>        <span class="n">client_address</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;client_address&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_disconnect-883"><a href="#DShieldTUIApp.on_connection_disconnect-883"><span class="linenos">883</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received connection disconnect message&quot;</span><span class="p">,</span> <span class="n">client_address</span><span class="o">=</span><span class="n">client_address</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_disconnect-884"><a href="#DShieldTUIApp.on_connection_disconnect-884"><span class="linenos">884</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_connection</span><span class="p">(</span><span class="n">client_address</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Handle connection disconnect message from connection panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_connection_refresh" class="classattr">
                                        <input id="DShieldTUIApp.on_connection_refresh-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_connection_refresh</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_connection_refresh-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_connection_refresh"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_connection_refresh-886"><a href="#DShieldTUIApp.on_connection_refresh-886"><span class="linenos">886</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_connection_refresh-887"><a href="#DShieldTUIApp.on_connection_refresh-887"><span class="linenos">887</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection refresh message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_connection_refresh-888"><a href="#DShieldTUIApp.on_connection_refresh-888"><span class="linenos">888</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received connection refresh message&quot;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_refresh-889"><a href="#DShieldTUIApp.on_connection_refresh-889"><span class="linenos">889</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_connection_panel</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle connection refresh message from connection panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.on_connection_filter" class="classattr">
                                        <input id="DShieldTUIApp.on_connection_filter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_connection_filter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.on_connection_filter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.on_connection_filter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.on_connection_filter-891"><a href="#DShieldTUIApp.on_connection_filter-891"><span class="linenos">891</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_connection_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.on_connection_filter-892"><a href="#DShieldTUIApp.on_connection_filter-892"><span class="linenos">892</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle connection filter message from connection panel.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.on_connection_filter-893"><a href="#DShieldTUIApp.on_connection_filter-893"><span class="linenos">893</span></a>        <span class="n">filter_text</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">&#39;filter_text&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_filter-894"><a href="#DShieldTUIApp.on_connection_filter-894"><span class="linenos">894</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received connection filter message&quot;</span><span class="p">,</span> <span class="n">filter_text</span><span class="o">=</span><span class="n">filter_text</span><span class="p">)</span>
</span><span id="DShieldTUIApp.on_connection_filter-895"><a href="#DShieldTUIApp.on_connection_filter-895"><span class="linenos">895</span></a>        <span class="c1"># Filtering is handled by the connection panel itself</span>
</span></pre></div>


            <div class="docstring"><p>Handle connection filter message from connection panel.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.watch_server_running" class="classattr">
                                        <input id="DShieldTUIApp.watch_server_running-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_server_running</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">running</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.watch_server_running-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.watch_server_running"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.watch_server_running-977"><a href="#DShieldTUIApp.watch_server_running-977"><span class="linenos">977</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_running</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">running</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.watch_server_running-978"><a href="#DShieldTUIApp.watch_server_running-978"><span class="linenos">978</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server running state changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.watch_server_running-979"><a href="#DShieldTUIApp.watch_server_running-979"><span class="linenos">979</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server running state changed&quot;</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="n">running</span><span class="p">)</span>
</span><span id="DShieldTUIApp.watch_server_running-980"><a href="#DShieldTUIApp.watch_server_running-980"><span class="linenos">980</span></a>
</span><span id="DShieldTUIApp.watch_server_running-981"><a href="#DShieldTUIApp.watch_server_running-981"><span class="linenos">981</span></a>        <span class="c1"># Update server panel</span>
</span><span id="DShieldTUIApp.watch_server_running-982"><a href="#DShieldTUIApp.watch_server_running-982"><span class="linenos">982</span></a>        <span class="n">server_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-panel&quot;</span><span class="p">,</span> <span class="n">ServerPanel</span><span class="p">)</span>
</span><span id="DShieldTUIApp.watch_server_running-983"><a href="#DShieldTUIApp.watch_server_running-983"><span class="linenos">983</span></a>        <span class="n">server_panel</span><span class="o">.</span><span class="n">update_server_status</span><span class="p">(</span><span class="n">running</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Watch for server running state changes.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.watch_server_port" class="classattr">
                                        <input id="DShieldTUIApp.watch_server_port-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_server_port</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">port</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.watch_server_port-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.watch_server_port"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.watch_server_port-985"><a href="#DShieldTUIApp.watch_server_port-985"><span class="linenos">985</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.watch_server_port-986"><a href="#DShieldTUIApp.watch_server_port-986"><span class="linenos">986</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server port changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.watch_server_port-987"><a href="#DShieldTUIApp.watch_server_port-987"><span class="linenos">987</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server port changed&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</span><span id="DShieldTUIApp.watch_server_port-988"><a href="#DShieldTUIApp.watch_server_port-988"><span class="linenos">988</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Watch for server port changes.</p>
</div>


                            </div>
                            <div id="DShieldTUIApp.watch_server_address" class="classattr">
                                        <input id="DShieldTUIApp.watch_server_address-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_server_address</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">address</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DShieldTUIApp.watch_server_address-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DShieldTUIApp.watch_server_address"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DShieldTUIApp.watch_server_address-990"><a href="#DShieldTUIApp.watch_server_address-990"><span class="linenos">990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_server_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DShieldTUIApp.watch_server_address-991"><a href="#DShieldTUIApp.watch_server_address-991"><span class="linenos">991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for server address changes.&quot;&quot;&quot;</span>
</span><span id="DShieldTUIApp.watch_server_address-992"><a href="#DShieldTUIApp.watch_server_address-992"><span class="linenos">992</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server address changed&quot;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">)</span>
</span><span id="DShieldTUIApp.watch_server_address-993"><a href="#DShieldTUIApp.watch_server_address-993"><span class="linenos">993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sub_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server_port</span><span class="si">}</span><span class="s2"> | Address: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Watch for server address changes.</p>
</div>


                            </div>
                </section>
                <section id="LogPanel">
                            <input id="LogPanel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LogPanel</span><wbr>(<span class="base">textual.containers.Container</span>):

                <label class="view-source-button" for="LogPanel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel-55"><a href="#LogPanel-55"><span class="linenos"> 55</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LogPanel</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
</span><span id="LogPanel-56"><a href="#LogPanel-56"><span class="linenos"> 56</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Panel for displaying and managing logs.</span>
</span><span id="LogPanel-57"><a href="#LogPanel-57"><span class="linenos"> 57</span></a>
</span><span id="LogPanel-58"><a href="#LogPanel-58"><span class="linenos"> 58</span></a><span class="sd">    This panel provides real-time log display with filtering, searching,</span>
</span><span id="LogPanel-59"><a href="#LogPanel-59"><span class="linenos"> 59</span></a><span class="sd">    and export capabilities using a bounded log buffer.</span>
</span><span id="LogPanel-60"><a href="#LogPanel-60"><span class="linenos"> 60</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LogPanel-61"><a href="#LogPanel-61"><span class="linenos"> 61</span></a>
</span><span id="LogPanel-62"><a href="#LogPanel-62"><span class="linenos"> 62</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log-panel&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-63"><a href="#LogPanel-63"><span class="linenos"> 63</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the log panel.</span>
</span><span id="LogPanel-64"><a href="#LogPanel-64"><span class="linenos"> 64</span></a>
</span><span id="LogPanel-65"><a href="#LogPanel-65"><span class="linenos"> 65</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-66"><a href="#LogPanel-66"><span class="linenos"> 66</span></a><span class="sd">            id: Panel ID</span>
</span><span id="LogPanel-67"><a href="#LogPanel-67"><span class="linenos"> 67</span></a><span class="sd">            max_entries: Maximum number of log entries to keep</span>
</span><span id="LogPanel-68"><a href="#LogPanel-68"><span class="linenos"> 68</span></a>
</span><span id="LogPanel-69"><a href="#LogPanel-69"><span class="linenos"> 69</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-70"><a href="#LogPanel-70"><span class="linenos"> 70</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="LogPanel-71"><a href="#LogPanel-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="LogPanel-72"><a href="#LogPanel-72"><span class="linenos"> 72</span></a>
</span><span id="LogPanel-73"><a href="#LogPanel-73"><span class="linenos"> 73</span></a>        <span class="c1"># Initialize bounded log buffer</span>
</span><span id="LogPanel-74"><a href="#LogPanel-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span> <span class="o">=</span> <span class="n">LogBuffer</span><span class="p">(</span>
</span><span id="LogPanel-75"><a href="#LogPanel-75"><span class="linenos"> 75</span></a>            <span class="n">max_size</span><span class="o">=</span><span class="n">max_entries</span><span class="p">,</span>
</span><span id="LogPanel-76"><a href="#LogPanel-76"><span class="linenos"> 76</span></a>            <span class="n">coalesce_interval_ms</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>  <span class="c1"># 100ms burst coalescing</span>
</span><span id="LogPanel-77"><a href="#LogPanel-77"><span class="linenos"> 77</span></a>            <span class="n">render_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_render_callback</span><span class="p">,</span>
</span><span id="LogPanel-78"><a href="#LogPanel-78"><span class="linenos"> 78</span></a>        <span class="p">)</span>
</span><span id="LogPanel-79"><a href="#LogPanel-79"><span class="linenos"> 79</span></a>
</span><span id="LogPanel-80"><a href="#LogPanel-80"><span class="linenos"> 80</span></a>        <span class="c1"># Display configuration</span>
</span><span id="LogPanel-81"><a href="#LogPanel-81"><span class="linenos"> 81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="LogPanel-82"><a href="#LogPanel-82"><span class="linenos"> 82</span></a>            <span class="s2">&quot;levels&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">},</span>
</span><span id="LogPanel-83"><a href="#LogPanel-83"><span class="linenos"> 83</span></a>            <span class="s2">&quot;search_text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="LogPanel-84"><a href="#LogPanel-84"><span class="linenos"> 84</span></a>            <span class="s2">&quot;case_sensitive&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="LogPanel-85"><a href="#LogPanel-85"><span class="linenos"> 85</span></a>            <span class="s2">&quot;show_timestamps&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel-86"><a href="#LogPanel-86"><span class="linenos"> 86</span></a>            <span class="s2">&quot;show_levels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel-87"><a href="#LogPanel-87"><span class="linenos"> 87</span></a>            <span class="s2">&quot;show_sources&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel-88"><a href="#LogPanel-88"><span class="linenos"> 88</span></a>        <span class="p">}</span>
</span><span id="LogPanel-89"><a href="#LogPanel-89"><span class="linenos"> 89</span></a>
</span><span id="LogPanel-90"><a href="#LogPanel-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="LogPanel-91"><a href="#LogPanel-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the log panel layout.</span>
</span><span id="LogPanel-92"><a href="#LogPanel-92"><span class="linenos"> 92</span></a>
</span><span id="LogPanel-93"><a href="#LogPanel-93"><span class="linenos"> 93</span></a><span class="sd">        Returns:</span>
</span><span id="LogPanel-94"><a href="#LogPanel-94"><span class="linenos"> 94</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="LogPanel-95"><a href="#LogPanel-95"><span class="linenos"> 95</span></a>
</span><span id="LogPanel-96"><a href="#LogPanel-96"><span class="linenos"> 96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-97"><a href="#LogPanel-97"><span class="linenos"> 97</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Log Monitor&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="LogPanel-98"><a href="#LogPanel-98"><span class="linenos"> 98</span></a>
</span><span id="LogPanel-99"><a href="#LogPanel-99"><span class="linenos"> 99</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="LogPanel-100"><a href="#LogPanel-100"><span class="linenos">100</span></a>            <span class="c1"># Log controls</span>
</span><span id="LogPanel-101"><a href="#LogPanel-101"><span class="linenos">101</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;log-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel-102"><a href="#LogPanel-102"><span class="linenos">102</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Clear Logs&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;clear-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel-103"><a href="#LogPanel-103"><span class="linenos">103</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Export Logs&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;export-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel-104"><a href="#LogPanel-104"><span class="linenos">104</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Auto-scroll&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;auto-scroll-btn&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>
</span><span id="LogPanel-105"><a href="#LogPanel-105"><span class="linenos">105</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Pause&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pause-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel-106"><a href="#LogPanel-106"><span class="linenos">106</span></a>
</span><span id="LogPanel-107"><a href="#LogPanel-107"><span class="linenos">107</span></a>            <span class="c1"># Filter controls</span>
</span><span id="LogPanel-108"><a href="#LogPanel-108"><span class="linenos">108</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;filter-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel-109"><a href="#LogPanel-109"><span class="linenos">109</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Levels:&quot;</span><span class="p">)</span>
</span><span id="LogPanel-110"><a href="#LogPanel-110"><span class="linenos">110</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-debug&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-111"><a href="#LogPanel-111"><span class="linenos">111</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-info&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-112"><a href="#LogPanel-112"><span class="linenos">112</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-warning&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-113"><a href="#LogPanel-113"><span class="linenos">113</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-error&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-114"><a href="#LogPanel-114"><span class="linenos">114</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;CRITICAL&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-critical&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-115"><a href="#LogPanel-115"><span class="linenos">115</span></a>
</span><span id="LogPanel-116"><a href="#LogPanel-116"><span class="linenos">116</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;search-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel-117"><a href="#LogPanel-117"><span class="linenos">117</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Search:&quot;</span><span class="p">)</span>
</span><span id="LogPanel-118"><a href="#LogPanel-118"><span class="linenos">118</span></a>                <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Search logs...&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;search-input&quot;</span><span class="p">)</span>
</span><span id="LogPanel-119"><a href="#LogPanel-119"><span class="linenos">119</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Case Sensitive&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;case-sensitive-search&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="LogPanel-120"><a href="#LogPanel-120"><span class="linenos">120</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Clear Search&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;clear-search-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel-121"><a href="#LogPanel-121"><span class="linenos">121</span></a>
</span><span id="LogPanel-122"><a href="#LogPanel-122"><span class="linenos">122</span></a>            <span class="c1"># Display options</span>
</span><span id="LogPanel-123"><a href="#LogPanel-123"><span class="linenos">123</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;display-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel-124"><a href="#LogPanel-124"><span class="linenos">124</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Timestamps&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-timestamps&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-125"><a href="#LogPanel-125"><span class="linenos">125</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Levels&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-levels&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-126"><a href="#LogPanel-126"><span class="linenos">126</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Sources&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-sources&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-127"><a href="#LogPanel-127"><span class="linenos">127</span></a>
</span><span id="LogPanel-128"><a href="#LogPanel-128"><span class="linenos">128</span></a>            <span class="c1"># Log display</span>
</span><span id="LogPanel-129"><a href="#LogPanel-129"><span class="linenos">129</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Log Entries:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="LogPanel-130"><a href="#LogPanel-130"><span class="linenos">130</span></a>            <span class="k">yield</span> <span class="n">TextArea</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;log-display&quot;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel-131"><a href="#LogPanel-131"><span class="linenos">131</span></a>
</span><span id="LogPanel-132"><a href="#LogPanel-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-133"><a href="#LogPanel-133"><span class="linenos">133</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="LogPanel-134"><a href="#LogPanel-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Log panel mounted&quot;</span><span class="p">)</span>
</span><span id="LogPanel-135"><a href="#LogPanel-135"><span class="linenos">135</span></a>
</span><span id="LogPanel-136"><a href="#LogPanel-136"><span class="linenos">136</span></a>        <span class="c1"># Initialize log display</span>
</span><span id="LogPanel-137"><a href="#LogPanel-137"><span class="linenos">137</span></a>        <span class="n">log_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-display&quot;</span><span class="p">,</span> <span class="n">TextArea</span><span class="p">)</span>
</span><span id="LogPanel-138"><a href="#LogPanel-138"><span class="linenos">138</span></a>        <span class="n">log_display</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Log monitor ready. Waiting for log entries...</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="LogPanel-139"><a href="#LogPanel-139"><span class="linenos">139</span></a>
</span><span id="LogPanel-140"><a href="#LogPanel-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_log_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-141"><a href="#LogPanel-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add new log entries to the display.</span>
</span><span id="LogPanel-142"><a href="#LogPanel-142"><span class="linenos">142</span></a>
</span><span id="LogPanel-143"><a href="#LogPanel-143"><span class="linenos">143</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-144"><a href="#LogPanel-144"><span class="linenos">144</span></a><span class="sd">            entries: List of log entries to add</span>
</span><span id="LogPanel-145"><a href="#LogPanel-145"><span class="linenos">145</span></a>
</span><span id="LogPanel-146"><a href="#LogPanel-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-147"><a href="#LogPanel-147"><span class="linenos">147</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;add_log_entries called&quot;</span><span class="p">,</span> <span class="n">entries_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">),</span> <span class="n">entries</span><span class="o">=</span><span class="n">entries</span><span class="p">)</span>
</span><span id="LogPanel-148"><a href="#LogPanel-148"><span class="linenos">148</span></a>
</span><span id="LogPanel-149"><a href="#LogPanel-149"><span class="linenos">149</span></a>        <span class="c1"># Add entries to the bounded buffer (handles filtering and coalescing)</span>
</span><span id="LogPanel-150"><a href="#LogPanel-150"><span class="linenos">150</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">add_entries</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="LogPanel-151"><a href="#LogPanel-151"><span class="linenos">151</span></a>
</span><span id="LogPanel-152"><a href="#LogPanel-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="LogPanel-153"><a href="#LogPanel-153"><span class="linenos">153</span></a>            <span class="s2">&quot;Added log entries to buffer&quot;</span><span class="p">,</span>
</span><span id="LogPanel-154"><a href="#LogPanel-154"><span class="linenos">154</span></a>            <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">),</span>
</span><span id="LogPanel-155"><a href="#LogPanel-155"><span class="linenos">155</span></a>            <span class="n">buffer_stats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">(),</span>
</span><span id="LogPanel-156"><a href="#LogPanel-156"><span class="linenos">156</span></a>        <span class="p">)</span>
</span><span id="LogPanel-157"><a href="#LogPanel-157"><span class="linenos">157</span></a>
</span><span id="LogPanel-158"><a href="#LogPanel-158"><span class="linenos">158</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-159"><a href="#LogPanel-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all log entries.&quot;&quot;&quot;</span>
</span><span id="LogPanel-160"><a href="#LogPanel-160"><span class="linenos">160</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="LogPanel-161"><a href="#LogPanel-161"><span class="linenos">161</span></a>
</span><span id="LogPanel-162"><a href="#LogPanel-162"><span class="linenos">162</span></a>        <span class="n">log_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-display&quot;</span><span class="p">,</span> <span class="n">TextArea</span><span class="p">)</span>
</span><span id="LogPanel-163"><a href="#LogPanel-163"><span class="linenos">163</span></a>        <span class="n">log_display</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Logs cleared.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="LogPanel-164"><a href="#LogPanel-164"><span class="linenos">164</span></a>
</span><span id="LogPanel-165"><a href="#LogPanel-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleared all log entries&quot;</span><span class="p">)</span>
</span><span id="LogPanel-166"><a href="#LogPanel-166"><span class="linenos">166</span></a>
</span><span id="LogPanel-167"><a href="#LogPanel-167"><span class="linenos">167</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_render_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-168"><a href="#LogPanel-168"><span class="linenos">168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Callback function for log buffer to trigger display update.&quot;&quot;&quot;</span>
</span><span id="LogPanel-169"><a href="#LogPanel-169"><span class="linenos">169</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-170"><a href="#LogPanel-170"><span class="linenos">170</span></a>
</span><span id="LogPanel-171"><a href="#LogPanel-171"><span class="linenos">171</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-172"><a href="#LogPanel-172"><span class="linenos">172</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply current filters to log entries.&quot;&quot;&quot;</span>
</span><span id="LogPanel-173"><a href="#LogPanel-173"><span class="linenos">173</span></a>        <span class="c1"># Update log buffer filters</span>
</span><span id="LogPanel-174"><a href="#LogPanel-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">set_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">])</span>
</span><span id="LogPanel-175"><a href="#LogPanel-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">set_search_filter</span><span class="p">(</span>
</span><span id="LogPanel-176"><a href="#LogPanel-176"><span class="linenos">176</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;search_text&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;case_sensitive&quot;</span><span class="p">]</span>
</span><span id="LogPanel-177"><a href="#LogPanel-177"><span class="linenos">177</span></a>        <span class="p">)</span>
</span><span id="LogPanel-178"><a href="#LogPanel-178"><span class="linenos">178</span></a>
</span><span id="LogPanel-179"><a href="#LogPanel-179"><span class="linenos">179</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-180"><a href="#LogPanel-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the log display with filtered entries.&quot;&quot;&quot;</span>
</span><span id="LogPanel-181"><a href="#LogPanel-181"><span class="linenos">181</span></a>        <span class="n">log_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-display&quot;</span><span class="p">,</span> <span class="n">TextArea</span><span class="p">)</span>
</span><span id="LogPanel-182"><a href="#LogPanel-182"><span class="linenos">182</span></a>
</span><span id="LogPanel-183"><a href="#LogPanel-183"><span class="linenos">183</span></a>        <span class="c1"># Get filtered entries from buffer</span>
</span><span id="LogPanel-184"><a href="#LogPanel-184"><span class="linenos">184</span></a>        <span class="n">filtered_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_filtered_entries</span><span class="p">()</span>
</span><span id="LogPanel-185"><a href="#LogPanel-185"><span class="linenos">185</span></a>
</span><span id="LogPanel-186"><a href="#LogPanel-186"><span class="linenos">186</span></a>        <span class="c1"># Build display text</span>
</span><span id="LogPanel-187"><a href="#LogPanel-187"><span class="linenos">187</span></a>        <span class="n">display_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LogPanel-188"><a href="#LogPanel-188"><span class="linenos">188</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">filtered_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:]:</span>  <span class="c1"># Show last 100 filtered entries</span>
</span><span id="LogPanel-189"><a href="#LogPanel-189"><span class="linenos">189</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_log_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</span><span id="LogPanel-190"><a href="#LogPanel-190"><span class="linenos">190</span></a>            <span class="n">display_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="LogPanel-191"><a href="#LogPanel-191"><span class="linenos">191</span></a>
</span><span id="LogPanel-192"><a href="#LogPanel-192"><span class="linenos">192</span></a>        <span class="c1"># Update display</span>
</span><span id="LogPanel-193"><a href="#LogPanel-193"><span class="linenos">193</span></a>        <span class="n">log_display</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">display_lines</span><span class="p">)</span>
</span><span id="LogPanel-194"><a href="#LogPanel-194"><span class="linenos">194</span></a>
</span><span id="LogPanel-195"><a href="#LogPanel-195"><span class="linenos">195</span></a>        <span class="c1"># Auto-scroll to bottom if enabled</span>
</span><span id="LogPanel-196"><a href="#LogPanel-196"><span class="linenos">196</span></a>        <span class="n">auto_scroll_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#auto-scroll-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="LogPanel-197"><a href="#LogPanel-197"><span class="linenos">197</span></a>        <span class="k">if</span> <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">==</span> <span class="s2">&quot;primary&quot;</span><span class="p">:</span>
</span><span id="LogPanel-198"><a href="#LogPanel-198"><span class="linenos">198</span></a>            <span class="n">log_display</span><span class="o">.</span><span class="n">scroll_end</span><span class="p">()</span>
</span><span id="LogPanel-199"><a href="#LogPanel-199"><span class="linenos">199</span></a>
</span><span id="LogPanel-200"><a href="#LogPanel-200"><span class="linenos">200</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_format_log_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LogPanel-201"><a href="#LogPanel-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Format a log entry for display.</span>
</span><span id="LogPanel-202"><a href="#LogPanel-202"><span class="linenos">202</span></a>
</span><span id="LogPanel-203"><a href="#LogPanel-203"><span class="linenos">203</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-204"><a href="#LogPanel-204"><span class="linenos">204</span></a><span class="sd">            entry: Log entry dictionary</span>
</span><span id="LogPanel-205"><a href="#LogPanel-205"><span class="linenos">205</span></a>
</span><span id="LogPanel-206"><a href="#LogPanel-206"><span class="linenos">206</span></a><span class="sd">        Returns:</span>
</span><span id="LogPanel-207"><a href="#LogPanel-207"><span class="linenos">207</span></a><span class="sd">            Formatted log entry string</span>
</span><span id="LogPanel-208"><a href="#LogPanel-208"><span class="linenos">208</span></a>
</span><span id="LogPanel-209"><a href="#LogPanel-209"><span class="linenos">209</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-210"><a href="#LogPanel-210"><span class="linenos">210</span></a>        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LogPanel-211"><a href="#LogPanel-211"><span class="linenos">211</span></a>
</span><span id="LogPanel-212"><a href="#LogPanel-212"><span class="linenos">212</span></a>        <span class="c1"># Add timestamp if enabled</span>
</span><span id="LogPanel-213"><a href="#LogPanel-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_timestamps&quot;</span><span class="p">]:</span>
</span><span id="LogPanel-214"><a href="#LogPanel-214"><span class="linenos">214</span></a>            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>
</span><span id="LogPanel-215"><a href="#LogPanel-215"><span class="linenos">215</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="LogPanel-216"><a href="#LogPanel-216"><span class="linenos">216</span></a>                <span class="c1"># Format timestamp for display</span>
</span><span id="LogPanel-217"><a href="#LogPanel-217"><span class="linenos">217</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="LogPanel-218"><a href="#LogPanel-218"><span class="linenos">218</span></a>                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">timestamp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;+00:00&quot;</span><span class="p">))</span>
</span><span id="LogPanel-219"><a href="#LogPanel-219"><span class="linenos">219</span></a>                    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
</span><span id="LogPanel-220"><a href="#LogPanel-220"><span class="linenos">220</span></a>                <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="LogPanel-221"><a href="#LogPanel-221"><span class="linenos">221</span></a>                    <span class="k">pass</span>
</span><span id="LogPanel-222"><a href="#LogPanel-222"><span class="linenos">222</span></a>            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</span><span id="LogPanel-223"><a href="#LogPanel-223"><span class="linenos">223</span></a>
</span><span id="LogPanel-224"><a href="#LogPanel-224"><span class="linenos">224</span></a>        <span class="c1"># Add level if enabled</span>
</span><span id="LogPanel-225"><a href="#LogPanel-225"><span class="linenos">225</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_levels&quot;</span><span class="p">]:</span>
</span><span id="LogPanel-226"><a href="#LogPanel-226"><span class="linenos">226</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="LogPanel-227"><a href="#LogPanel-227"><span class="linenos">227</span></a>            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</span><span id="LogPanel-228"><a href="#LogPanel-228"><span class="linenos">228</span></a>
</span><span id="LogPanel-229"><a href="#LogPanel-229"><span class="linenos">229</span></a>        <span class="c1"># Add source if enabled</span>
</span><span id="LogPanel-230"><a href="#LogPanel-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_sources&quot;</span><span class="p">]:</span>
</span><span id="LogPanel-231"><a href="#LogPanel-231"><span class="linenos">231</span></a>            <span class="n">source</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="LogPanel-232"><a href="#LogPanel-232"><span class="linenos">232</span></a>            <span class="k">if</span> <span class="n">source</span><span class="p">:</span>
</span><span id="LogPanel-233"><a href="#LogPanel-233"><span class="linenos">233</span></a>                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</span><span id="LogPanel-234"><a href="#LogPanel-234"><span class="linenos">234</span></a>
</span><span id="LogPanel-235"><a href="#LogPanel-235"><span class="linenos">235</span></a>        <span class="c1"># Add message</span>
</span><span id="LogPanel-236"><a href="#LogPanel-236"><span class="linenos">236</span></a>        <span class="n">message</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
</span><span id="LogPanel-237"><a href="#LogPanel-237"><span class="linenos">237</span></a>        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="LogPanel-238"><a href="#LogPanel-238"><span class="linenos">238</span></a>
</span><span id="LogPanel-239"><a href="#LogPanel-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</span><span id="LogPanel-240"><a href="#LogPanel-240"><span class="linenos">240</span></a>
</span><span id="LogPanel-241"><a href="#LogPanel-241"><span class="linenos">241</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-242"><a href="#LogPanel-242"><span class="linenos">242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="LogPanel-243"><a href="#LogPanel-243"><span class="linenos">243</span></a>
</span><span id="LogPanel-244"><a href="#LogPanel-244"><span class="linenos">244</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-245"><a href="#LogPanel-245"><span class="linenos">245</span></a><span class="sd">            event: Button press event</span>
</span><span id="LogPanel-246"><a href="#LogPanel-246"><span class="linenos">246</span></a>
</span><span id="LogPanel-247"><a href="#LogPanel-247"><span class="linenos">247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-248"><a href="#LogPanel-248"><span class="linenos">248</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="LogPanel-249"><a href="#LogPanel-249"><span class="linenos">249</span></a>
</span><span id="LogPanel-250"><a href="#LogPanel-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;clear-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel-251"><a href="#LogPanel-251"><span class="linenos">251</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_logs</span><span class="p">()</span>
</span><span id="LogPanel-252"><a href="#LogPanel-252"><span class="linenos">252</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;export-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel-253"><a href="#LogPanel-253"><span class="linenos">253</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_export_logs</span><span class="p">()</span>
</span><span id="LogPanel-254"><a href="#LogPanel-254"><span class="linenos">254</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;auto-scroll-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel-255"><a href="#LogPanel-255"><span class="linenos">255</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_auto_scroll</span><span class="p">()</span>
</span><span id="LogPanel-256"><a href="#LogPanel-256"><span class="linenos">256</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;pause-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel-257"><a href="#LogPanel-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_pause</span><span class="p">()</span>
</span><span id="LogPanel-258"><a href="#LogPanel-258"><span class="linenos">258</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;clear-search-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel-259"><a href="#LogPanel-259"><span class="linenos">259</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_search</span><span class="p">()</span>
</span><span id="LogPanel-260"><a href="#LogPanel-260"><span class="linenos">260</span></a>
</span><span id="LogPanel-261"><a href="#LogPanel-261"><span class="linenos">261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_checkbox_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Checkbox</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-262"><a href="#LogPanel-262"><span class="linenos">262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle checkbox change events.</span>
</span><span id="LogPanel-263"><a href="#LogPanel-263"><span class="linenos">263</span></a>
</span><span id="LogPanel-264"><a href="#LogPanel-264"><span class="linenos">264</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-265"><a href="#LogPanel-265"><span class="linenos">265</span></a><span class="sd">            event: Checkbox change event</span>
</span><span id="LogPanel-266"><a href="#LogPanel-266"><span class="linenos">266</span></a>
</span><span id="LogPanel-267"><a href="#LogPanel-267"><span class="linenos">267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-268"><a href="#LogPanel-268"><span class="linenos">268</span></a>        <span class="n">checkbox_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">id</span>
</span><span id="LogPanel-269"><a href="#LogPanel-269"><span class="linenos">269</span></a>
</span><span id="LogPanel-270"><a href="#LogPanel-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="n">checkbox_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;filter-&quot;</span><span class="p">):</span>
</span><span id="LogPanel-271"><a href="#LogPanel-271"><span class="linenos">271</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">checkbox_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;filter-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="LogPanel-272"><a href="#LogPanel-272"><span class="linenos">272</span></a>            <span class="n">filter_levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">]</span>
</span><span id="LogPanel-273"><a href="#LogPanel-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filter_levels</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
</span><span id="LogPanel-274"><a href="#LogPanel-274"><span class="linenos">274</span></a>                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
</span><span id="LogPanel-275"><a href="#LogPanel-275"><span class="linenos">275</span></a>                    <span class="n">filter_levels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogPanel-276"><a href="#LogPanel-276"><span class="linenos">276</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LogPanel-277"><a href="#LogPanel-277"><span class="linenos">277</span></a>                    <span class="n">filter_levels</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogPanel-278"><a href="#LogPanel-278"><span class="linenos">278</span></a>
</span><span id="LogPanel-279"><a href="#LogPanel-279"><span class="linenos">279</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel-280"><a href="#LogPanel-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-281"><a href="#LogPanel-281"><span class="linenos">281</span></a>
</span><span id="LogPanel-282"><a href="#LogPanel-282"><span class="linenos">282</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-timestamps&quot;</span><span class="p">:</span>
</span><span id="LogPanel-283"><a href="#LogPanel-283"><span class="linenos">283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_timestamps&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel-284"><a href="#LogPanel-284"><span class="linenos">284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-285"><a href="#LogPanel-285"><span class="linenos">285</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-levels&quot;</span><span class="p">:</span>
</span><span id="LogPanel-286"><a href="#LogPanel-286"><span class="linenos">286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_levels&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel-287"><a href="#LogPanel-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-288"><a href="#LogPanel-288"><span class="linenos">288</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-sources&quot;</span><span class="p">:</span>
</span><span id="LogPanel-289"><a href="#LogPanel-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_sources&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel-290"><a href="#LogPanel-290"><span class="linenos">290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-291"><a href="#LogPanel-291"><span class="linenos">291</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;case-sensitive-search&quot;</span><span class="p">:</span>
</span><span id="LogPanel-292"><a href="#LogPanel-292"><span class="linenos">292</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;case_sensitive&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel-293"><a href="#LogPanel-293"><span class="linenos">293</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel-294"><a href="#LogPanel-294"><span class="linenos">294</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-295"><a href="#LogPanel-295"><span class="linenos">295</span></a>
</span><span id="LogPanel-296"><a href="#LogPanel-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Input</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-297"><a href="#LogPanel-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle input field changes.</span>
</span><span id="LogPanel-298"><a href="#LogPanel-298"><span class="linenos">298</span></a>
</span><span id="LogPanel-299"><a href="#LogPanel-299"><span class="linenos">299</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-300"><a href="#LogPanel-300"><span class="linenos">300</span></a><span class="sd">            event: Input change event</span>
</span><span id="LogPanel-301"><a href="#LogPanel-301"><span class="linenos">301</span></a>
</span><span id="LogPanel-302"><a href="#LogPanel-302"><span class="linenos">302</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-303"><a href="#LogPanel-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;search-input&quot;</span><span class="p">:</span>
</span><span id="LogPanel-304"><a href="#LogPanel-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;search_text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel-305"><a href="#LogPanel-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel-306"><a href="#LogPanel-306"><span class="linenos">306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-307"><a href="#LogPanel-307"><span class="linenos">307</span></a>
</span><span id="LogPanel-308"><a href="#LogPanel-308"><span class="linenos">308</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-309"><a href="#LogPanel-309"><span class="linenos">309</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all logs.&quot;&quot;&quot;</span>
</span><span id="LogPanel-310"><a href="#LogPanel-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Clearing logs&quot;</span><span class="p">)</span>
</span><span id="LogPanel-311"><a href="#LogPanel-311"><span class="linenos">311</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">LogClear</span><span class="p">())</span>
</span><span id="LogPanel-312"><a href="#LogPanel-312"><span class="linenos">312</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clear_logs</span><span class="p">()</span>
</span><span id="LogPanel-313"><a href="#LogPanel-313"><span class="linenos">313</span></a>
</span><span id="LogPanel-314"><a href="#LogPanel-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_export_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-315"><a href="#LogPanel-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Export logs to file.&quot;&quot;&quot;</span>
</span><span id="LogPanel-316"><a href="#LogPanel-316"><span class="linenos">316</span></a>        <span class="c1"># This would typically open a file dialog</span>
</span><span id="LogPanel-317"><a href="#LogPanel-317"><span class="linenos">317</span></a>        <span class="c1"># For now, we&#39;ll use a default path</span>
</span><span id="LogPanel-318"><a href="#LogPanel-318"><span class="linenos">318</span></a>        <span class="n">export_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;dshield_mcp_logs_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">_%H%M%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.log&quot;</span>
</span><span id="LogPanel-319"><a href="#LogPanel-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exporting logs&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">export_path</span><span class="p">)</span>
</span><span id="LogPanel-320"><a href="#LogPanel-320"><span class="linenos">320</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">LogExport</span><span class="p">(</span><span class="n">export_path</span><span class="p">))</span>
</span><span id="LogPanel-321"><a href="#LogPanel-321"><span class="linenos">321</span></a>
</span><span id="LogPanel-322"><a href="#LogPanel-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_toggle_auto_scroll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-323"><a href="#LogPanel-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle auto-scroll mode.&quot;&quot;&quot;</span>
</span><span id="LogPanel-324"><a href="#LogPanel-324"><span class="linenos">324</span></a>        <span class="n">auto_scroll_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#auto-scroll-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="LogPanel-325"><a href="#LogPanel-325"><span class="linenos">325</span></a>        <span class="k">if</span> <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">==</span> <span class="s2">&quot;primary&quot;</span><span class="p">:</span>
</span><span id="LogPanel-326"><a href="#LogPanel-326"><span class="linenos">326</span></a>            <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
</span><span id="LogPanel-327"><a href="#LogPanel-327"><span class="linenos">327</span></a>            <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Auto-scroll&quot;</span>
</span><span id="LogPanel-328"><a href="#LogPanel-328"><span class="linenos">328</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LogPanel-329"><a href="#LogPanel-329"><span class="linenos">329</span></a>            <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="s2">&quot;primary&quot;</span>
</span><span id="LogPanel-330"><a href="#LogPanel-330"><span class="linenos">330</span></a>            <span class="n">auto_scroll_btn</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Auto-scroll ✓&quot;</span>
</span><span id="LogPanel-331"><a href="#LogPanel-331"><span class="linenos">331</span></a>
</span><span id="LogPanel-332"><a href="#LogPanel-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Toggled auto-scroll&quot;</span><span class="p">)</span>
</span><span id="LogPanel-333"><a href="#LogPanel-333"><span class="linenos">333</span></a>
</span><span id="LogPanel-334"><a href="#LogPanel-334"><span class="linenos">334</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_toggle_pause</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-335"><a href="#LogPanel-335"><span class="linenos">335</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle log pause mode.&quot;&quot;&quot;</span>
</span><span id="LogPanel-336"><a href="#LogPanel-336"><span class="linenos">336</span></a>        <span class="n">pause_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#pause-logs-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="LogPanel-337"><a href="#LogPanel-337"><span class="linenos">337</span></a>        <span class="k">if</span> <span class="n">pause_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">==</span> <span class="s2">&quot;primary&quot;</span><span class="p">:</span>
</span><span id="LogPanel-338"><a href="#LogPanel-338"><span class="linenos">338</span></a>            <span class="n">pause_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
</span><span id="LogPanel-339"><a href="#LogPanel-339"><span class="linenos">339</span></a>            <span class="n">pause_btn</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Pause&quot;</span>
</span><span id="LogPanel-340"><a href="#LogPanel-340"><span class="linenos">340</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LogPanel-341"><a href="#LogPanel-341"><span class="linenos">341</span></a>            <span class="n">pause_btn</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="s2">&quot;primary&quot;</span>
</span><span id="LogPanel-342"><a href="#LogPanel-342"><span class="linenos">342</span></a>            <span class="n">pause_btn</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Paused&quot;</span>
</span><span id="LogPanel-343"><a href="#LogPanel-343"><span class="linenos">343</span></a>
</span><span id="LogPanel-344"><a href="#LogPanel-344"><span class="linenos">344</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Toggled log pause&quot;</span><span class="p">)</span>
</span><span id="LogPanel-345"><a href="#LogPanel-345"><span class="linenos">345</span></a>
</span><span id="LogPanel-346"><a href="#LogPanel-346"><span class="linenos">346</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_clear_search</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-347"><a href="#LogPanel-347"><span class="linenos">347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear search input.&quot;&quot;&quot;</span>
</span><span id="LogPanel-348"><a href="#LogPanel-348"><span class="linenos">348</span></a>        <span class="n">search_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#search-input&quot;</span><span class="p">,</span> <span class="n">Input</span><span class="p">)</span>
</span><span id="LogPanel-349"><a href="#LogPanel-349"><span class="linenos">349</span></a>        <span class="n">search_input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="LogPanel-350"><a href="#LogPanel-350"><span class="linenos">350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;search_text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="LogPanel-351"><a href="#LogPanel-351"><span class="linenos">351</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel-352"><a href="#LogPanel-352"><span class="linenos">352</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel-353"><a href="#LogPanel-353"><span class="linenos">353</span></a>
</span><span id="LogPanel-354"><a href="#LogPanel-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_log_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="LogPanel-355"><a href="#LogPanel-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get log statistics.</span>
</span><span id="LogPanel-356"><a href="#LogPanel-356"><span class="linenos">356</span></a>
</span><span id="LogPanel-357"><a href="#LogPanel-357"><span class="linenos">357</span></a><span class="sd">        Returns:</span>
</span><span id="LogPanel-358"><a href="#LogPanel-358"><span class="linenos">358</span></a><span class="sd">            Dictionary of log statistics</span>
</span><span id="LogPanel-359"><a href="#LogPanel-359"><span class="linenos">359</span></a>
</span><span id="LogPanel-360"><a href="#LogPanel-360"><span class="linenos">360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-361"><a href="#LogPanel-361"><span class="linenos">361</span></a>        <span class="n">buffer_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">()</span>
</span><span id="LogPanel-362"><a href="#LogPanel-362"><span class="linenos">362</span></a>        <span class="n">filtered_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_filtered_entries</span><span class="p">()</span>
</span><span id="LogPanel-363"><a href="#LogPanel-363"><span class="linenos">363</span></a>
</span><span id="LogPanel-364"><a href="#LogPanel-364"><span class="linenos">364</span></a>        <span class="c1"># Count by level</span>
</span><span id="LogPanel-365"><a href="#LogPanel-365"><span class="linenos">365</span></a>        <span class="n">level_counts</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LogPanel-366"><a href="#LogPanel-366"><span class="linenos">366</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_all_entries</span><span class="p">():</span>
</span><span id="LogPanel-367"><a href="#LogPanel-367"><span class="linenos">367</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="LogPanel-368"><a href="#LogPanel-368"><span class="linenos">368</span></a>            <span class="n">level_counts</span><span class="p">[</span><span class="n">level</span><span class="p">]</span> <span class="o">=</span> <span class="n">level_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="LogPanel-369"><a href="#LogPanel-369"><span class="linenos">369</span></a>
</span><span id="LogPanel-370"><a href="#LogPanel-370"><span class="linenos">370</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="LogPanel-371"><a href="#LogPanel-371"><span class="linenos">371</span></a>            <span class="s2">&quot;total_entries&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">[</span><span class="s2">&quot;buffer_size&quot;</span><span class="p">],</span>
</span><span id="LogPanel-372"><a href="#LogPanel-372"><span class="linenos">372</span></a>            <span class="s2">&quot;filtered_entries&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered_entries</span><span class="p">),</span>
</span><span id="LogPanel-373"><a href="#LogPanel-373"><span class="linenos">373</span></a>            <span class="s2">&quot;level_counts&quot;</span><span class="p">:</span> <span class="n">level_counts</span><span class="p">,</span>
</span><span id="LogPanel-374"><a href="#LogPanel-374"><span class="linenos">374</span></a>            <span class="s2">&quot;filter_config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">,</span>
</span><span id="LogPanel-375"><a href="#LogPanel-375"><span class="linenos">375</span></a>            <span class="s2">&quot;max_entries&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">[</span><span class="s2">&quot;max_size&quot;</span><span class="p">],</span>
</span><span id="LogPanel-376"><a href="#LogPanel-376"><span class="linenos">376</span></a>            <span class="s2">&quot;buffer_statistics&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">,</span>
</span><span id="LogPanel-377"><a href="#LogPanel-377"><span class="linenos">377</span></a>        <span class="p">}</span>
</span><span id="LogPanel-378"><a href="#LogPanel-378"><span class="linenos">378</span></a>
</span><span id="LogPanel-379"><a href="#LogPanel-379"><span class="linenos">379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_max_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-380"><a href="#LogPanel-380"><span class="linenos">380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set maximum number of log entries to keep.</span>
</span><span id="LogPanel-381"><a href="#LogPanel-381"><span class="linenos">381</span></a>
</span><span id="LogPanel-382"><a href="#LogPanel-382"><span class="linenos">382</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel-383"><a href="#LogPanel-383"><span class="linenos">383</span></a><span class="sd">            max_entries: Maximum number of entries</span>
</span><span id="LogPanel-384"><a href="#LogPanel-384"><span class="linenos">384</span></a>
</span><span id="LogPanel-385"><a href="#LogPanel-385"><span class="linenos">385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel-386"><a href="#LogPanel-386"><span class="linenos">386</span></a>        <span class="c1"># Create new buffer with new max size</span>
</span><span id="LogPanel-387"><a href="#LogPanel-387"><span class="linenos">387</span></a>        <span class="n">old_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span>
</span><span id="LogPanel-388"><a href="#LogPanel-388"><span class="linenos">388</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span> <span class="o">=</span> <span class="n">LogBuffer</span><span class="p">(</span>
</span><span id="LogPanel-389"><a href="#LogPanel-389"><span class="linenos">389</span></a>            <span class="n">max_size</span><span class="o">=</span><span class="n">max_entries</span><span class="p">,</span>
</span><span id="LogPanel-390"><a href="#LogPanel-390"><span class="linenos">390</span></a>            <span class="n">coalesce_interval_ms</span><span class="o">=</span><span class="n">old_buffer</span><span class="o">.</span><span class="n">coalesce_interval_ms</span><span class="p">,</span>
</span><span id="LogPanel-391"><a href="#LogPanel-391"><span class="linenos">391</span></a>            <span class="n">render_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_render_callback</span><span class="p">,</span>
</span><span id="LogPanel-392"><a href="#LogPanel-392"><span class="linenos">392</span></a>        <span class="p">)</span>
</span><span id="LogPanel-393"><a href="#LogPanel-393"><span class="linenos">393</span></a>
</span><span id="LogPanel-394"><a href="#LogPanel-394"><span class="linenos">394</span></a>        <span class="c1"># Copy existing entries</span>
</span><span id="LogPanel-395"><a href="#LogPanel-395"><span class="linenos">395</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">add_entries</span><span class="p">(</span><span class="n">old_buffer</span><span class="o">.</span><span class="n">get_all_entries</span><span class="p">())</span>
</span><span id="LogPanel-396"><a href="#LogPanel-396"><span class="linenos">396</span></a>
</span><span id="LogPanel-397"><a href="#LogPanel-397"><span class="linenos">397</span></a>        <span class="c1"># Clean up old buffer</span>
</span><span id="LogPanel-398"><a href="#LogPanel-398"><span class="linenos">398</span></a>        <span class="n">old_buffer</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span><span id="LogPanel-399"><a href="#LogPanel-399"><span class="linenos">399</span></a>
</span><span id="LogPanel-400"><a href="#LogPanel-400"><span class="linenos">400</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Set max log entries&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="o">=</span><span class="n">max_entries</span><span class="p">)</span>
</span><span id="LogPanel-401"><a href="#LogPanel-401"><span class="linenos">401</span></a>
</span><span id="LogPanel-402"><a href="#LogPanel-402"><span class="linenos">402</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel-403"><a href="#LogPanel-403"><span class="linenos">403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel unmount event.&quot;&quot;&quot;</span>
</span><span id="LogPanel-404"><a href="#LogPanel-404"><span class="linenos">404</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span><span id="LogPanel-405"><a href="#LogPanel-405"><span class="linenos">405</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Log panel unmounted and cleaned up&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Panel for displaying and managing logs.</p>

<p>This panel provides real-time log display with filtering, searching,
and export capabilities using a bounded log buffer.</p>
</div>


                            <div id="LogPanel.__init__" class="classattr">
                                        <input id="LogPanel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LogPanel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;log-panel&#39;</span>, </span><span class="param"><span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span></span>)</span>

                <label class="view-source-button" for="LogPanel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.__init__-62"><a href="#LogPanel.__init__-62"><span class="linenos">62</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log-panel&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.__init__-63"><a href="#LogPanel.__init__-63"><span class="linenos">63</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the log panel.</span>
</span><span id="LogPanel.__init__-64"><a href="#LogPanel.__init__-64"><span class="linenos">64</span></a>
</span><span id="LogPanel.__init__-65"><a href="#LogPanel.__init__-65"><span class="linenos">65</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.__init__-66"><a href="#LogPanel.__init__-66"><span class="linenos">66</span></a><span class="sd">            id: Panel ID</span>
</span><span id="LogPanel.__init__-67"><a href="#LogPanel.__init__-67"><span class="linenos">67</span></a><span class="sd">            max_entries: Maximum number of log entries to keep</span>
</span><span id="LogPanel.__init__-68"><a href="#LogPanel.__init__-68"><span class="linenos">68</span></a>
</span><span id="LogPanel.__init__-69"><a href="#LogPanel.__init__-69"><span class="linenos">69</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.__init__-70"><a href="#LogPanel.__init__-70"><span class="linenos">70</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="LogPanel.__init__-71"><a href="#LogPanel.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="LogPanel.__init__-72"><a href="#LogPanel.__init__-72"><span class="linenos">72</span></a>
</span><span id="LogPanel.__init__-73"><a href="#LogPanel.__init__-73"><span class="linenos">73</span></a>        <span class="c1"># Initialize bounded log buffer</span>
</span><span id="LogPanel.__init__-74"><a href="#LogPanel.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span> <span class="o">=</span> <span class="n">LogBuffer</span><span class="p">(</span>
</span><span id="LogPanel.__init__-75"><a href="#LogPanel.__init__-75"><span class="linenos">75</span></a>            <span class="n">max_size</span><span class="o">=</span><span class="n">max_entries</span><span class="p">,</span>
</span><span id="LogPanel.__init__-76"><a href="#LogPanel.__init__-76"><span class="linenos">76</span></a>            <span class="n">coalesce_interval_ms</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>  <span class="c1"># 100ms burst coalescing</span>
</span><span id="LogPanel.__init__-77"><a href="#LogPanel.__init__-77"><span class="linenos">77</span></a>            <span class="n">render_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_render_callback</span><span class="p">,</span>
</span><span id="LogPanel.__init__-78"><a href="#LogPanel.__init__-78"><span class="linenos">78</span></a>        <span class="p">)</span>
</span><span id="LogPanel.__init__-79"><a href="#LogPanel.__init__-79"><span class="linenos">79</span></a>
</span><span id="LogPanel.__init__-80"><a href="#LogPanel.__init__-80"><span class="linenos">80</span></a>        <span class="c1"># Display configuration</span>
</span><span id="LogPanel.__init__-81"><a href="#LogPanel.__init__-81"><span class="linenos">81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="LogPanel.__init__-82"><a href="#LogPanel.__init__-82"><span class="linenos">82</span></a>            <span class="s2">&quot;levels&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">},</span>
</span><span id="LogPanel.__init__-83"><a href="#LogPanel.__init__-83"><span class="linenos">83</span></a>            <span class="s2">&quot;search_text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="LogPanel.__init__-84"><a href="#LogPanel.__init__-84"><span class="linenos">84</span></a>            <span class="s2">&quot;case_sensitive&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="LogPanel.__init__-85"><a href="#LogPanel.__init__-85"><span class="linenos">85</span></a>            <span class="s2">&quot;show_timestamps&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel.__init__-86"><a href="#LogPanel.__init__-86"><span class="linenos">86</span></a>            <span class="s2">&quot;show_levels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel.__init__-87"><a href="#LogPanel.__init__-87"><span class="linenos">87</span></a>            <span class="s2">&quot;show_sources&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="LogPanel.__init__-88"><a href="#LogPanel.__init__-88"><span class="linenos">88</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the log panel.</p>

<p>Args:
    id: Panel ID
    max_entries: Maximum number of log entries to keep</p>
</div>


                            </div>
                            <div id="LogPanel.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#LogPanel.logger"></a>
    
    

                            </div>
                            <div id="LogPanel.log_buffer" class="classattr">
                                <div class="attr variable">
            <span class="name">log_buffer</span>

        
    </div>
    <a class="headerlink" href="#LogPanel.log_buffer"></a>
    
    

                            </div>
                            <div id="LogPanel.filter_config" class="classattr">
                                <div class="attr variable">
            <span class="name">filter_config</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#LogPanel.filter_config"></a>
    
    

                            </div>
                            <div id="LogPanel.compose" class="classattr">
                                        <input id="LogPanel.compose-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compose</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">textual</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LogPanel.compose-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.compose"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.compose-90"><a href="#LogPanel.compose-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="LogPanel.compose-91"><a href="#LogPanel.compose-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the log panel layout.</span>
</span><span id="LogPanel.compose-92"><a href="#LogPanel.compose-92"><span class="linenos"> 92</span></a>
</span><span id="LogPanel.compose-93"><a href="#LogPanel.compose-93"><span class="linenos"> 93</span></a><span class="sd">        Returns:</span>
</span><span id="LogPanel.compose-94"><a href="#LogPanel.compose-94"><span class="linenos"> 94</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="LogPanel.compose-95"><a href="#LogPanel.compose-95"><span class="linenos"> 95</span></a>
</span><span id="LogPanel.compose-96"><a href="#LogPanel.compose-96"><span class="linenos"> 96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.compose-97"><a href="#LogPanel.compose-97"><span class="linenos"> 97</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Log Monitor&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-98"><a href="#LogPanel.compose-98"><span class="linenos"> 98</span></a>
</span><span id="LogPanel.compose-99"><a href="#LogPanel.compose-99"><span class="linenos"> 99</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="LogPanel.compose-100"><a href="#LogPanel.compose-100"><span class="linenos">100</span></a>            <span class="c1"># Log controls</span>
</span><span id="LogPanel.compose-101"><a href="#LogPanel.compose-101"><span class="linenos">101</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;log-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel.compose-102"><a href="#LogPanel.compose-102"><span class="linenos">102</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Clear Logs&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;clear-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-103"><a href="#LogPanel.compose-103"><span class="linenos">103</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Export Logs&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;export-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-104"><a href="#LogPanel.compose-104"><span class="linenos">104</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Auto-scroll&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;auto-scroll-btn&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-105"><a href="#LogPanel.compose-105"><span class="linenos">105</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Pause&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pause-logs-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-106"><a href="#LogPanel.compose-106"><span class="linenos">106</span></a>
</span><span id="LogPanel.compose-107"><a href="#LogPanel.compose-107"><span class="linenos">107</span></a>            <span class="c1"># Filter controls</span>
</span><span id="LogPanel.compose-108"><a href="#LogPanel.compose-108"><span class="linenos">108</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;filter-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel.compose-109"><a href="#LogPanel.compose-109"><span class="linenos">109</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Levels:&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-110"><a href="#LogPanel.compose-110"><span class="linenos">110</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-debug&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-111"><a href="#LogPanel.compose-111"><span class="linenos">111</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-info&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-112"><a href="#LogPanel.compose-112"><span class="linenos">112</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-warning&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-113"><a href="#LogPanel.compose-113"><span class="linenos">113</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-error&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-114"><a href="#LogPanel.compose-114"><span class="linenos">114</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;CRITICAL&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;filter-critical&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-115"><a href="#LogPanel.compose-115"><span class="linenos">115</span></a>
</span><span id="LogPanel.compose-116"><a href="#LogPanel.compose-116"><span class="linenos">116</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;search-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel.compose-117"><a href="#LogPanel.compose-117"><span class="linenos">117</span></a>                <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Search:&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-118"><a href="#LogPanel.compose-118"><span class="linenos">118</span></a>                <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Search logs...&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;search-input&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-119"><a href="#LogPanel.compose-119"><span class="linenos">119</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Case Sensitive&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;case-sensitive-search&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="LogPanel.compose-120"><a href="#LogPanel.compose-120"><span class="linenos">120</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Clear Search&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;clear-search-btn&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-121"><a href="#LogPanel.compose-121"><span class="linenos">121</span></a>
</span><span id="LogPanel.compose-122"><a href="#LogPanel.compose-122"><span class="linenos">122</span></a>            <span class="c1"># Display options</span>
</span><span id="LogPanel.compose-123"><a href="#LogPanel.compose-123"><span class="linenos">123</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;display-controls&quot;</span><span class="p">):</span>
</span><span id="LogPanel.compose-124"><a href="#LogPanel.compose-124"><span class="linenos">124</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Timestamps&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-timestamps&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-125"><a href="#LogPanel.compose-125"><span class="linenos">125</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Levels&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-levels&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-126"><a href="#LogPanel.compose-126"><span class="linenos">126</span></a>                <span class="k">yield</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;Show Sources&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;show-sources&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="LogPanel.compose-127"><a href="#LogPanel.compose-127"><span class="linenos">127</span></a>
</span><span id="LogPanel.compose-128"><a href="#LogPanel.compose-128"><span class="linenos">128</span></a>            <span class="c1"># Log display</span>
</span><span id="LogPanel.compose-129"><a href="#LogPanel.compose-129"><span class="linenos">129</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Log Entries:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="LogPanel.compose-130"><a href="#LogPanel.compose-130"><span class="linenos">130</span></a>            <span class="k">yield</span> <span class="n">TextArea</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;log-display&quot;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Compose the log panel layout.</p>

<p>Returns:
    ComposeResult: The composed UI elements</p>
</div>


                            </div>
                            <div id="LogPanel.on_mount" class="classattr">
                                        <input id="LogPanel.on_mount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_mount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.on_mount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.on_mount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.on_mount-132"><a href="#LogPanel.on_mount-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.on_mount-133"><a href="#LogPanel.on_mount-133"><span class="linenos">133</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="LogPanel.on_mount-134"><a href="#LogPanel.on_mount-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Log panel mounted&quot;</span><span class="p">)</span>
</span><span id="LogPanel.on_mount-135"><a href="#LogPanel.on_mount-135"><span class="linenos">135</span></a>
</span><span id="LogPanel.on_mount-136"><a href="#LogPanel.on_mount-136"><span class="linenos">136</span></a>        <span class="c1"># Initialize log display</span>
</span><span id="LogPanel.on_mount-137"><a href="#LogPanel.on_mount-137"><span class="linenos">137</span></a>        <span class="n">log_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-display&quot;</span><span class="p">,</span> <span class="n">TextArea</span><span class="p">)</span>
</span><span id="LogPanel.on_mount-138"><a href="#LogPanel.on_mount-138"><span class="linenos">138</span></a>        <span class="n">log_display</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Log monitor ready. Waiting for log entries...</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle panel mount event.</p>
</div>


                            </div>
                            <div id="LogPanel.add_log_entries" class="classattr">
                                        <input id="LogPanel.add_log_entries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_log_entries</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.add_log_entries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.add_log_entries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.add_log_entries-140"><a href="#LogPanel.add_log_entries-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_log_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.add_log_entries-141"><a href="#LogPanel.add_log_entries-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add new log entries to the display.</span>
</span><span id="LogPanel.add_log_entries-142"><a href="#LogPanel.add_log_entries-142"><span class="linenos">142</span></a>
</span><span id="LogPanel.add_log_entries-143"><a href="#LogPanel.add_log_entries-143"><span class="linenos">143</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.add_log_entries-144"><a href="#LogPanel.add_log_entries-144"><span class="linenos">144</span></a><span class="sd">            entries: List of log entries to add</span>
</span><span id="LogPanel.add_log_entries-145"><a href="#LogPanel.add_log_entries-145"><span class="linenos">145</span></a>
</span><span id="LogPanel.add_log_entries-146"><a href="#LogPanel.add_log_entries-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.add_log_entries-147"><a href="#LogPanel.add_log_entries-147"><span class="linenos">147</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;add_log_entries called&quot;</span><span class="p">,</span> <span class="n">entries_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">),</span> <span class="n">entries</span><span class="o">=</span><span class="n">entries</span><span class="p">)</span>
</span><span id="LogPanel.add_log_entries-148"><a href="#LogPanel.add_log_entries-148"><span class="linenos">148</span></a>
</span><span id="LogPanel.add_log_entries-149"><a href="#LogPanel.add_log_entries-149"><span class="linenos">149</span></a>        <span class="c1"># Add entries to the bounded buffer (handles filtering and coalescing)</span>
</span><span id="LogPanel.add_log_entries-150"><a href="#LogPanel.add_log_entries-150"><span class="linenos">150</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">add_entries</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="LogPanel.add_log_entries-151"><a href="#LogPanel.add_log_entries-151"><span class="linenos">151</span></a>
</span><span id="LogPanel.add_log_entries-152"><a href="#LogPanel.add_log_entries-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="LogPanel.add_log_entries-153"><a href="#LogPanel.add_log_entries-153"><span class="linenos">153</span></a>            <span class="s2">&quot;Added log entries to buffer&quot;</span><span class="p">,</span>
</span><span id="LogPanel.add_log_entries-154"><a href="#LogPanel.add_log_entries-154"><span class="linenos">154</span></a>            <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">),</span>
</span><span id="LogPanel.add_log_entries-155"><a href="#LogPanel.add_log_entries-155"><span class="linenos">155</span></a>            <span class="n">buffer_stats</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">(),</span>
</span><span id="LogPanel.add_log_entries-156"><a href="#LogPanel.add_log_entries-156"><span class="linenos">156</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add new log entries to the display.</p>

<p>Args:
    entries: List of log entries to add</p>
</div>


                            </div>
                            <div id="LogPanel.clear_logs" class="classattr">
                                        <input id="LogPanel.clear_logs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear_logs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.clear_logs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.clear_logs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.clear_logs-158"><a href="#LogPanel.clear_logs-158"><span class="linenos">158</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.clear_logs-159"><a href="#LogPanel.clear_logs-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all log entries.&quot;&quot;&quot;</span>
</span><span id="LogPanel.clear_logs-160"><a href="#LogPanel.clear_logs-160"><span class="linenos">160</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="LogPanel.clear_logs-161"><a href="#LogPanel.clear_logs-161"><span class="linenos">161</span></a>
</span><span id="LogPanel.clear_logs-162"><a href="#LogPanel.clear_logs-162"><span class="linenos">162</span></a>        <span class="n">log_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#log-display&quot;</span><span class="p">,</span> <span class="n">TextArea</span><span class="p">)</span>
</span><span id="LogPanel.clear_logs-163"><a href="#LogPanel.clear_logs-163"><span class="linenos">163</span></a>        <span class="n">log_display</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Logs cleared.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="LogPanel.clear_logs-164"><a href="#LogPanel.clear_logs-164"><span class="linenos">164</span></a>
</span><span id="LogPanel.clear_logs-165"><a href="#LogPanel.clear_logs-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleared all log entries&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Clear all log entries.</p>
</div>


                            </div>
                            <div id="LogPanel.on_button_pressed" class="classattr">
                                        <input id="LogPanel.on_button_pressed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_button_pressed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_button</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.on_button_pressed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.on_button_pressed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.on_button_pressed-241"><a href="#LogPanel.on_button_pressed-241"><span class="linenos">241</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-242"><a href="#LogPanel.on_button_pressed-242"><span class="linenos">242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="LogPanel.on_button_pressed-243"><a href="#LogPanel.on_button_pressed-243"><span class="linenos">243</span></a>
</span><span id="LogPanel.on_button_pressed-244"><a href="#LogPanel.on_button_pressed-244"><span class="linenos">244</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.on_button_pressed-245"><a href="#LogPanel.on_button_pressed-245"><span class="linenos">245</span></a><span class="sd">            event: Button press event</span>
</span><span id="LogPanel.on_button_pressed-246"><a href="#LogPanel.on_button_pressed-246"><span class="linenos">246</span></a>
</span><span id="LogPanel.on_button_pressed-247"><a href="#LogPanel.on_button_pressed-247"><span class="linenos">247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.on_button_pressed-248"><a href="#LogPanel.on_button_pressed-248"><span class="linenos">248</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="LogPanel.on_button_pressed-249"><a href="#LogPanel.on_button_pressed-249"><span class="linenos">249</span></a>
</span><span id="LogPanel.on_button_pressed-250"><a href="#LogPanel.on_button_pressed-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;clear-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-251"><a href="#LogPanel.on_button_pressed-251"><span class="linenos">251</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_logs</span><span class="p">()</span>
</span><span id="LogPanel.on_button_pressed-252"><a href="#LogPanel.on_button_pressed-252"><span class="linenos">252</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;export-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-253"><a href="#LogPanel.on_button_pressed-253"><span class="linenos">253</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_export_logs</span><span class="p">()</span>
</span><span id="LogPanel.on_button_pressed-254"><a href="#LogPanel.on_button_pressed-254"><span class="linenos">254</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;auto-scroll-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-255"><a href="#LogPanel.on_button_pressed-255"><span class="linenos">255</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_auto_scroll</span><span class="p">()</span>
</span><span id="LogPanel.on_button_pressed-256"><a href="#LogPanel.on_button_pressed-256"><span class="linenos">256</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;pause-logs-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-257"><a href="#LogPanel.on_button_pressed-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_pause</span><span class="p">()</span>
</span><span id="LogPanel.on_button_pressed-258"><a href="#LogPanel.on_button_pressed-258"><span class="linenos">258</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;clear-search-btn&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_button_pressed-259"><a href="#LogPanel.on_button_pressed-259"><span class="linenos">259</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_clear_search</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle button press events.</p>

<p>Args:
    event: Button press event</p>
</div>


                            </div>
                            <div id="LogPanel.on_checkbox_changed" class="classattr">
                                        <input id="LogPanel.on_checkbox_changed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_checkbox_changed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_checkbox</span><span class="o">.</span><span class="n">Checkbox</span><span class="o">.</span><span class="n">Changed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.on_checkbox_changed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.on_checkbox_changed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.on_checkbox_changed-261"><a href="#LogPanel.on_checkbox_changed-261"><span class="linenos">261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_checkbox_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Checkbox</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-262"><a href="#LogPanel.on_checkbox_changed-262"><span class="linenos">262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle checkbox change events.</span>
</span><span id="LogPanel.on_checkbox_changed-263"><a href="#LogPanel.on_checkbox_changed-263"><span class="linenos">263</span></a>
</span><span id="LogPanel.on_checkbox_changed-264"><a href="#LogPanel.on_checkbox_changed-264"><span class="linenos">264</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.on_checkbox_changed-265"><a href="#LogPanel.on_checkbox_changed-265"><span class="linenos">265</span></a><span class="sd">            event: Checkbox change event</span>
</span><span id="LogPanel.on_checkbox_changed-266"><a href="#LogPanel.on_checkbox_changed-266"><span class="linenos">266</span></a>
</span><span id="LogPanel.on_checkbox_changed-267"><a href="#LogPanel.on_checkbox_changed-267"><span class="linenos">267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.on_checkbox_changed-268"><a href="#LogPanel.on_checkbox_changed-268"><span class="linenos">268</span></a>        <span class="n">checkbox_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">id</span>
</span><span id="LogPanel.on_checkbox_changed-269"><a href="#LogPanel.on_checkbox_changed-269"><span class="linenos">269</span></a>
</span><span id="LogPanel.on_checkbox_changed-270"><a href="#LogPanel.on_checkbox_changed-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="n">checkbox_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;filter-&quot;</span><span class="p">):</span>
</span><span id="LogPanel.on_checkbox_changed-271"><a href="#LogPanel.on_checkbox_changed-271"><span class="linenos">271</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">checkbox_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;filter-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-272"><a href="#LogPanel.on_checkbox_changed-272"><span class="linenos">272</span></a>            <span class="n">filter_levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">]</span>
</span><span id="LogPanel.on_checkbox_changed-273"><a href="#LogPanel.on_checkbox_changed-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filter_levels</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
</span><span id="LogPanel.on_checkbox_changed-274"><a href="#LogPanel.on_checkbox_changed-274"><span class="linenos">274</span></a>                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-275"><a href="#LogPanel.on_checkbox_changed-275"><span class="linenos">275</span></a>                    <span class="n">filter_levels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogPanel.on_checkbox_changed-276"><a href="#LogPanel.on_checkbox_changed-276"><span class="linenos">276</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-277"><a href="#LogPanel.on_checkbox_changed-277"><span class="linenos">277</span></a>                    <span class="n">filter_levels</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogPanel.on_checkbox_changed-278"><a href="#LogPanel.on_checkbox_changed-278"><span class="linenos">278</span></a>
</span><span id="LogPanel.on_checkbox_changed-279"><a href="#LogPanel.on_checkbox_changed-279"><span class="linenos">279</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-280"><a href="#LogPanel.on_checkbox_changed-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-281"><a href="#LogPanel.on_checkbox_changed-281"><span class="linenos">281</span></a>
</span><span id="LogPanel.on_checkbox_changed-282"><a href="#LogPanel.on_checkbox_changed-282"><span class="linenos">282</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-timestamps&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-283"><a href="#LogPanel.on_checkbox_changed-283"><span class="linenos">283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_timestamps&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel.on_checkbox_changed-284"><a href="#LogPanel.on_checkbox_changed-284"><span class="linenos">284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-285"><a href="#LogPanel.on_checkbox_changed-285"><span class="linenos">285</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-levels&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-286"><a href="#LogPanel.on_checkbox_changed-286"><span class="linenos">286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_levels&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel.on_checkbox_changed-287"><a href="#LogPanel.on_checkbox_changed-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-288"><a href="#LogPanel.on_checkbox_changed-288"><span class="linenos">288</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;show-sources&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-289"><a href="#LogPanel.on_checkbox_changed-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;show_sources&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel.on_checkbox_changed-290"><a href="#LogPanel.on_checkbox_changed-290"><span class="linenos">290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-291"><a href="#LogPanel.on_checkbox_changed-291"><span class="linenos">291</span></a>        <span class="k">elif</span> <span class="n">checkbox_id</span> <span class="o">==</span> <span class="s2">&quot;case-sensitive-search&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_checkbox_changed-292"><a href="#LogPanel.on_checkbox_changed-292"><span class="linenos">292</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;case_sensitive&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">checkbox</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel.on_checkbox_changed-293"><a href="#LogPanel.on_checkbox_changed-293"><span class="linenos">293</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel.on_checkbox_changed-294"><a href="#LogPanel.on_checkbox_changed-294"><span class="linenos">294</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle checkbox change events.</p>

<p>Args:
    event: Checkbox change event</p>
</div>


                            </div>
                            <div id="LogPanel.on_input_changed" class="classattr">
                                        <input id="LogPanel.on_input_changed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_input_changed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_input</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">Changed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.on_input_changed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.on_input_changed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.on_input_changed-296"><a href="#LogPanel.on_input_changed-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Input</span><span class="o">.</span><span class="n">Changed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.on_input_changed-297"><a href="#LogPanel.on_input_changed-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle input field changes.</span>
</span><span id="LogPanel.on_input_changed-298"><a href="#LogPanel.on_input_changed-298"><span class="linenos">298</span></a>
</span><span id="LogPanel.on_input_changed-299"><a href="#LogPanel.on_input_changed-299"><span class="linenos">299</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.on_input_changed-300"><a href="#LogPanel.on_input_changed-300"><span class="linenos">300</span></a><span class="sd">            event: Input change event</span>
</span><span id="LogPanel.on_input_changed-301"><a href="#LogPanel.on_input_changed-301"><span class="linenos">301</span></a>
</span><span id="LogPanel.on_input_changed-302"><a href="#LogPanel.on_input_changed-302"><span class="linenos">302</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.on_input_changed-303"><a href="#LogPanel.on_input_changed-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;search-input&quot;</span><span class="p">:</span>
</span><span id="LogPanel.on_input_changed-304"><a href="#LogPanel.on_input_changed-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">[</span><span class="s2">&quot;search_text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span>
</span><span id="LogPanel.on_input_changed-305"><a href="#LogPanel.on_input_changed-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_apply_filters</span><span class="p">()</span>
</span><span id="LogPanel.on_input_changed-306"><a href="#LogPanel.on_input_changed-306"><span class="linenos">306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle input field changes.</p>

<p>Args:
    event: Input change event</p>
</div>


                            </div>
                            <div id="LogPanel.get_log_statistics" class="classattr">
                                        <input id="LogPanel.get_log_statistics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_log_statistics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LogPanel.get_log_statistics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.get_log_statistics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.get_log_statistics-354"><a href="#LogPanel.get_log_statistics-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_log_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="LogPanel.get_log_statistics-355"><a href="#LogPanel.get_log_statistics-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get log statistics.</span>
</span><span id="LogPanel.get_log_statistics-356"><a href="#LogPanel.get_log_statistics-356"><span class="linenos">356</span></a>
</span><span id="LogPanel.get_log_statistics-357"><a href="#LogPanel.get_log_statistics-357"><span class="linenos">357</span></a><span class="sd">        Returns:</span>
</span><span id="LogPanel.get_log_statistics-358"><a href="#LogPanel.get_log_statistics-358"><span class="linenos">358</span></a><span class="sd">            Dictionary of log statistics</span>
</span><span id="LogPanel.get_log_statistics-359"><a href="#LogPanel.get_log_statistics-359"><span class="linenos">359</span></a>
</span><span id="LogPanel.get_log_statistics-360"><a href="#LogPanel.get_log_statistics-360"><span class="linenos">360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.get_log_statistics-361"><a href="#LogPanel.get_log_statistics-361"><span class="linenos">361</span></a>        <span class="n">buffer_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">()</span>
</span><span id="LogPanel.get_log_statistics-362"><a href="#LogPanel.get_log_statistics-362"><span class="linenos">362</span></a>        <span class="n">filtered_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_filtered_entries</span><span class="p">()</span>
</span><span id="LogPanel.get_log_statistics-363"><a href="#LogPanel.get_log_statistics-363"><span class="linenos">363</span></a>
</span><span id="LogPanel.get_log_statistics-364"><a href="#LogPanel.get_log_statistics-364"><span class="linenos">364</span></a>        <span class="c1"># Count by level</span>
</span><span id="LogPanel.get_log_statistics-365"><a href="#LogPanel.get_log_statistics-365"><span class="linenos">365</span></a>        <span class="n">level_counts</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LogPanel.get_log_statistics-366"><a href="#LogPanel.get_log_statistics-366"><span class="linenos">366</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">get_all_entries</span><span class="p">():</span>
</span><span id="LogPanel.get_log_statistics-367"><a href="#LogPanel.get_log_statistics-367"><span class="linenos">367</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="LogPanel.get_log_statistics-368"><a href="#LogPanel.get_log_statistics-368"><span class="linenos">368</span></a>            <span class="n">level_counts</span><span class="p">[</span><span class="n">level</span><span class="p">]</span> <span class="o">=</span> <span class="n">level_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="LogPanel.get_log_statistics-369"><a href="#LogPanel.get_log_statistics-369"><span class="linenos">369</span></a>
</span><span id="LogPanel.get_log_statistics-370"><a href="#LogPanel.get_log_statistics-370"><span class="linenos">370</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="LogPanel.get_log_statistics-371"><a href="#LogPanel.get_log_statistics-371"><span class="linenos">371</span></a>            <span class="s2">&quot;total_entries&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">[</span><span class="s2">&quot;buffer_size&quot;</span><span class="p">],</span>
</span><span id="LogPanel.get_log_statistics-372"><a href="#LogPanel.get_log_statistics-372"><span class="linenos">372</span></a>            <span class="s2">&quot;filtered_entries&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered_entries</span><span class="p">),</span>
</span><span id="LogPanel.get_log_statistics-373"><a href="#LogPanel.get_log_statistics-373"><span class="linenos">373</span></a>            <span class="s2">&quot;level_counts&quot;</span><span class="p">:</span> <span class="n">level_counts</span><span class="p">,</span>
</span><span id="LogPanel.get_log_statistics-374"><a href="#LogPanel.get_log_statistics-374"><span class="linenos">374</span></a>            <span class="s2">&quot;filter_config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="p">,</span>
</span><span id="LogPanel.get_log_statistics-375"><a href="#LogPanel.get_log_statistics-375"><span class="linenos">375</span></a>            <span class="s2">&quot;max_entries&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">[</span><span class="s2">&quot;max_size&quot;</span><span class="p">],</span>
</span><span id="LogPanel.get_log_statistics-376"><a href="#LogPanel.get_log_statistics-376"><span class="linenos">376</span></a>            <span class="s2">&quot;buffer_statistics&quot;</span><span class="p">:</span> <span class="n">buffer_stats</span><span class="p">,</span>
</span><span id="LogPanel.get_log_statistics-377"><a href="#LogPanel.get_log_statistics-377"><span class="linenos">377</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get log statistics.</p>

<p>Returns:
    Dictionary of log statistics</p>
</div>


                            </div>
                            <div id="LogPanel.set_max_entries" class="classattr">
                                        <input id="LogPanel.set_max_entries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_max_entries</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.set_max_entries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.set_max_entries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.set_max_entries-379"><a href="#LogPanel.set_max_entries-379"><span class="linenos">379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_max_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_entries</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.set_max_entries-380"><a href="#LogPanel.set_max_entries-380"><span class="linenos">380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set maximum number of log entries to keep.</span>
</span><span id="LogPanel.set_max_entries-381"><a href="#LogPanel.set_max_entries-381"><span class="linenos">381</span></a>
</span><span id="LogPanel.set_max_entries-382"><a href="#LogPanel.set_max_entries-382"><span class="linenos">382</span></a><span class="sd">        Args:</span>
</span><span id="LogPanel.set_max_entries-383"><a href="#LogPanel.set_max_entries-383"><span class="linenos">383</span></a><span class="sd">            max_entries: Maximum number of entries</span>
</span><span id="LogPanel.set_max_entries-384"><a href="#LogPanel.set_max_entries-384"><span class="linenos">384</span></a>
</span><span id="LogPanel.set_max_entries-385"><a href="#LogPanel.set_max_entries-385"><span class="linenos">385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogPanel.set_max_entries-386"><a href="#LogPanel.set_max_entries-386"><span class="linenos">386</span></a>        <span class="c1"># Create new buffer with new max size</span>
</span><span id="LogPanel.set_max_entries-387"><a href="#LogPanel.set_max_entries-387"><span class="linenos">387</span></a>        <span class="n">old_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span>
</span><span id="LogPanel.set_max_entries-388"><a href="#LogPanel.set_max_entries-388"><span class="linenos">388</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span> <span class="o">=</span> <span class="n">LogBuffer</span><span class="p">(</span>
</span><span id="LogPanel.set_max_entries-389"><a href="#LogPanel.set_max_entries-389"><span class="linenos">389</span></a>            <span class="n">max_size</span><span class="o">=</span><span class="n">max_entries</span><span class="p">,</span>
</span><span id="LogPanel.set_max_entries-390"><a href="#LogPanel.set_max_entries-390"><span class="linenos">390</span></a>            <span class="n">coalesce_interval_ms</span><span class="o">=</span><span class="n">old_buffer</span><span class="o">.</span><span class="n">coalesce_interval_ms</span><span class="p">,</span>
</span><span id="LogPanel.set_max_entries-391"><a href="#LogPanel.set_max_entries-391"><span class="linenos">391</span></a>            <span class="n">render_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_render_callback</span><span class="p">,</span>
</span><span id="LogPanel.set_max_entries-392"><a href="#LogPanel.set_max_entries-392"><span class="linenos">392</span></a>        <span class="p">)</span>
</span><span id="LogPanel.set_max_entries-393"><a href="#LogPanel.set_max_entries-393"><span class="linenos">393</span></a>
</span><span id="LogPanel.set_max_entries-394"><a href="#LogPanel.set_max_entries-394"><span class="linenos">394</span></a>        <span class="c1"># Copy existing entries</span>
</span><span id="LogPanel.set_max_entries-395"><a href="#LogPanel.set_max_entries-395"><span class="linenos">395</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">add_entries</span><span class="p">(</span><span class="n">old_buffer</span><span class="o">.</span><span class="n">get_all_entries</span><span class="p">())</span>
</span><span id="LogPanel.set_max_entries-396"><a href="#LogPanel.set_max_entries-396"><span class="linenos">396</span></a>
</span><span id="LogPanel.set_max_entries-397"><a href="#LogPanel.set_max_entries-397"><span class="linenos">397</span></a>        <span class="c1"># Clean up old buffer</span>
</span><span id="LogPanel.set_max_entries-398"><a href="#LogPanel.set_max_entries-398"><span class="linenos">398</span></a>        <span class="n">old_buffer</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span><span id="LogPanel.set_max_entries-399"><a href="#LogPanel.set_max_entries-399"><span class="linenos">399</span></a>
</span><span id="LogPanel.set_max_entries-400"><a href="#LogPanel.set_max_entries-400"><span class="linenos">400</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Set max log entries&quot;</span><span class="p">,</span> <span class="n">max_entries</span><span class="o">=</span><span class="n">max_entries</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set maximum number of log entries to keep.</p>

<p>Args:
    max_entries: Maximum number of entries</p>
</div>


                            </div>
                            <div id="LogPanel.on_unmount" class="classattr">
                                        <input id="LogPanel.on_unmount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_unmount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogPanel.on_unmount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogPanel.on_unmount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogPanel.on_unmount-402"><a href="#LogPanel.on_unmount-402"><span class="linenos">402</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_unmount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogPanel.on_unmount-403"><a href="#LogPanel.on_unmount-403"><span class="linenos">403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel unmount event.&quot;&quot;&quot;</span>
</span><span id="LogPanel.on_unmount-404"><a href="#LogPanel.on_unmount-404"><span class="linenos">404</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_buffer</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span><span id="LogPanel.on_unmount-405"><a href="#LogPanel.on_unmount-405"><span class="linenos">405</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Log panel unmounted and cleaned up&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle panel unmount event.</p>
</div>


                            </div>
                            <div id="LogPanel.can_focus" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus</span><span class="annotation">: bool</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#LogPanel.can_focus"></a>
    
            <div class="docstring"><p>Widget may receive focus.</p>
</div>


                            </div>
                            <div id="LogPanel.can_focus_children" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus_children</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#LogPanel.can_focus_children"></a>
    
            <div class="docstring"><p>Widget's children may receive focus.</p>
</div>


                            </div>
                </section>
                <section id="ServerPanel">
                            <input id="ServerPanel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ServerPanel</span><wbr>(<span class="base">textual.containers.Container</span>):

                <label class="view-source-button" for="ServerPanel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel-50"><a href="#ServerPanel-50"><span class="linenos"> 50</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ServerPanel</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
</span><span id="ServerPanel-51"><a href="#ServerPanel-51"><span class="linenos"> 51</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Panel for managing the MCP server.</span>
</span><span id="ServerPanel-52"><a href="#ServerPanel-52"><span class="linenos"> 52</span></a>
</span><span id="ServerPanel-53"><a href="#ServerPanel-53"><span class="linenos"> 53</span></a><span class="sd">    This panel provides controls for starting/stopping the server,</span>
</span><span id="ServerPanel-54"><a href="#ServerPanel-54"><span class="linenos"> 54</span></a><span class="sd">    viewing server status, and managing server configuration.</span>
</span><span id="ServerPanel-55"><a href="#ServerPanel-55"><span class="linenos"> 55</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ServerPanel-56"><a href="#ServerPanel-56"><span class="linenos"> 56</span></a>
</span><span id="ServerPanel-57"><a href="#ServerPanel-57"><span class="linenos"> 57</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;server-panel&quot;</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-58"><a href="#ServerPanel-58"><span class="linenos"> 58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the server panel.</span>
</span><span id="ServerPanel-59"><a href="#ServerPanel-59"><span class="linenos"> 59</span></a>
</span><span id="ServerPanel-60"><a href="#ServerPanel-60"><span class="linenos"> 60</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel-61"><a href="#ServerPanel-61"><span class="linenos"> 61</span></a><span class="sd">            id: Panel ID</span>
</span><span id="ServerPanel-62"><a href="#ServerPanel-62"><span class="linenos"> 62</span></a><span class="sd">            config_path: Optional path to configuration file</span>
</span><span id="ServerPanel-63"><a href="#ServerPanel-63"><span class="linenos"> 63</span></a>
</span><span id="ServerPanel-64"><a href="#ServerPanel-64"><span class="linenos"> 64</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-65"><a href="#ServerPanel-65"><span class="linenos"> 65</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="ServerPanel-66"><a href="#ServerPanel-66"><span class="linenos"> 66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-67"><a href="#ServerPanel-67"><span class="linenos"> 67</span></a>
</span><span id="ServerPanel-68"><a href="#ServerPanel-68"><span class="linenos"> 68</span></a>        <span class="c1"># State</span>
</span><span id="ServerPanel-69"><a href="#ServerPanel-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ServerPanel-70"><a href="#ServerPanel-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ServerPanel-71"><a href="#ServerPanel-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ServerPanel-72"><a href="#ServerPanel-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ServerPanel-73"><a href="#ServerPanel-73"><span class="linenos"> 73</span></a>
</span><span id="ServerPanel-74"><a href="#ServerPanel-74"><span class="linenos"> 74</span></a>        <span class="c1"># Process manager</span>
</span><span id="ServerPanel-75"><a href="#ServerPanel-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span> <span class="o">=</span> <span class="n">ServerProcessManager</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="ServerPanel-76"><a href="#ServerPanel-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">add_status_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_server_status_update</span><span class="p">)</span>
</span><span id="ServerPanel-77"><a href="#ServerPanel-77"><span class="linenos"> 77</span></a>
</span><span id="ServerPanel-78"><a href="#ServerPanel-78"><span class="linenos"> 78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="ServerPanel-79"><a href="#ServerPanel-79"><span class="linenos"> 79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the server panel layout.</span>
</span><span id="ServerPanel-80"><a href="#ServerPanel-80"><span class="linenos"> 80</span></a>
</span><span id="ServerPanel-81"><a href="#ServerPanel-81"><span class="linenos"> 81</span></a><span class="sd">        Returns:</span>
</span><span id="ServerPanel-82"><a href="#ServerPanel-82"><span class="linenos"> 82</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="ServerPanel-83"><a href="#ServerPanel-83"><span class="linenos"> 83</span></a>
</span><span id="ServerPanel-84"><a href="#ServerPanel-84"><span class="linenos"> 84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-85"><a href="#ServerPanel-85"><span class="linenos"> 85</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Management&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-86"><a href="#ServerPanel-86"><span class="linenos"> 86</span></a>
</span><span id="ServerPanel-87"><a href="#ServerPanel-87"><span class="linenos"> 87</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="ServerPanel-88"><a href="#ServerPanel-88"><span class="linenos"> 88</span></a>            <span class="c1"># Server controls</span>
</span><span id="ServerPanel-89"><a href="#ServerPanel-89"><span class="linenos"> 89</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;server-controls&quot;</span><span class="p">):</span>
</span><span id="ServerPanel-90"><a href="#ServerPanel-90"><span class="linenos"> 90</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Start Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;start-server-btn&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-91"><a href="#ServerPanel-91"><span class="linenos"> 91</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Stop Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;stop-server-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ServerPanel-92"><a href="#ServerPanel-92"><span class="linenos"> 92</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Restart Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;restart-server-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ServerPanel-93"><a href="#ServerPanel-93"><span class="linenos"> 93</span></a>
</span><span id="ServerPanel-94"><a href="#ServerPanel-94"><span class="linenos"> 94</span></a>            <span class="c1"># Server status</span>
</span><span id="ServerPanel-95"><a href="#ServerPanel-95"><span class="linenos"> 95</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Status:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-96"><a href="#ServerPanel-96"><span class="linenos"> 96</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Status: Stopped&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-status-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-97"><a href="#ServerPanel-97"><span class="linenos"> 97</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-uptime-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-98"><a href="#ServerPanel-98"><span class="linenos"> 98</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Port: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-port-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-99"><a href="#ServerPanel-99"><span class="linenos"> 99</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Address: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-address-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-100"><a href="#ServerPanel-100"><span class="linenos">100</span></a>
</span><span id="ServerPanel-101"><a href="#ServerPanel-101"><span class="linenos">101</span></a>            <span class="c1"># Server statistics</span>
</span><span id="ServerPanel-102"><a href="#ServerPanel-102"><span class="linenos">102</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Statistics:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-103"><a href="#ServerPanel-103"><span class="linenos">103</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Active Connections: 0&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;active-connections-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-104"><a href="#ServerPanel-104"><span class="linenos">104</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Total Requests: 0&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;total-requests-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-105"><a href="#ServerPanel-105"><span class="linenos">105</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Error Rate: 0%&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;error-rate-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-106"><a href="#ServerPanel-106"><span class="linenos">106</span></a>
</span><span id="ServerPanel-107"><a href="#ServerPanel-107"><span class="linenos">107</span></a>            <span class="c1"># Configuration (Read-only display)</span>
</span><span id="ServerPanel-108"><a href="#ServerPanel-108"><span class="linenos">108</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Effective Configuration:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-109"><a href="#ServerPanel-109"><span class="linenos">109</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Port: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-port-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-110"><a href="#ServerPanel-110"><span class="linenos">110</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Bind Address: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-address-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-111"><a href="#ServerPanel-111"><span class="linenos">111</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Max Connections: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-max-connections-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-112"><a href="#ServerPanel-112"><span class="linenos">112</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Graceful Shutdown Timeout: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-timeout-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-113"><a href="#ServerPanel-113"><span class="linenos">113</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;API Key Management: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-api-keys-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-114"><a href="#ServerPanel-114"><span class="linenos">114</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Rate Limit per Key: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-rate-limit-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-115"><a href="#ServerPanel-115"><span class="linenos">115</span></a>
</span><span id="ServerPanel-116"><a href="#ServerPanel-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-117"><a href="#ServerPanel-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-118"><a href="#ServerPanel-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server panel mounted&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-119"><a href="#ServerPanel-119"><span class="linenos">119</span></a>
</span><span id="ServerPanel-120"><a href="#ServerPanel-120"><span class="linenos">120</span></a>        <span class="c1"># Initialize configuration display</span>
</span><span id="ServerPanel-121"><a href="#ServerPanel-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_config_display</span><span class="p">()</span>
</span><span id="ServerPanel-122"><a href="#ServerPanel-122"><span class="linenos">122</span></a>
</span><span id="ServerPanel-123"><a href="#ServerPanel-123"><span class="linenos">123</span></a>        <span class="c1"># Update initial status</span>
</span><span id="ServerPanel-124"><a href="#ServerPanel-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_status</span><span class="p">()</span>
</span><span id="ServerPanel-125"><a href="#ServerPanel-125"><span class="linenos">125</span></a>
</span><span id="ServerPanel-126"><a href="#ServerPanel-126"><span class="linenos">126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_initialize_config_display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-127"><a href="#ServerPanel-127"><span class="linenos">127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize configuration display with effective configuration.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-128"><a href="#ServerPanel-128"><span class="linenos">128</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ServerPanel-129"><a href="#ServerPanel-129"><span class="linenos">129</span></a>            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">get_effective_configuration</span><span class="p">()</span>
</span><span id="ServerPanel-130"><a href="#ServerPanel-130"><span class="linenos">130</span></a>
</span><span id="ServerPanel-131"><a href="#ServerPanel-131"><span class="linenos">131</span></a>            <span class="c1"># Update configuration display</span>
</span><span id="ServerPanel-132"><a href="#ServerPanel-132"><span class="linenos">132</span></a>            <span class="n">port_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-port-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-133"><a href="#ServerPanel-133"><span class="linenos">133</span></a>            <span class="n">address_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-address-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-134"><a href="#ServerPanel-134"><span class="linenos">134</span></a>            <span class="n">max_connections_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-max-connections-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-135"><a href="#ServerPanel-135"><span class="linenos">135</span></a>            <span class="n">timeout_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-timeout-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-136"><a href="#ServerPanel-136"><span class="linenos">136</span></a>            <span class="n">api_keys_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-api-keys-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-137"><a href="#ServerPanel-137"><span class="linenos">137</span></a>            <span class="n">rate_limit_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#config-rate-limit-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-138"><a href="#ServerPanel-138"><span class="linenos">138</span></a>
</span><span id="ServerPanel-139"><a href="#ServerPanel-139"><span class="linenos">139</span></a>            <span class="n">port_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-140"><a href="#ServerPanel-140"><span class="linenos">140</span></a>            <span class="n">address_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bind Address: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bind_address&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-141"><a href="#ServerPanel-141"><span class="linenos">141</span></a>            <span class="n">max_connections_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max Connections: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_connections&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-142"><a href="#ServerPanel-142"><span class="linenos">142</span></a>            <span class="n">timeout_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="ServerPanel-143"><a href="#ServerPanel-143"><span class="linenos">143</span></a>                <span class="sa">f</span><span class="s2">&quot;Graceful Shutdown Timeout: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;graceful_shutdown_timeout&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">s&quot;</span>
</span><span id="ServerPanel-144"><a href="#ServerPanel-144"><span class="linenos">144</span></a>            <span class="p">)</span>
</span><span id="ServerPanel-145"><a href="#ServerPanel-145"><span class="linenos">145</span></a>
</span><span id="ServerPanel-146"><a href="#ServerPanel-146"><span class="linenos">146</span></a>            <span class="n">api_key_mgmt</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key_management&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel-147"><a href="#ServerPanel-147"><span class="linenos">147</span></a>            <span class="n">enabled_status</span> <span class="o">=</span> <span class="s2">&quot;Enabled&quot;</span> <span class="k">if</span> <span class="n">api_key_mgmt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enabled&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;Disabled&quot;</span>
</span><span id="ServerPanel-148"><a href="#ServerPanel-148"><span class="linenos">148</span></a>            <span class="n">api_keys_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Key Management: </span><span class="si">{</span><span class="n">enabled_status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-149"><a href="#ServerPanel-149"><span class="linenos">149</span></a>            <span class="n">rate_limit_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="ServerPanel-150"><a href="#ServerPanel-150"><span class="linenos">150</span></a>                <span class="sa">f</span><span class="s2">&quot;Rate Limit per Key: </span><span class="si">{</span><span class="n">api_key_mgmt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rate_limit_per_key&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> req/min&quot;</span>
</span><span id="ServerPanel-151"><a href="#ServerPanel-151"><span class="linenos">151</span></a>            <span class="p">)</span>
</span><span id="ServerPanel-152"><a href="#ServerPanel-152"><span class="linenos">152</span></a>
</span><span id="ServerPanel-153"><a href="#ServerPanel-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initialized configuration display&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="ServerPanel-154"><a href="#ServerPanel-154"><span class="linenos">154</span></a>
</span><span id="ServerPanel-155"><a href="#ServerPanel-155"><span class="linenos">155</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ServerPanel-156"><a href="#ServerPanel-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error initializing configuration display&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ServerPanel-157"><a href="#ServerPanel-157"><span class="linenos">157</span></a>
</span><span id="ServerPanel-158"><a href="#ServerPanel-158"><span class="linenos">158</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-159"><a href="#ServerPanel-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update server status from process manager.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-160"><a href="#ServerPanel-160"><span class="linenos">160</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ServerPanel-161"><a href="#ServerPanel-161"><span class="linenos">161</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">get_server_status</span><span class="p">()</span>
</span><span id="ServerPanel-162"><a href="#ServerPanel-162"><span class="linenos">162</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ServerPanel-163"><a href="#ServerPanel-163"><span class="linenos">163</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="ServerPanel-164"><a href="#ServerPanel-164"><span class="linenos">164</span></a>
</span><span id="ServerPanel-165"><a href="#ServerPanel-165"><span class="linenos">165</span></a>            <span class="c1"># Update button states</span>
</span><span id="ServerPanel-166"><a href="#ServerPanel-166"><span class="linenos">166</span></a>            <span class="n">start_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#start-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-167"><a href="#ServerPanel-167"><span class="linenos">167</span></a>            <span class="n">stop_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#stop-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-168"><a href="#ServerPanel-168"><span class="linenos">168</span></a>            <span class="n">restart_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#restart-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-169"><a href="#ServerPanel-169"><span class="linenos">169</span></a>
</span><span id="ServerPanel-170"><a href="#ServerPanel-170"><span class="linenos">170</span></a>            <span class="n">start_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">)</span>
</span><span id="ServerPanel-171"><a href="#ServerPanel-171"><span class="linenos">171</span></a>            <span class="n">stop_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span>
</span><span id="ServerPanel-172"><a href="#ServerPanel-172"><span class="linenos">172</span></a>            <span class="n">restart_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span>
</span><span id="ServerPanel-173"><a href="#ServerPanel-173"><span class="linenos">173</span></a>
</span><span id="ServerPanel-174"><a href="#ServerPanel-174"><span class="linenos">174</span></a>            <span class="c1"># Update status text</span>
</span><span id="ServerPanel-175"><a href="#ServerPanel-175"><span class="linenos">175</span></a>            <span class="n">status_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-status-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-176"><a href="#ServerPanel-176"><span class="linenos">176</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="ServerPanel-177"><a href="#ServerPanel-177"><span class="linenos">177</span></a>                <span class="n">status_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Running&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-178"><a href="#ServerPanel-178"><span class="linenos">178</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel-179"><a href="#ServerPanel-179"><span class="linenos">179</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="ServerPanel-180"><a href="#ServerPanel-180"><span class="linenos">180</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-181"><a href="#ServerPanel-181"><span class="linenos">181</span></a>                <span class="n">status_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Stopped&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-182"><a href="#ServerPanel-182"><span class="linenos">182</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ServerPanel-183"><a href="#ServerPanel-183"><span class="linenos">183</span></a>
</span><span id="ServerPanel-184"><a href="#ServerPanel-184"><span class="linenos">184</span></a>            <span class="c1"># Update uptime</span>
</span><span id="ServerPanel-185"><a href="#ServerPanel-185"><span class="linenos">185</span></a>            <span class="n">uptime_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-uptime-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-186"><a href="#ServerPanel-186"><span class="linenos">186</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel-187"><a href="#ServerPanel-187"><span class="linenos">187</span></a>                <span class="n">uptime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel-188"><a href="#ServerPanel-188"><span class="linenos">188</span></a>                <span class="n">uptime_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uptime</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Remove microseconds</span>
</span><span id="ServerPanel-189"><a href="#ServerPanel-189"><span class="linenos">189</span></a>                <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uptime: </span><span class="si">{</span><span class="n">uptime_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-190"><a href="#ServerPanel-190"><span class="linenos">190</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-191"><a href="#ServerPanel-191"><span class="linenos">191</span></a>                <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-192"><a href="#ServerPanel-192"><span class="linenos">192</span></a>
</span><span id="ServerPanel-193"><a href="#ServerPanel-193"><span class="linenos">193</span></a>            <span class="c1"># Update port and address</span>
</span><span id="ServerPanel-194"><a href="#ServerPanel-194"><span class="linenos">194</span></a>            <span class="n">port_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-port-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-195"><a href="#ServerPanel-195"><span class="linenos">195</span></a>            <span class="n">address_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-address-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-196"><a href="#ServerPanel-196"><span class="linenos">196</span></a>
</span><span id="ServerPanel-197"><a href="#ServerPanel-197"><span class="linenos">197</span></a>            <span class="n">config</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;configuration&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel-198"><a href="#ServerPanel-198"><span class="linenos">198</span></a>            <span class="n">port_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-199"><a href="#ServerPanel-199"><span class="linenos">199</span></a>            <span class="n">address_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bind_address&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-200"><a href="#ServerPanel-200"><span class="linenos">200</span></a>
</span><span id="ServerPanel-201"><a href="#ServerPanel-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server status&quot;</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span><span id="ServerPanel-202"><a href="#ServerPanel-202"><span class="linenos">202</span></a>
</span><span id="ServerPanel-203"><a href="#ServerPanel-203"><span class="linenos">203</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ServerPanel-204"><a href="#ServerPanel-204"><span class="linenos">204</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating server status&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ServerPanel-205"><a href="#ServerPanel-205"><span class="linenos">205</span></a>
</span><span id="ServerPanel-206"><a href="#ServerPanel-206"><span class="linenos">206</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_server_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">ServerStatusUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-207"><a href="#ServerPanel-207"><span class="linenos">207</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle server status update from process manager.</span>
</span><span id="ServerPanel-208"><a href="#ServerPanel-208"><span class="linenos">208</span></a>
</span><span id="ServerPanel-209"><a href="#ServerPanel-209"><span class="linenos">209</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel-210"><a href="#ServerPanel-210"><span class="linenos">210</span></a><span class="sd">            message: Server status update message</span>
</span><span id="ServerPanel-211"><a href="#ServerPanel-211"><span class="linenos">211</span></a>
</span><span id="ServerPanel-212"><a href="#ServerPanel-212"><span class="linenos">212</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-213"><a href="#ServerPanel-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">status</span>
</span><span id="ServerPanel-214"><a href="#ServerPanel-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ServerPanel-215"><a href="#ServerPanel-215"><span class="linenos">215</span></a>
</span><span id="ServerPanel-216"><a href="#ServerPanel-216"><span class="linenos">216</span></a>        <span class="c1"># Update button states</span>
</span><span id="ServerPanel-217"><a href="#ServerPanel-217"><span class="linenos">217</span></a>        <span class="n">start_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#start-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-218"><a href="#ServerPanel-218"><span class="linenos">218</span></a>        <span class="n">stop_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#stop-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-219"><a href="#ServerPanel-219"><span class="linenos">219</span></a>        <span class="n">restart_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#restart-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-220"><a href="#ServerPanel-220"><span class="linenos">220</span></a>
</span><span id="ServerPanel-221"><a href="#ServerPanel-221"><span class="linenos">221</span></a>        <span class="n">start_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">)</span>
</span><span id="ServerPanel-222"><a href="#ServerPanel-222"><span class="linenos">222</span></a>        <span class="n">stop_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span>
</span><span id="ServerPanel-223"><a href="#ServerPanel-223"><span class="linenos">223</span></a>        <span class="n">restart_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span>
</span><span id="ServerPanel-224"><a href="#ServerPanel-224"><span class="linenos">224</span></a>
</span><span id="ServerPanel-225"><a href="#ServerPanel-225"><span class="linenos">225</span></a>        <span class="c1"># Update status text</span>
</span><span id="ServerPanel-226"><a href="#ServerPanel-226"><span class="linenos">226</span></a>        <span class="n">status_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-status-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-227"><a href="#ServerPanel-227"><span class="linenos">227</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">:</span>
</span><span id="ServerPanel-228"><a href="#ServerPanel-228"><span class="linenos">228</span></a>            <span class="n">status_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Running&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-229"><a href="#ServerPanel-229"><span class="linenos">229</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel-230"><a href="#ServerPanel-230"><span class="linenos">230</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="ServerPanel-231"><a href="#ServerPanel-231"><span class="linenos">231</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-232"><a href="#ServerPanel-232"><span class="linenos">232</span></a>            <span class="n">status_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Stopped&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-233"><a href="#ServerPanel-233"><span class="linenos">233</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ServerPanel-234"><a href="#ServerPanel-234"><span class="linenos">234</span></a>
</span><span id="ServerPanel-235"><a href="#ServerPanel-235"><span class="linenos">235</span></a>        <span class="c1"># Update uptime</span>
</span><span id="ServerPanel-236"><a href="#ServerPanel-236"><span class="linenos">236</span></a>        <span class="n">uptime_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-uptime-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-237"><a href="#ServerPanel-237"><span class="linenos">237</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel-238"><a href="#ServerPanel-238"><span class="linenos">238</span></a>            <span class="n">uptime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel-239"><a href="#ServerPanel-239"><span class="linenos">239</span></a>            <span class="n">uptime_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uptime</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Remove microseconds</span>
</span><span id="ServerPanel-240"><a href="#ServerPanel-240"><span class="linenos">240</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uptime: </span><span class="si">{</span><span class="n">uptime_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-241"><a href="#ServerPanel-241"><span class="linenos">241</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-242"><a href="#ServerPanel-242"><span class="linenos">242</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-243"><a href="#ServerPanel-243"><span class="linenos">243</span></a>
</span><span id="ServerPanel-244"><a href="#ServerPanel-244"><span class="linenos">244</span></a>        <span class="c1"># Update port and address</span>
</span><span id="ServerPanel-245"><a href="#ServerPanel-245"><span class="linenos">245</span></a>        <span class="n">port_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-port-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-246"><a href="#ServerPanel-246"><span class="linenos">246</span></a>        <span class="n">address_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-address-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-247"><a href="#ServerPanel-247"><span class="linenos">247</span></a>
</span><span id="ServerPanel-248"><a href="#ServerPanel-248"><span class="linenos">248</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;configuration&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel-249"><a href="#ServerPanel-249"><span class="linenos">249</span></a>        <span class="n">port_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-250"><a href="#ServerPanel-250"><span class="linenos">250</span></a>        <span class="n">address_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bind_address&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-251"><a href="#ServerPanel-251"><span class="linenos">251</span></a>
</span><span id="ServerPanel-252"><a href="#ServerPanel-252"><span class="linenos">252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Handled server status update&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
</span><span id="ServerPanel-253"><a href="#ServerPanel-253"><span class="linenos">253</span></a>
</span><span id="ServerPanel-254"><a href="#ServerPanel-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_server_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-255"><a href="#ServerPanel-255"><span class="linenos">255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update server statistics display.</span>
</span><span id="ServerPanel-256"><a href="#ServerPanel-256"><span class="linenos">256</span></a>
</span><span id="ServerPanel-257"><a href="#ServerPanel-257"><span class="linenos">257</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel-258"><a href="#ServerPanel-258"><span class="linenos">258</span></a><span class="sd">            stats: Server statistics dictionary</span>
</span><span id="ServerPanel-259"><a href="#ServerPanel-259"><span class="linenos">259</span></a>
</span><span id="ServerPanel-260"><a href="#ServerPanel-260"><span class="linenos">260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-261"><a href="#ServerPanel-261"><span class="linenos">261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">stats</span>
</span><span id="ServerPanel-262"><a href="#ServerPanel-262"><span class="linenos">262</span></a>
</span><span id="ServerPanel-263"><a href="#ServerPanel-263"><span class="linenos">263</span></a>        <span class="c1"># Update uptime</span>
</span><span id="ServerPanel-264"><a href="#ServerPanel-264"><span class="linenos">264</span></a>        <span class="n">uptime_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-uptime-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-265"><a href="#ServerPanel-265"><span class="linenos">265</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel-266"><a href="#ServerPanel-266"><span class="linenos">266</span></a>            <span class="n">uptime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel-267"><a href="#ServerPanel-267"><span class="linenos">267</span></a>            <span class="n">uptime_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uptime</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Remove microseconds</span>
</span><span id="ServerPanel-268"><a href="#ServerPanel-268"><span class="linenos">268</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uptime: </span><span class="si">{</span><span class="n">uptime_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-269"><a href="#ServerPanel-269"><span class="linenos">269</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-270"><a href="#ServerPanel-270"><span class="linenos">270</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-271"><a href="#ServerPanel-271"><span class="linenos">271</span></a>
</span><span id="ServerPanel-272"><a href="#ServerPanel-272"><span class="linenos">272</span></a>        <span class="c1"># Update port and address</span>
</span><span id="ServerPanel-273"><a href="#ServerPanel-273"><span class="linenos">273</span></a>        <span class="n">port_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-port-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-274"><a href="#ServerPanel-274"><span class="linenos">274</span></a>        <span class="n">address_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-address-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-275"><a href="#ServerPanel-275"><span class="linenos">275</span></a>
</span><span id="ServerPanel-276"><a href="#ServerPanel-276"><span class="linenos">276</span></a>        <span class="n">server_info</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel-277"><a href="#ServerPanel-277"><span class="linenos">277</span></a>        <span class="n">port_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-278"><a href="#ServerPanel-278"><span class="linenos">278</span></a>        <span class="n">address_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bind_address&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-279"><a href="#ServerPanel-279"><span class="linenos">279</span></a>
</span><span id="ServerPanel-280"><a href="#ServerPanel-280"><span class="linenos">280</span></a>        <span class="c1"># Update statistics</span>
</span><span id="ServerPanel-281"><a href="#ServerPanel-281"><span class="linenos">281</span></a>        <span class="n">connections_info</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connections&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel-282"><a href="#ServerPanel-282"><span class="linenos">282</span></a>        <span class="n">active_connections_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#active-connections-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-283"><a href="#ServerPanel-283"><span class="linenos">283</span></a>        <span class="n">active_connections_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active Connections: </span><span class="si">{</span><span class="n">connections_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-284"><a href="#ServerPanel-284"><span class="linenos">284</span></a>
</span><span id="ServerPanel-285"><a href="#ServerPanel-285"><span class="linenos">285</span></a>        <span class="c1"># Update other statistics (these would come from the actual server)</span>
</span><span id="ServerPanel-286"><a href="#ServerPanel-286"><span class="linenos">286</span></a>        <span class="n">total_requests_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#total-requests-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-287"><a href="#ServerPanel-287"><span class="linenos">287</span></a>        <span class="n">error_rate_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#error-rate-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel-288"><a href="#ServerPanel-288"><span class="linenos">288</span></a>
</span><span id="ServerPanel-289"><a href="#ServerPanel-289"><span class="linenos">289</span></a>        <span class="n">total_requests_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Requests: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;total_requests&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-290"><a href="#ServerPanel-290"><span class="linenos">290</span></a>        <span class="n">error_rate_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Rate: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error_rate&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-291"><a href="#ServerPanel-291"><span class="linenos">291</span></a>
</span><span id="ServerPanel-292"><a href="#ServerPanel-292"><span class="linenos">292</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server statistics&quot;</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="n">stats</span><span class="p">)</span>
</span><span id="ServerPanel-293"><a href="#ServerPanel-293"><span class="linenos">293</span></a>
</span><span id="ServerPanel-294"><a href="#ServerPanel-294"><span class="linenos">294</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-295"><a href="#ServerPanel-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="ServerPanel-296"><a href="#ServerPanel-296"><span class="linenos">296</span></a>
</span><span id="ServerPanel-297"><a href="#ServerPanel-297"><span class="linenos">297</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel-298"><a href="#ServerPanel-298"><span class="linenos">298</span></a><span class="sd">            event: Button press event</span>
</span><span id="ServerPanel-299"><a href="#ServerPanel-299"><span class="linenos">299</span></a>
</span><span id="ServerPanel-300"><a href="#ServerPanel-300"><span class="linenos">300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-301"><a href="#ServerPanel-301"><span class="linenos">301</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="ServerPanel-302"><a href="#ServerPanel-302"><span class="linenos">302</span></a>
</span><span id="ServerPanel-303"><a href="#ServerPanel-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;start-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel-304"><a href="#ServerPanel-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Start server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-305"><a href="#ServerPanel-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_start_server</span><span class="p">()</span>
</span><span id="ServerPanel-306"><a href="#ServerPanel-306"><span class="linenos">306</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;stop-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel-307"><a href="#ServerPanel-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stop server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-308"><a href="#ServerPanel-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_server</span><span class="p">()</span>
</span><span id="ServerPanel-309"><a href="#ServerPanel-309"><span class="linenos">309</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;restart-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel-310"><a href="#ServerPanel-310"><span class="linenos">310</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Restart server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-311"><a href="#ServerPanel-311"><span class="linenos">311</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_restart_server</span><span class="p">()</span>
</span><span id="ServerPanel-312"><a href="#ServerPanel-312"><span class="linenos">312</span></a>
</span><span id="ServerPanel-313"><a href="#ServerPanel-313"><span class="linenos">313</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_start_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-314"><a href="#ServerPanel-314"><span class="linenos">314</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-315"><a href="#ServerPanel-315"><span class="linenos">315</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-316"><a href="#ServerPanel-316"><span class="linenos">316</span></a>
</span><span id="ServerPanel-317"><a href="#ServerPanel-317"><span class="linenos">317</span></a>        <span class="c1"># Disable buttons during operation</span>
</span><span id="ServerPanel-318"><a href="#ServerPanel-318"><span class="linenos">318</span></a>        <span class="n">start_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#start-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-319"><a href="#ServerPanel-319"><span class="linenos">319</span></a>        <span class="n">stop_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#stop-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-320"><a href="#ServerPanel-320"><span class="linenos">320</span></a>        <span class="n">restart_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#restart-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-321"><a href="#ServerPanel-321"><span class="linenos">321</span></a>
</span><span id="ServerPanel-322"><a href="#ServerPanel-322"><span class="linenos">322</span></a>        <span class="n">start_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-323"><a href="#ServerPanel-323"><span class="linenos">323</span></a>        <span class="n">stop_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-324"><a href="#ServerPanel-324"><span class="linenos">324</span></a>        <span class="n">restart_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-325"><a href="#ServerPanel-325"><span class="linenos">325</span></a>
</span><span id="ServerPanel-326"><a href="#ServerPanel-326"><span class="linenos">326</span></a>        <span class="c1"># Start server asynchronously</span>
</span><span id="ServerPanel-327"><a href="#ServerPanel-327"><span class="linenos">327</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="ServerPanel-328"><a href="#ServerPanel-328"><span class="linenos">328</span></a>
</span><span id="ServerPanel-329"><a href="#ServerPanel-329"><span class="linenos">329</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_async_start_server</span><span class="p">())</span>
</span><span id="ServerPanel-330"><a href="#ServerPanel-330"><span class="linenos">330</span></a>
</span><span id="ServerPanel-331"><a href="#ServerPanel-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-332"><a href="#ServerPanel-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-333"><a href="#ServerPanel-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-334"><a href="#ServerPanel-334"><span class="linenos">334</span></a>
</span><span id="ServerPanel-335"><a href="#ServerPanel-335"><span class="linenos">335</span></a>        <span class="c1"># Disable buttons during operation</span>
</span><span id="ServerPanel-336"><a href="#ServerPanel-336"><span class="linenos">336</span></a>        <span class="n">start_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#start-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-337"><a href="#ServerPanel-337"><span class="linenos">337</span></a>        <span class="n">stop_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#stop-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-338"><a href="#ServerPanel-338"><span class="linenos">338</span></a>        <span class="n">restart_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#restart-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-339"><a href="#ServerPanel-339"><span class="linenos">339</span></a>
</span><span id="ServerPanel-340"><a href="#ServerPanel-340"><span class="linenos">340</span></a>        <span class="n">start_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-341"><a href="#ServerPanel-341"><span class="linenos">341</span></a>        <span class="n">stop_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-342"><a href="#ServerPanel-342"><span class="linenos">342</span></a>        <span class="n">restart_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-343"><a href="#ServerPanel-343"><span class="linenos">343</span></a>
</span><span id="ServerPanel-344"><a href="#ServerPanel-344"><span class="linenos">344</span></a>        <span class="c1"># Stop server asynchronously</span>
</span><span id="ServerPanel-345"><a href="#ServerPanel-345"><span class="linenos">345</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="ServerPanel-346"><a href="#ServerPanel-346"><span class="linenos">346</span></a>
</span><span id="ServerPanel-347"><a href="#ServerPanel-347"><span class="linenos">347</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_async_stop_server</span><span class="p">())</span>
</span><span id="ServerPanel-348"><a href="#ServerPanel-348"><span class="linenos">348</span></a>
</span><span id="ServerPanel-349"><a href="#ServerPanel-349"><span class="linenos">349</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_restart_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-350"><a href="#ServerPanel-350"><span class="linenos">350</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Restart the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-351"><a href="#ServerPanel-351"><span class="linenos">351</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Restarting server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-352"><a href="#ServerPanel-352"><span class="linenos">352</span></a>
</span><span id="ServerPanel-353"><a href="#ServerPanel-353"><span class="linenos">353</span></a>        <span class="c1"># Disable buttons during operation</span>
</span><span id="ServerPanel-354"><a href="#ServerPanel-354"><span class="linenos">354</span></a>        <span class="n">start_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#start-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-355"><a href="#ServerPanel-355"><span class="linenos">355</span></a>        <span class="n">stop_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#stop-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-356"><a href="#ServerPanel-356"><span class="linenos">356</span></a>        <span class="n">restart_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#restart-server-btn&quot;</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
</span><span id="ServerPanel-357"><a href="#ServerPanel-357"><span class="linenos">357</span></a>
</span><span id="ServerPanel-358"><a href="#ServerPanel-358"><span class="linenos">358</span></a>        <span class="n">start_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-359"><a href="#ServerPanel-359"><span class="linenos">359</span></a>        <span class="n">stop_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-360"><a href="#ServerPanel-360"><span class="linenos">360</span></a>        <span class="n">restart_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ServerPanel-361"><a href="#ServerPanel-361"><span class="linenos">361</span></a>
</span><span id="ServerPanel-362"><a href="#ServerPanel-362"><span class="linenos">362</span></a>        <span class="c1"># Restart server asynchronously</span>
</span><span id="ServerPanel-363"><a href="#ServerPanel-363"><span class="linenos">363</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="ServerPanel-364"><a href="#ServerPanel-364"><span class="linenos">364</span></a>
</span><span id="ServerPanel-365"><a href="#ServerPanel-365"><span class="linenos">365</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_async_restart_server</span><span class="p">())</span>
</span><span id="ServerPanel-366"><a href="#ServerPanel-366"><span class="linenos">366</span></a>
</span><span id="ServerPanel-367"><a href="#ServerPanel-367"><span class="linenos">367</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_async_start_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-368"><a href="#ServerPanel-368"><span class="linenos">368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronously start the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-369"><a href="#ServerPanel-369"><span class="linenos">369</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ServerPanel-370"><a href="#ServerPanel-370"><span class="linenos">370</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">start_server</span><span class="p">()</span>
</span><span id="ServerPanel-371"><a href="#ServerPanel-371"><span class="linenos">371</span></a>            <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="ServerPanel-372"><a href="#ServerPanel-372"><span class="linenos">372</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Server started successfully&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-373"><a href="#ServerPanel-373"><span class="linenos">373</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-374"><a href="#ServerPanel-374"><span class="linenos">374</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to start server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-375"><a href="#ServerPanel-375"><span class="linenos">375</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ServerPanel-376"><a href="#ServerPanel-376"><span class="linenos">376</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error starting server&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ServerPanel-377"><a href="#ServerPanel-377"><span class="linenos">377</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="ServerPanel-378"><a href="#ServerPanel-378"><span class="linenos">378</span></a>            <span class="c1"># Re-enable buttons</span>
</span><span id="ServerPanel-379"><a href="#ServerPanel-379"><span class="linenos">379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_status</span><span class="p">()</span>
</span><span id="ServerPanel-380"><a href="#ServerPanel-380"><span class="linenos">380</span></a>
</span><span id="ServerPanel-381"><a href="#ServerPanel-381"><span class="linenos">381</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_async_stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-382"><a href="#ServerPanel-382"><span class="linenos">382</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronously stop the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-383"><a href="#ServerPanel-383"><span class="linenos">383</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ServerPanel-384"><a href="#ServerPanel-384"><span class="linenos">384</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">stop_server</span><span class="p">()</span>
</span><span id="ServerPanel-385"><a href="#ServerPanel-385"><span class="linenos">385</span></a>            <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="ServerPanel-386"><a href="#ServerPanel-386"><span class="linenos">386</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Server stopped successfully&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-387"><a href="#ServerPanel-387"><span class="linenos">387</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-388"><a href="#ServerPanel-388"><span class="linenos">388</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to stop server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-389"><a href="#ServerPanel-389"><span class="linenos">389</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ServerPanel-390"><a href="#ServerPanel-390"><span class="linenos">390</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error stopping server&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ServerPanel-391"><a href="#ServerPanel-391"><span class="linenos">391</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="ServerPanel-392"><a href="#ServerPanel-392"><span class="linenos">392</span></a>            <span class="c1"># Re-enable buttons</span>
</span><span id="ServerPanel-393"><a href="#ServerPanel-393"><span class="linenos">393</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_status</span><span class="p">()</span>
</span><span id="ServerPanel-394"><a href="#ServerPanel-394"><span class="linenos">394</span></a>
</span><span id="ServerPanel-395"><a href="#ServerPanel-395"><span class="linenos">395</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_async_restart_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel-396"><a href="#ServerPanel-396"><span class="linenos">396</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronously restart the server.&quot;&quot;&quot;</span>
</span><span id="ServerPanel-397"><a href="#ServerPanel-397"><span class="linenos">397</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ServerPanel-398"><a href="#ServerPanel-398"><span class="linenos">398</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">restart_server</span><span class="p">()</span>
</span><span id="ServerPanel-399"><a href="#ServerPanel-399"><span class="linenos">399</span></a>            <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="ServerPanel-400"><a href="#ServerPanel-400"><span class="linenos">400</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Server restarted successfully&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-401"><a href="#ServerPanel-401"><span class="linenos">401</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel-402"><a href="#ServerPanel-402"><span class="linenos">402</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to restart server&quot;</span><span class="p">)</span>
</span><span id="ServerPanel-403"><a href="#ServerPanel-403"><span class="linenos">403</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ServerPanel-404"><a href="#ServerPanel-404"><span class="linenos">404</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error restarting server&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="ServerPanel-405"><a href="#ServerPanel-405"><span class="linenos">405</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="ServerPanel-406"><a href="#ServerPanel-406"><span class="linenos">406</span></a>            <span class="c1"># Re-enable buttons</span>
</span><span id="ServerPanel-407"><a href="#ServerPanel-407"><span class="linenos">407</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_status</span><span class="p">()</span>
</span><span id="ServerPanel-408"><a href="#ServerPanel-408"><span class="linenos">408</span></a>
</span><span id="ServerPanel-409"><a href="#ServerPanel-409"><span class="linenos">409</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_server_health</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ServerPanel-410"><a href="#ServerPanel-410"><span class="linenos">410</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get server health information.</span>
</span><span id="ServerPanel-411"><a href="#ServerPanel-411"><span class="linenos">411</span></a>
</span><span id="ServerPanel-412"><a href="#ServerPanel-412"><span class="linenos">412</span></a><span class="sd">        Returns:</span>
</span><span id="ServerPanel-413"><a href="#ServerPanel-413"><span class="linenos">413</span></a><span class="sd">            Dictionary of server health information</span>
</span><span id="ServerPanel-414"><a href="#ServerPanel-414"><span class="linenos">414</span></a>
</span><span id="ServerPanel-415"><a href="#ServerPanel-415"><span class="linenos">415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel-416"><a href="#ServerPanel-416"><span class="linenos">416</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ServerPanel-417"><a href="#ServerPanel-417"><span class="linenos">417</span></a>            <span class="s2">&quot;running&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">,</span>
</span><span id="ServerPanel-418"><a href="#ServerPanel-418"><span class="linenos">418</span></a>            <span class="s2">&quot;uptime_seconds&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="ServerPanel-419"><a href="#ServerPanel-419"><span class="linenos">419</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel-420"><a href="#ServerPanel-420"><span class="linenos">420</span></a>            <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ServerPanel-421"><a href="#ServerPanel-421"><span class="linenos">421</span></a>            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">,</span>
</span><span id="ServerPanel-422"><a href="#ServerPanel-422"><span class="linenos">422</span></a>            <span class="s2">&quot;configuration&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">get_effective_configuration</span><span class="p">(),</span>
</span><span id="ServerPanel-423"><a href="#ServerPanel-423"><span class="linenos">423</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Panel for managing the MCP server.</p>

<p>This panel provides controls for starting/stopping the server,
viewing server status, and managing server configuration.</p>
</div>


                            <div id="ServerPanel.__init__" class="classattr">
                                        <input id="ServerPanel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ServerPanel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;server-panel&#39;</span>, </span><span class="param"><span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="ServerPanel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.__init__-57"><a href="#ServerPanel.__init__-57"><span class="linenos">57</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;server-panel&quot;</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel.__init__-58"><a href="#ServerPanel.__init__-58"><span class="linenos">58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the server panel.</span>
</span><span id="ServerPanel.__init__-59"><a href="#ServerPanel.__init__-59"><span class="linenos">59</span></a>
</span><span id="ServerPanel.__init__-60"><a href="#ServerPanel.__init__-60"><span class="linenos">60</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel.__init__-61"><a href="#ServerPanel.__init__-61"><span class="linenos">61</span></a><span class="sd">            id: Panel ID</span>
</span><span id="ServerPanel.__init__-62"><a href="#ServerPanel.__init__-62"><span class="linenos">62</span></a><span class="sd">            config_path: Optional path to configuration file</span>
</span><span id="ServerPanel.__init__-63"><a href="#ServerPanel.__init__-63"><span class="linenos">63</span></a>
</span><span id="ServerPanel.__init__-64"><a href="#ServerPanel.__init__-64"><span class="linenos">64</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel.__init__-65"><a href="#ServerPanel.__init__-65"><span class="linenos">65</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="ServerPanel.__init__-66"><a href="#ServerPanel.__init__-66"><span class="linenos">66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.__init__-67"><a href="#ServerPanel.__init__-67"><span class="linenos">67</span></a>
</span><span id="ServerPanel.__init__-68"><a href="#ServerPanel.__init__-68"><span class="linenos">68</span></a>        <span class="c1"># State</span>
</span><span id="ServerPanel.__init__-69"><a href="#ServerPanel.__init__-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ServerPanel.__init__-70"><a href="#ServerPanel.__init__-70"><span class="linenos">70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ServerPanel.__init__-71"><a href="#ServerPanel.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ServerPanel.__init__-72"><a href="#ServerPanel.__init__-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ServerPanel.__init__-73"><a href="#ServerPanel.__init__-73"><span class="linenos">73</span></a>
</span><span id="ServerPanel.__init__-74"><a href="#ServerPanel.__init__-74"><span class="linenos">74</span></a>        <span class="c1"># Process manager</span>
</span><span id="ServerPanel.__init__-75"><a href="#ServerPanel.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span> <span class="o">=</span> <span class="n">ServerProcessManager</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="ServerPanel.__init__-76"><a href="#ServerPanel.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">add_status_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_server_status_update</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the server panel.</p>

<p>Args:
    id: Panel ID
    config_path: Optional path to configuration file</p>
</div>


                            </div>
                            <div id="ServerPanel.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.logger"></a>
    
    

                            </div>
                            <div id="ServerPanel.server_running" class="classattr">
                                <div class="attr variable">
            <span class="name">server_running</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.server_running"></a>
    
    

                            </div>
                            <div id="ServerPanel.server_status" class="classattr">
                                <div class="attr variable">
            <span class="name">server_status</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.server_status"></a>
    
    

                            </div>
                            <div id="ServerPanel.server_config" class="classattr">
                                <div class="attr variable">
            <span class="name">server_config</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.server_config"></a>
    
    

                            </div>
                            <div id="ServerPanel.uptime_start" class="classattr">
                                <div class="attr variable">
            <span class="name">uptime_start</span><span class="annotation">: datetime.datetime | None</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.uptime_start"></a>
    
    

                            </div>
                            <div id="ServerPanel.process_manager" class="classattr">
                                <div class="attr variable">
            <span class="name">process_manager</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.process_manager"></a>
    
    

                            </div>
                            <div id="ServerPanel.compose" class="classattr">
                                        <input id="ServerPanel.compose-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compose</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">textual</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ServerPanel.compose-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.compose"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.compose-78"><a href="#ServerPanel.compose-78"><span class="linenos"> 78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
</span><span id="ServerPanel.compose-79"><a href="#ServerPanel.compose-79"><span class="linenos"> 79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compose the server panel layout.</span>
</span><span id="ServerPanel.compose-80"><a href="#ServerPanel.compose-80"><span class="linenos"> 80</span></a>
</span><span id="ServerPanel.compose-81"><a href="#ServerPanel.compose-81"><span class="linenos"> 81</span></a><span class="sd">        Returns:</span>
</span><span id="ServerPanel.compose-82"><a href="#ServerPanel.compose-82"><span class="linenos"> 82</span></a><span class="sd">            ComposeResult: The composed UI elements</span>
</span><span id="ServerPanel.compose-83"><a href="#ServerPanel.compose-83"><span class="linenos"> 83</span></a>
</span><span id="ServerPanel.compose-84"><a href="#ServerPanel.compose-84"><span class="linenos"> 84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel.compose-85"><a href="#ServerPanel.compose-85"><span class="linenos"> 85</span></a>        <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Management&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-86"><a href="#ServerPanel.compose-86"><span class="linenos"> 86</span></a>
</span><span id="ServerPanel.compose-87"><a href="#ServerPanel.compose-87"><span class="linenos"> 87</span></a>        <span class="k">with</span> <span class="n">Vertical</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">):</span>
</span><span id="ServerPanel.compose-88"><a href="#ServerPanel.compose-88"><span class="linenos"> 88</span></a>            <span class="c1"># Server controls</span>
</span><span id="ServerPanel.compose-89"><a href="#ServerPanel.compose-89"><span class="linenos"> 89</span></a>            <span class="k">with</span> <span class="n">Horizontal</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="s2">&quot;server-controls&quot;</span><span class="p">):</span>
</span><span id="ServerPanel.compose-90"><a href="#ServerPanel.compose-90"><span class="linenos"> 90</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Start Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;start-server-btn&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-91"><a href="#ServerPanel.compose-91"><span class="linenos"> 91</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Stop Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;stop-server-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ServerPanel.compose-92"><a href="#ServerPanel.compose-92"><span class="linenos"> 92</span></a>                <span class="k">yield</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Restart Server&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;restart-server-btn&quot;</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ServerPanel.compose-93"><a href="#ServerPanel.compose-93"><span class="linenos"> 93</span></a>
</span><span id="ServerPanel.compose-94"><a href="#ServerPanel.compose-94"><span class="linenos"> 94</span></a>            <span class="c1"># Server status</span>
</span><span id="ServerPanel.compose-95"><a href="#ServerPanel.compose-95"><span class="linenos"> 95</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Status:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-96"><a href="#ServerPanel.compose-96"><span class="linenos"> 96</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Status: Stopped&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-status-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-97"><a href="#ServerPanel.compose-97"><span class="linenos"> 97</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-uptime-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-98"><a href="#ServerPanel.compose-98"><span class="linenos"> 98</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Port: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-port-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-99"><a href="#ServerPanel.compose-99"><span class="linenos"> 99</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Address: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;server-address-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-100"><a href="#ServerPanel.compose-100"><span class="linenos">100</span></a>
</span><span id="ServerPanel.compose-101"><a href="#ServerPanel.compose-101"><span class="linenos">101</span></a>            <span class="c1"># Server statistics</span>
</span><span id="ServerPanel.compose-102"><a href="#ServerPanel.compose-102"><span class="linenos">102</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Server Statistics:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-103"><a href="#ServerPanel.compose-103"><span class="linenos">103</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Active Connections: 0&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;active-connections-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-104"><a href="#ServerPanel.compose-104"><span class="linenos">104</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Total Requests: 0&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;total-requests-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-105"><a href="#ServerPanel.compose-105"><span class="linenos">105</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Error Rate: 0%&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;error-rate-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-106"><a href="#ServerPanel.compose-106"><span class="linenos">106</span></a>
</span><span id="ServerPanel.compose-107"><a href="#ServerPanel.compose-107"><span class="linenos">107</span></a>            <span class="c1"># Configuration (Read-only display)</span>
</span><span id="ServerPanel.compose-108"><a href="#ServerPanel.compose-108"><span class="linenos">108</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Effective Configuration:&quot;</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s2">&quot;section-title&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-109"><a href="#ServerPanel.compose-109"><span class="linenos">109</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Port: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-port-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-110"><a href="#ServerPanel.compose-110"><span class="linenos">110</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Bind Address: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-address-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-111"><a href="#ServerPanel.compose-111"><span class="linenos">111</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Max Connections: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-max-connections-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-112"><a href="#ServerPanel.compose-112"><span class="linenos">112</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Graceful Shutdown Timeout: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-timeout-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-113"><a href="#ServerPanel.compose-113"><span class="linenos">113</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;API Key Management: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-api-keys-text&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.compose-114"><a href="#ServerPanel.compose-114"><span class="linenos">114</span></a>            <span class="k">yield</span> <span class="n">Static</span><span class="p">(</span><span class="s2">&quot;Rate Limit per Key: N/A&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;config-rate-limit-text&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Compose the server panel layout.</p>

<p>Returns:
    ComposeResult: The composed UI elements</p>
</div>


                            </div>
                            <div id="ServerPanel.on_mount" class="classattr">
                                        <input id="ServerPanel.on_mount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_mount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ServerPanel.on_mount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.on_mount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.on_mount-116"><a href="#ServerPanel.on_mount-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel.on_mount-117"><a href="#ServerPanel.on_mount-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle panel mount event.&quot;&quot;&quot;</span>
</span><span id="ServerPanel.on_mount-118"><a href="#ServerPanel.on_mount-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Server panel mounted&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.on_mount-119"><a href="#ServerPanel.on_mount-119"><span class="linenos">119</span></a>
</span><span id="ServerPanel.on_mount-120"><a href="#ServerPanel.on_mount-120"><span class="linenos">120</span></a>        <span class="c1"># Initialize configuration display</span>
</span><span id="ServerPanel.on_mount-121"><a href="#ServerPanel.on_mount-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_config_display</span><span class="p">()</span>
</span><span id="ServerPanel.on_mount-122"><a href="#ServerPanel.on_mount-122"><span class="linenos">122</span></a>
</span><span id="ServerPanel.on_mount-123"><a href="#ServerPanel.on_mount-123"><span class="linenos">123</span></a>        <span class="c1"># Update initial status</span>
</span><span id="ServerPanel.on_mount-124"><a href="#ServerPanel.on_mount-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_server_status</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle panel mount event.</p>
</div>


                            </div>
                            <div id="ServerPanel.update_server_statistics" class="classattr">
                                        <input id="ServerPanel.update_server_statistics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_server_statistics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">stats</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ServerPanel.update_server_statistics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.update_server_statistics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.update_server_statistics-254"><a href="#ServerPanel.update_server_statistics-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_server_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel.update_server_statistics-255"><a href="#ServerPanel.update_server_statistics-255"><span class="linenos">255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update server statistics display.</span>
</span><span id="ServerPanel.update_server_statistics-256"><a href="#ServerPanel.update_server_statistics-256"><span class="linenos">256</span></a>
</span><span id="ServerPanel.update_server_statistics-257"><a href="#ServerPanel.update_server_statistics-257"><span class="linenos">257</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel.update_server_statistics-258"><a href="#ServerPanel.update_server_statistics-258"><span class="linenos">258</span></a><span class="sd">            stats: Server statistics dictionary</span>
</span><span id="ServerPanel.update_server_statistics-259"><a href="#ServerPanel.update_server_statistics-259"><span class="linenos">259</span></a>
</span><span id="ServerPanel.update_server_statistics-260"><a href="#ServerPanel.update_server_statistics-260"><span class="linenos">260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel.update_server_statistics-261"><a href="#ServerPanel.update_server_statistics-261"><span class="linenos">261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">stats</span>
</span><span id="ServerPanel.update_server_statistics-262"><a href="#ServerPanel.update_server_statistics-262"><span class="linenos">262</span></a>
</span><span id="ServerPanel.update_server_statistics-263"><a href="#ServerPanel.update_server_statistics-263"><span class="linenos">263</span></a>        <span class="c1"># Update uptime</span>
</span><span id="ServerPanel.update_server_statistics-264"><a href="#ServerPanel.update_server_statistics-264"><span class="linenos">264</span></a>        <span class="n">uptime_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-uptime-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-265"><a href="#ServerPanel.update_server_statistics-265"><span class="linenos">265</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">:</span>
</span><span id="ServerPanel.update_server_statistics-266"><a href="#ServerPanel.update_server_statistics-266"><span class="linenos">266</span></a>            <span class="n">uptime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel.update_server_statistics-267"><a href="#ServerPanel.update_server_statistics-267"><span class="linenos">267</span></a>            <span class="n">uptime_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uptime</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Remove microseconds</span>
</span><span id="ServerPanel.update_server_statistics-268"><a href="#ServerPanel.update_server_statistics-268"><span class="linenos">268</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uptime: </span><span class="si">{</span><span class="n">uptime_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-269"><a href="#ServerPanel.update_server_statistics-269"><span class="linenos">269</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ServerPanel.update_server_statistics-270"><a href="#ServerPanel.update_server_statistics-270"><span class="linenos">270</span></a>            <span class="n">uptime_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Uptime: N/A&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-271"><a href="#ServerPanel.update_server_statistics-271"><span class="linenos">271</span></a>
</span><span id="ServerPanel.update_server_statistics-272"><a href="#ServerPanel.update_server_statistics-272"><span class="linenos">272</span></a>        <span class="c1"># Update port and address</span>
</span><span id="ServerPanel.update_server_statistics-273"><a href="#ServerPanel.update_server_statistics-273"><span class="linenos">273</span></a>        <span class="n">port_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-port-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-274"><a href="#ServerPanel.update_server_statistics-274"><span class="linenos">274</span></a>        <span class="n">address_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#server-address-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-275"><a href="#ServerPanel.update_server_statistics-275"><span class="linenos">275</span></a>
</span><span id="ServerPanel.update_server_statistics-276"><a href="#ServerPanel.update_server_statistics-276"><span class="linenos">276</span></a>        <span class="n">server_info</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel.update_server_statistics-277"><a href="#ServerPanel.update_server_statistics-277"><span class="linenos">277</span></a>        <span class="n">port_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-278"><a href="#ServerPanel.update_server_statistics-278"><span class="linenos">278</span></a>        <span class="n">address_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bind_address&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-279"><a href="#ServerPanel.update_server_statistics-279"><span class="linenos">279</span></a>
</span><span id="ServerPanel.update_server_statistics-280"><a href="#ServerPanel.update_server_statistics-280"><span class="linenos">280</span></a>        <span class="c1"># Update statistics</span>
</span><span id="ServerPanel.update_server_statistics-281"><a href="#ServerPanel.update_server_statistics-281"><span class="linenos">281</span></a>        <span class="n">connections_info</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connections&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="ServerPanel.update_server_statistics-282"><a href="#ServerPanel.update_server_statistics-282"><span class="linenos">282</span></a>        <span class="n">active_connections_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#active-connections-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-283"><a href="#ServerPanel.update_server_statistics-283"><span class="linenos">283</span></a>        <span class="n">active_connections_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active Connections: </span><span class="si">{</span><span class="n">connections_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-284"><a href="#ServerPanel.update_server_statistics-284"><span class="linenos">284</span></a>
</span><span id="ServerPanel.update_server_statistics-285"><a href="#ServerPanel.update_server_statistics-285"><span class="linenos">285</span></a>        <span class="c1"># Update other statistics (these would come from the actual server)</span>
</span><span id="ServerPanel.update_server_statistics-286"><a href="#ServerPanel.update_server_statistics-286"><span class="linenos">286</span></a>        <span class="n">total_requests_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#total-requests-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-287"><a href="#ServerPanel.update_server_statistics-287"><span class="linenos">287</span></a>        <span class="n">error_rate_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_one</span><span class="p">(</span><span class="s2">&quot;#error-rate-text&quot;</span><span class="p">,</span> <span class="n">Static</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-288"><a href="#ServerPanel.update_server_statistics-288"><span class="linenos">288</span></a>
</span><span id="ServerPanel.update_server_statistics-289"><a href="#ServerPanel.update_server_statistics-289"><span class="linenos">289</span></a>        <span class="n">total_requests_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Requests: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;total_requests&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-290"><a href="#ServerPanel.update_server_statistics-290"><span class="linenos">290</span></a>        <span class="n">error_rate_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Rate: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error_rate&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.update_server_statistics-291"><a href="#ServerPanel.update_server_statistics-291"><span class="linenos">291</span></a>
</span><span id="ServerPanel.update_server_statistics-292"><a href="#ServerPanel.update_server_statistics-292"><span class="linenos">292</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server statistics&quot;</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="n">stats</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update server statistics display.</p>

<p>Args:
    stats: Server statistics dictionary</p>
</div>


                            </div>
                            <div id="ServerPanel.on_button_pressed" class="classattr">
                                        <input id="ServerPanel.on_button_pressed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_button_pressed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span><span class="p">:</span> <span class="n">textual</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">_button</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ServerPanel.on_button_pressed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.on_button_pressed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.on_button_pressed-294"><a href="#ServerPanel.on_button_pressed-294"><span class="linenos">294</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ServerPanel.on_button_pressed-295"><a href="#ServerPanel.on_button_pressed-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle button press events.</span>
</span><span id="ServerPanel.on_button_pressed-296"><a href="#ServerPanel.on_button_pressed-296"><span class="linenos">296</span></a>
</span><span id="ServerPanel.on_button_pressed-297"><a href="#ServerPanel.on_button_pressed-297"><span class="linenos">297</span></a><span class="sd">        Args:</span>
</span><span id="ServerPanel.on_button_pressed-298"><a href="#ServerPanel.on_button_pressed-298"><span class="linenos">298</span></a><span class="sd">            event: Button press event</span>
</span><span id="ServerPanel.on_button_pressed-299"><a href="#ServerPanel.on_button_pressed-299"><span class="linenos">299</span></a>
</span><span id="ServerPanel.on_button_pressed-300"><a href="#ServerPanel.on_button_pressed-300"><span class="linenos">300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel.on_button_pressed-301"><a href="#ServerPanel.on_button_pressed-301"><span class="linenos">301</span></a>        <span class="n">button_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span>
</span><span id="ServerPanel.on_button_pressed-302"><a href="#ServerPanel.on_button_pressed-302"><span class="linenos">302</span></a>
</span><span id="ServerPanel.on_button_pressed-303"><a href="#ServerPanel.on_button_pressed-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;start-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel.on_button_pressed-304"><a href="#ServerPanel.on_button_pressed-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Start server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.on_button_pressed-305"><a href="#ServerPanel.on_button_pressed-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_start_server</span><span class="p">()</span>
</span><span id="ServerPanel.on_button_pressed-306"><a href="#ServerPanel.on_button_pressed-306"><span class="linenos">306</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;stop-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel.on_button_pressed-307"><a href="#ServerPanel.on_button_pressed-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stop server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.on_button_pressed-308"><a href="#ServerPanel.on_button_pressed-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_server</span><span class="p">()</span>
</span><span id="ServerPanel.on_button_pressed-309"><a href="#ServerPanel.on_button_pressed-309"><span class="linenos">309</span></a>        <span class="k">elif</span> <span class="n">button_id</span> <span class="o">==</span> <span class="s2">&quot;restart-server-btn&quot;</span><span class="p">:</span>
</span><span id="ServerPanel.on_button_pressed-310"><a href="#ServerPanel.on_button_pressed-310"><span class="linenos">310</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Restart server button pressed&quot;</span><span class="p">)</span>
</span><span id="ServerPanel.on_button_pressed-311"><a href="#ServerPanel.on_button_pressed-311"><span class="linenos">311</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_restart_server</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle button press events.</p>

<p>Args:
    event: Button press event</p>
</div>


                            </div>
                            <div id="ServerPanel.get_server_health" class="classattr">
                                        <input id="ServerPanel.get_server_health-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_server_health</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ServerPanel.get_server_health-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ServerPanel.get_server_health"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ServerPanel.get_server_health-409"><a href="#ServerPanel.get_server_health-409"><span class="linenos">409</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_server_health</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="ServerPanel.get_server_health-410"><a href="#ServerPanel.get_server_health-410"><span class="linenos">410</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get server health information.</span>
</span><span id="ServerPanel.get_server_health-411"><a href="#ServerPanel.get_server_health-411"><span class="linenos">411</span></a>
</span><span id="ServerPanel.get_server_health-412"><a href="#ServerPanel.get_server_health-412"><span class="linenos">412</span></a><span class="sd">        Returns:</span>
</span><span id="ServerPanel.get_server_health-413"><a href="#ServerPanel.get_server_health-413"><span class="linenos">413</span></a><span class="sd">            Dictionary of server health information</span>
</span><span id="ServerPanel.get_server_health-414"><a href="#ServerPanel.get_server_health-414"><span class="linenos">414</span></a>
</span><span id="ServerPanel.get_server_health-415"><a href="#ServerPanel.get_server_health-415"><span class="linenos">415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ServerPanel.get_server_health-416"><a href="#ServerPanel.get_server_health-416"><span class="linenos">416</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ServerPanel.get_server_health-417"><a href="#ServerPanel.get_server_health-417"><span class="linenos">417</span></a>            <span class="s2">&quot;running&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_running</span><span class="p">,</span>
</span><span id="ServerPanel.get_server_health-418"><a href="#ServerPanel.get_server_health-418"><span class="linenos">418</span></a>            <span class="s2">&quot;uptime_seconds&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="ServerPanel.get_server_health-419"><a href="#ServerPanel.get_server_health-419"><span class="linenos">419</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uptime_start</span>
</span><span id="ServerPanel.get_server_health-420"><a href="#ServerPanel.get_server_health-420"><span class="linenos">420</span></a>            <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ServerPanel.get_server_health-421"><a href="#ServerPanel.get_server_health-421"><span class="linenos">421</span></a>            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">,</span>
</span><span id="ServerPanel.get_server_health-422"><a href="#ServerPanel.get_server_health-422"><span class="linenos">422</span></a>            <span class="s2">&quot;configuration&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_manager</span><span class="o">.</span><span class="n">get_effective_configuration</span><span class="p">(),</span>
</span><span id="ServerPanel.get_server_health-423"><a href="#ServerPanel.get_server_health-423"><span class="linenos">423</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get server health information.</p>

<p>Returns:
    Dictionary of server health information</p>
</div>


                            </div>
                            <div id="ServerPanel.can_focus" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus</span><span class="annotation">: bool</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.can_focus"></a>
    
            <div class="docstring"><p>Widget may receive focus.</p>
</div>


                            </div>
                            <div id="ServerPanel.can_focus_children" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus_children</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#ServerPanel.can_focus_children"></a>
    
            <div class="docstring"><p>Widget's children may receive focus.</p>
</div>


                            </div>
                </section>
                <section id="StatusBar">
                            <input id="StatusBar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">StatusBar</span><wbr>(<span class="base">textual.widgets._static.Static</span>):

                <label class="view-source-button" for="StatusBar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar-20"><a href="#StatusBar-20"><span class="linenos"> 20</span></a><span class="k">class</span><span class="w"> </span><span class="nc">StatusBar</span><span class="p">(</span><span class="n">Static</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
</span><span id="StatusBar-21"><a href="#StatusBar-21"><span class="linenos"> 21</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Status bar widget for displaying real-time status information.</span>
</span><span id="StatusBar-22"><a href="#StatusBar-22"><span class="linenos"> 22</span></a>
</span><span id="StatusBar-23"><a href="#StatusBar-23"><span class="linenos"> 23</span></a><span class="sd">    This widget shows server status, connection counts, system metrics,</span>
</span><span id="StatusBar-24"><a href="#StatusBar-24"><span class="linenos"> 24</span></a><span class="sd">    and other relevant information in a compact format.</span>
</span><span id="StatusBar-25"><a href="#StatusBar-25"><span class="linenos"> 25</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="StatusBar-26"><a href="#StatusBar-26"><span class="linenos"> 26</span></a>
</span><span id="StatusBar-27"><a href="#StatusBar-27"><span class="linenos"> 27</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;status-bar&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-28"><a href="#StatusBar-28"><span class="linenos"> 28</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the status bar.</span>
</span><span id="StatusBar-29"><a href="#StatusBar-29"><span class="linenos"> 29</span></a>
</span><span id="StatusBar-30"><a href="#StatusBar-30"><span class="linenos"> 30</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-31"><a href="#StatusBar-31"><span class="linenos"> 31</span></a><span class="sd">            id: Widget ID</span>
</span><span id="StatusBar-32"><a href="#StatusBar-32"><span class="linenos"> 32</span></a>
</span><span id="StatusBar-33"><a href="#StatusBar-33"><span class="linenos"> 33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-34"><a href="#StatusBar-34"><span class="linenos"> 34</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="StatusBar-35"><a href="#StatusBar-35"><span class="linenos"> 35</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-36"><a href="#StatusBar-36"><span class="linenos"> 36</span></a>
</span><span id="StatusBar-37"><a href="#StatusBar-37"><span class="linenos"> 37</span></a>        <span class="c1"># Status information</span>
</span><span id="StatusBar-38"><a href="#StatusBar-38"><span class="linenos"> 38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="StatusBar-39"><a href="#StatusBar-39"><span class="linenos"> 39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-40"><a href="#StatusBar-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-41"><a href="#StatusBar-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-42"><a href="#StatusBar-42"><span class="linenos"> 42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-43"><a href="#StatusBar-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</span><span id="StatusBar-44"><a href="#StatusBar-44"><span class="linenos"> 44</span></a>
</span><span id="StatusBar-45"><a href="#StatusBar-45"><span class="linenos"> 45</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-46"><a href="#StatusBar-46"><span class="linenos"> 46</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle widget mount event.&quot;&quot;&quot;</span>
</span><span id="StatusBar-47"><a href="#StatusBar-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Status bar mounted&quot;</span><span class="p">)</span>
</span><span id="StatusBar-48"><a href="#StatusBar-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-49"><a href="#StatusBar-49"><span class="linenos"> 49</span></a>
</span><span id="StatusBar-50"><a href="#StatusBar-50"><span class="linenos"> 50</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-51"><a href="#StatusBar-51"><span class="linenos"> 51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update server status information.</span>
</span><span id="StatusBar-52"><a href="#StatusBar-52"><span class="linenos"> 52</span></a>
</span><span id="StatusBar-53"><a href="#StatusBar-53"><span class="linenos"> 53</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-54"><a href="#StatusBar-54"><span class="linenos"> 54</span></a><span class="sd">            status: Server status dictionary</span>
</span><span id="StatusBar-55"><a href="#StatusBar-55"><span class="linenos"> 55</span></a>
</span><span id="StatusBar-56"><a href="#StatusBar-56"><span class="linenos"> 56</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-57"><a href="#StatusBar-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="StatusBar-58"><a href="#StatusBar-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="StatusBar-59"><a href="#StatusBar-59"><span class="linenos"> 59</span></a>
</span><span id="StatusBar-60"><a href="#StatusBar-60"><span class="linenos"> 60</span></a>        <span class="c1"># Extract connection information</span>
</span><span id="StatusBar-61"><a href="#StatusBar-61"><span class="linenos"> 61</span></a>        <span class="n">connections</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connections&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-62"><a href="#StatusBar-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">connections</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-63"><a href="#StatusBar-63"><span class="linenos"> 63</span></a>
</span><span id="StatusBar-64"><a href="#StatusBar-64"><span class="linenos"> 64</span></a>        <span class="c1"># Extract API key information</span>
</span><span id="StatusBar-65"><a href="#StatusBar-65"><span class="linenos"> 65</span></a>        <span class="n">connection_manager</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection_manager&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-66"><a href="#StatusBar-66"><span class="linenos"> 66</span></a>        <span class="n">api_keys</span> <span class="o">=</span> <span class="n">connection_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_keys&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-67"><a href="#StatusBar-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">api_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-68"><a href="#StatusBar-68"><span class="linenos"> 68</span></a>
</span><span id="StatusBar-69"><a href="#StatusBar-69"><span class="linenos"> 69</span></a>        <span class="c1"># Extract error information</span>
</span><span id="StatusBar-70"><a href="#StatusBar-70"><span class="linenos"> 70</span></a>        <span class="n">security</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-71"><a href="#StatusBar-71"><span class="linenos"> 71</span></a>        <span class="n">abuse_detection</span> <span class="o">=</span> <span class="n">security</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;abuse_detection&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-72"><a href="#StatusBar-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">abuse_detection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total_violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar-73"><a href="#StatusBar-73"><span class="linenos"> 73</span></a>
</span><span id="StatusBar-74"><a href="#StatusBar-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-75"><a href="#StatusBar-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server status&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span><span id="StatusBar-76"><a href="#StatusBar-76"><span class="linenos"> 76</span></a>
</span><span id="StatusBar-77"><a href="#StatusBar-77"><span class="linenos"> 77</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">authenticated</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-78"><a href="#StatusBar-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update connection count information.</span>
</span><span id="StatusBar-79"><a href="#StatusBar-79"><span class="linenos"> 79</span></a>
</span><span id="StatusBar-80"><a href="#StatusBar-80"><span class="linenos"> 80</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-81"><a href="#StatusBar-81"><span class="linenos"> 81</span></a><span class="sd">            total: Total number of connections</span>
</span><span id="StatusBar-82"><a href="#StatusBar-82"><span class="linenos"> 82</span></a><span class="sd">            authenticated: Number of authenticated connections</span>
</span><span id="StatusBar-83"><a href="#StatusBar-83"><span class="linenos"> 83</span></a>
</span><span id="StatusBar-84"><a href="#StatusBar-84"><span class="linenos"> 84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-85"><a href="#StatusBar-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">total</span>
</span><span id="StatusBar-86"><a href="#StatusBar-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">=</span> <span class="n">authenticated</span>
</span><span id="StatusBar-87"><a href="#StatusBar-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-88"><a href="#StatusBar-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated connection count&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span> <span class="n">authenticated</span><span class="o">=</span><span class="n">authenticated</span><span class="p">)</span>
</span><span id="StatusBar-89"><a href="#StatusBar-89"><span class="linenos"> 89</span></a>
</span><span id="StatusBar-90"><a href="#StatusBar-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_api_key_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-91"><a href="#StatusBar-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update API key count information.</span>
</span><span id="StatusBar-92"><a href="#StatusBar-92"><span class="linenos"> 92</span></a>
</span><span id="StatusBar-93"><a href="#StatusBar-93"><span class="linenos"> 93</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-94"><a href="#StatusBar-94"><span class="linenos"> 94</span></a><span class="sd">            count: Number of API keys</span>
</span><span id="StatusBar-95"><a href="#StatusBar-95"><span class="linenos"> 95</span></a>
</span><span id="StatusBar-96"><a href="#StatusBar-96"><span class="linenos"> 96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-97"><a href="#StatusBar-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">count</span>
</span><span id="StatusBar-98"><a href="#StatusBar-98"><span class="linenos"> 98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-99"><a href="#StatusBar-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated API key count&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
</span><span id="StatusBar-100"><a href="#StatusBar-100"><span class="linenos">100</span></a>
</span><span id="StatusBar-101"><a href="#StatusBar-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_error_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-102"><a href="#StatusBar-102"><span class="linenos">102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update error count information.</span>
</span><span id="StatusBar-103"><a href="#StatusBar-103"><span class="linenos">103</span></a>
</span><span id="StatusBar-104"><a href="#StatusBar-104"><span class="linenos">104</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-105"><a href="#StatusBar-105"><span class="linenos">105</span></a><span class="sd">            count: Number of errors</span>
</span><span id="StatusBar-106"><a href="#StatusBar-106"><span class="linenos">106</span></a>
</span><span id="StatusBar-107"><a href="#StatusBar-107"><span class="linenos">107</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-108"><a href="#StatusBar-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">count</span>
</span><span id="StatusBar-109"><a href="#StatusBar-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-110"><a href="#StatusBar-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated error count&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
</span><span id="StatusBar-111"><a href="#StatusBar-111"><span class="linenos">111</span></a>
</span><span id="StatusBar-112"><a href="#StatusBar-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-113"><a href="#StatusBar-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the status bar display.&quot;&quot;&quot;</span>
</span><span id="StatusBar-114"><a href="#StatusBar-114"><span class="linenos">114</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="StatusBar-115"><a href="#StatusBar-115"><span class="linenos">115</span></a>            <span class="c1"># Build status information</span>
</span><span id="StatusBar-116"><a href="#StatusBar-116"><span class="linenos">116</span></a>            <span class="n">status_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="StatusBar-117"><a href="#StatusBar-117"><span class="linenos">117</span></a>
</span><span id="StatusBar-118"><a href="#StatusBar-118"><span class="linenos">118</span></a>            <span class="c1"># Server status</span>
</span><span id="StatusBar-119"><a href="#StatusBar-119"><span class="linenos">119</span></a>            <span class="n">server_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar-120"><a href="#StatusBar-120"><span class="linenos">120</span></a>            <span class="k">if</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="StatusBar-121"><a href="#StatusBar-121"><span class="linenos">121</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;🟢 Server: Running&quot;</span><span class="p">)</span>
</span><span id="StatusBar-122"><a href="#StatusBar-122"><span class="linenos">122</span></a>                <span class="n">port</span> <span class="o">=</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
</span><span id="StatusBar-123"><a href="#StatusBar-123"><span class="linenos">123</span></a>                <span class="n">address</span> <span class="o">=</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bind_address&quot;</span><span class="p">,</span> <span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
</span><span id="StatusBar-124"><a href="#StatusBar-124"><span class="linenos">124</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-125"><a href="#StatusBar-125"><span class="linenos">125</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-126"><a href="#StatusBar-126"><span class="linenos">126</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="StatusBar-127"><a href="#StatusBar-127"><span class="linenos">127</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;🔴 Server: Stopped&quot;</span><span class="p">)</span>
</span><span id="StatusBar-128"><a href="#StatusBar-128"><span class="linenos">128</span></a>
</span><span id="StatusBar-129"><a href="#StatusBar-129"><span class="linenos">129</span></a>            <span class="c1"># Connection information</span>
</span><span id="StatusBar-130"><a href="#StatusBar-130"><span class="linenos">130</span></a>            <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connections: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-131"><a href="#StatusBar-131"><span class="linenos">131</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar-132"><a href="#StatusBar-132"><span class="linenos">132</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Auth: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-133"><a href="#StatusBar-133"><span class="linenos">133</span></a>
</span><span id="StatusBar-134"><a href="#StatusBar-134"><span class="linenos">134</span></a>            <span class="c1"># API key information</span>
</span><span id="StatusBar-135"><a href="#StatusBar-135"><span class="linenos">135</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar-136"><a href="#StatusBar-136"><span class="linenos">136</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Keys: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-137"><a href="#StatusBar-137"><span class="linenos">137</span></a>
</span><span id="StatusBar-138"><a href="#StatusBar-138"><span class="linenos">138</span></a>            <span class="c1"># Error information</span>
</span><span id="StatusBar-139"><a href="#StatusBar-139"><span class="linenos">139</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar-140"><a href="#StatusBar-140"><span class="linenos">140</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Errors: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-141"><a href="#StatusBar-141"><span class="linenos">141</span></a>
</span><span id="StatusBar-142"><a href="#StatusBar-142"><span class="linenos">142</span></a>            <span class="c1"># Last update time</span>
</span><span id="StatusBar-143"><a href="#StatusBar-143"><span class="linenos">143</span></a>            <span class="n">update_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
</span><span id="StatusBar-144"><a href="#StatusBar-144"><span class="linenos">144</span></a>            <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated: </span><span class="si">{</span><span class="n">update_time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar-145"><a href="#StatusBar-145"><span class="linenos">145</span></a>
</span><span id="StatusBar-146"><a href="#StatusBar-146"><span class="linenos">146</span></a>            <span class="c1"># Join all parts</span>
</span><span id="StatusBar-147"><a href="#StatusBar-147"><span class="linenos">147</span></a>            <span class="n">status_text</span> <span class="o">=</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_parts</span><span class="p">)</span>
</span><span id="StatusBar-148"><a href="#StatusBar-148"><span class="linenos">148</span></a>
</span><span id="StatusBar-149"><a href="#StatusBar-149"><span class="linenos">149</span></a>            <span class="c1"># Update the display</span>
</span><span id="StatusBar-150"><a href="#StatusBar-150"><span class="linenos">150</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">status_text</span><span class="p">)</span>
</span><span id="StatusBar-151"><a href="#StatusBar-151"><span class="linenos">151</span></a>
</span><span id="StatusBar-152"><a href="#StatusBar-152"><span class="linenos">152</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="StatusBar-153"><a href="#StatusBar-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating status bar display&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="StatusBar-154"><a href="#StatusBar-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Error&quot;</span><span class="p">)</span>
</span><span id="StatusBar-155"><a href="#StatusBar-155"><span class="linenos">155</span></a>
</span><span id="StatusBar-156"><a href="#StatusBar-156"><span class="linenos">156</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-157"><a href="#StatusBar-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for connection count changes.</span>
</span><span id="StatusBar-158"><a href="#StatusBar-158"><span class="linenos">158</span></a>
</span><span id="StatusBar-159"><a href="#StatusBar-159"><span class="linenos">159</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-160"><a href="#StatusBar-160"><span class="linenos">160</span></a><span class="sd">            count: New connection count</span>
</span><span id="StatusBar-161"><a href="#StatusBar-161"><span class="linenos">161</span></a>
</span><span id="StatusBar-162"><a href="#StatusBar-162"><span class="linenos">162</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-163"><a href="#StatusBar-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-164"><a href="#StatusBar-164"><span class="linenos">164</span></a>
</span><span id="StatusBar-165"><a href="#StatusBar-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_authenticated_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-166"><a href="#StatusBar-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for authenticated count changes.</span>
</span><span id="StatusBar-167"><a href="#StatusBar-167"><span class="linenos">167</span></a>
</span><span id="StatusBar-168"><a href="#StatusBar-168"><span class="linenos">168</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-169"><a href="#StatusBar-169"><span class="linenos">169</span></a><span class="sd">            count: New authenticated count</span>
</span><span id="StatusBar-170"><a href="#StatusBar-170"><span class="linenos">170</span></a>
</span><span id="StatusBar-171"><a href="#StatusBar-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-172"><a href="#StatusBar-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-173"><a href="#StatusBar-173"><span class="linenos">173</span></a>
</span><span id="StatusBar-174"><a href="#StatusBar-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_api_key_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-175"><a href="#StatusBar-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for API key count changes.</span>
</span><span id="StatusBar-176"><a href="#StatusBar-176"><span class="linenos">176</span></a>
</span><span id="StatusBar-177"><a href="#StatusBar-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-178"><a href="#StatusBar-178"><span class="linenos">178</span></a><span class="sd">            count: New API key count</span>
</span><span id="StatusBar-179"><a href="#StatusBar-179"><span class="linenos">179</span></a>
</span><span id="StatusBar-180"><a href="#StatusBar-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-181"><a href="#StatusBar-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-182"><a href="#StatusBar-182"><span class="linenos">182</span></a>
</span><span id="StatusBar-183"><a href="#StatusBar-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_error_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-184"><a href="#StatusBar-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for error count changes.</span>
</span><span id="StatusBar-185"><a href="#StatusBar-185"><span class="linenos">185</span></a>
</span><span id="StatusBar-186"><a href="#StatusBar-186"><span class="linenos">186</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-187"><a href="#StatusBar-187"><span class="linenos">187</span></a><span class="sd">            count: New error count</span>
</span><span id="StatusBar-188"><a href="#StatusBar-188"><span class="linenos">188</span></a>
</span><span id="StatusBar-189"><a href="#StatusBar-189"><span class="linenos">189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-190"><a href="#StatusBar-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-191"><a href="#StatusBar-191"><span class="linenos">191</span></a>
</span><span id="StatusBar-192"><a href="#StatusBar-192"><span class="linenos">192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_last_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-193"><a href="#StatusBar-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for last update time changes.</span>
</span><span id="StatusBar-194"><a href="#StatusBar-194"><span class="linenos">194</span></a>
</span><span id="StatusBar-195"><a href="#StatusBar-195"><span class="linenos">195</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-196"><a href="#StatusBar-196"><span class="linenos">196</span></a><span class="sd">            update_time: New update time</span>
</span><span id="StatusBar-197"><a href="#StatusBar-197"><span class="linenos">197</span></a>
</span><span id="StatusBar-198"><a href="#StatusBar-198"><span class="linenos">198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-199"><a href="#StatusBar-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-200"><a href="#StatusBar-200"><span class="linenos">200</span></a>
</span><span id="StatusBar-201"><a href="#StatusBar-201"><span class="linenos">201</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_status_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="StatusBar-202"><a href="#StatusBar-202"><span class="linenos">202</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a summary of current status information.</span>
</span><span id="StatusBar-203"><a href="#StatusBar-203"><span class="linenos">203</span></a>
</span><span id="StatusBar-204"><a href="#StatusBar-204"><span class="linenos">204</span></a><span class="sd">        Returns:</span>
</span><span id="StatusBar-205"><a href="#StatusBar-205"><span class="linenos">205</span></a><span class="sd">            Dictionary of status summary</span>
</span><span id="StatusBar-206"><a href="#StatusBar-206"><span class="linenos">206</span></a>
</span><span id="StatusBar-207"><a href="#StatusBar-207"><span class="linenos">207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-208"><a href="#StatusBar-208"><span class="linenos">208</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="StatusBar-209"><a href="#StatusBar-209"><span class="linenos">209</span></a>            <span class="s2">&quot;server_running&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
</span><span id="StatusBar-210"><a href="#StatusBar-210"><span class="linenos">210</span></a>            <span class="s2">&quot;connection_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span><span class="p">,</span>
</span><span id="StatusBar-211"><a href="#StatusBar-211"><span class="linenos">211</span></a>            <span class="s2">&quot;authenticated_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span><span class="p">,</span>
</span><span id="StatusBar-212"><a href="#StatusBar-212"><span class="linenos">212</span></a>            <span class="s2">&quot;api_key_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span><span class="p">,</span>
</span><span id="StatusBar-213"><a href="#StatusBar-213"><span class="linenos">213</span></a>            <span class="s2">&quot;error_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span><span class="p">,</span>
</span><span id="StatusBar-214"><a href="#StatusBar-214"><span class="linenos">214</span></a>            <span class="s2">&quot;last_update&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="StatusBar-215"><a href="#StatusBar-215"><span class="linenos">215</span></a>            <span class="s2">&quot;server_status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">,</span>
</span><span id="StatusBar-216"><a href="#StatusBar-216"><span class="linenos">216</span></a>        <span class="p">}</span>
</span><span id="StatusBar-217"><a href="#StatusBar-217"><span class="linenos">217</span></a>
</span><span id="StatusBar-218"><a href="#StatusBar-218"><span class="linenos">218</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-219"><a href="#StatusBar-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a temporary status message.</span>
</span><span id="StatusBar-220"><a href="#StatusBar-220"><span class="linenos">220</span></a>
</span><span id="StatusBar-221"><a href="#StatusBar-221"><span class="linenos">221</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-222"><a href="#StatusBar-222"><span class="linenos">222</span></a><span class="sd">            message: Status message to display</span>
</span><span id="StatusBar-223"><a href="#StatusBar-223"><span class="linenos">223</span></a><span class="sd">            timeout: Optional timeout in seconds to revert to normal status</span>
</span><span id="StatusBar-224"><a href="#StatusBar-224"><span class="linenos">224</span></a>
</span><span id="StatusBar-225"><a href="#StatusBar-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-226"><a href="#StatusBar-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="StatusBar-227"><a href="#StatusBar-227"><span class="linenos">227</span></a>
</span><span id="StatusBar-228"><a href="#StatusBar-228"><span class="linenos">228</span></a>        <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
</span><span id="StatusBar-229"><a href="#StatusBar-229"><span class="linenos">229</span></a>            <span class="c1"># Schedule revert to normal status</span>
</span><span id="StatusBar-230"><a href="#StatusBar-230"><span class="linenos">230</span></a>            <span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="StatusBar-231"><a href="#StatusBar-231"><span class="linenos">231</span></a>
</span><span id="StatusBar-232"><a href="#StatusBar-232"><span class="linenos">232</span></a>            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_revert_status_after_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>
</span><span id="StatusBar-233"><a href="#StatusBar-233"><span class="linenos">233</span></a>
</span><span id="StatusBar-234"><a href="#StatusBar-234"><span class="linenos">234</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Set status message&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="StatusBar-235"><a href="#StatusBar-235"><span class="linenos">235</span></a>
</span><span id="StatusBar-236"><a href="#StatusBar-236"><span class="linenos">236</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_revert_status_after_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-237"><a href="#StatusBar-237"><span class="linenos">237</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Revert status message after timeout.</span>
</span><span id="StatusBar-238"><a href="#StatusBar-238"><span class="linenos">238</span></a>
</span><span id="StatusBar-239"><a href="#StatusBar-239"><span class="linenos">239</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-240"><a href="#StatusBar-240"><span class="linenos">240</span></a><span class="sd">            timeout: Timeout in seconds</span>
</span><span id="StatusBar-241"><a href="#StatusBar-241"><span class="linenos">241</span></a>
</span><span id="StatusBar-242"><a href="#StatusBar-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-243"><a href="#StatusBar-243"><span class="linenos">243</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="StatusBar-244"><a href="#StatusBar-244"><span class="linenos">244</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar-245"><a href="#StatusBar-245"><span class="linenos">245</span></a>
</span><span id="StatusBar-246"><a href="#StatusBar-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_status_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-247"><a href="#StatusBar-247"><span class="linenos">247</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a status indicator to the display.</span>
</span><span id="StatusBar-248"><a href="#StatusBar-248"><span class="linenos">248</span></a>
</span><span id="StatusBar-249"><a href="#StatusBar-249"><span class="linenos">249</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-250"><a href="#StatusBar-250"><span class="linenos">250</span></a><span class="sd">            indicator: Indicator name</span>
</span><span id="StatusBar-251"><a href="#StatusBar-251"><span class="linenos">251</span></a><span class="sd">            value: Indicator value</span>
</span><span id="StatusBar-252"><a href="#StatusBar-252"><span class="linenos">252</span></a>
</span><span id="StatusBar-253"><a href="#StatusBar-253"><span class="linenos">253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-254"><a href="#StatusBar-254"><span class="linenos">254</span></a>        <span class="c1"># This would be used to add custom status indicators</span>
</span><span id="StatusBar-255"><a href="#StatusBar-255"><span class="linenos">255</span></a>        <span class="c1"># For now, we&#39;ll just log it</span>
</span><span id="StatusBar-256"><a href="#StatusBar-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added status indicator&quot;</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</span><span id="StatusBar-257"><a href="#StatusBar-257"><span class="linenos">257</span></a>
</span><span id="StatusBar-258"><a href="#StatusBar-258"><span class="linenos">258</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_status_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar-259"><a href="#StatusBar-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a status indicator from the display.</span>
</span><span id="StatusBar-260"><a href="#StatusBar-260"><span class="linenos">260</span></a>
</span><span id="StatusBar-261"><a href="#StatusBar-261"><span class="linenos">261</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar-262"><a href="#StatusBar-262"><span class="linenos">262</span></a><span class="sd">            indicator: Indicator name to remove</span>
</span><span id="StatusBar-263"><a href="#StatusBar-263"><span class="linenos">263</span></a>
</span><span id="StatusBar-264"><a href="#StatusBar-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar-265"><a href="#StatusBar-265"><span class="linenos">265</span></a>        <span class="c1"># This would be used to remove custom status indicators</span>
</span><span id="StatusBar-266"><a href="#StatusBar-266"><span class="linenos">266</span></a>        <span class="c1"># For now, we&#39;ll just log it</span>
</span><span id="StatusBar-267"><a href="#StatusBar-267"><span class="linenos">267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Removed status indicator&quot;</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Status bar widget for displaying real-time status information.</p>

<p>This widget shows server status, connection counts, system metrics,
and other relevant information in a compact format.</p>
</div>


                            <div id="StatusBar.__init__" class="classattr">
                                        <input id="StatusBar.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">StatusBar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;status-bar&#39;</span></span>)</span>

                <label class="view-source-button" for="StatusBar.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.__init__-27"><a href="#StatusBar.__init__-27"><span class="linenos">27</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;status-bar&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.__init__-28"><a href="#StatusBar.__init__-28"><span class="linenos">28</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the status bar.</span>
</span><span id="StatusBar.__init__-29"><a href="#StatusBar.__init__-29"><span class="linenos">29</span></a>
</span><span id="StatusBar.__init__-30"><a href="#StatusBar.__init__-30"><span class="linenos">30</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.__init__-31"><a href="#StatusBar.__init__-31"><span class="linenos">31</span></a><span class="sd">            id: Widget ID</span>
</span><span id="StatusBar.__init__-32"><a href="#StatusBar.__init__-32"><span class="linenos">32</span></a>
</span><span id="StatusBar.__init__-33"><a href="#StatusBar.__init__-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.__init__-34"><a href="#StatusBar.__init__-34"><span class="linenos">34</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span><span id="StatusBar.__init__-35"><a href="#StatusBar.__init__-35"><span class="linenos">35</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.__init__-36"><a href="#StatusBar.__init__-36"><span class="linenos">36</span></a>
</span><span id="StatusBar.__init__-37"><a href="#StatusBar.__init__-37"><span class="linenos">37</span></a>        <span class="c1"># Status information</span>
</span><span id="StatusBar.__init__-38"><a href="#StatusBar.__init__-38"><span class="linenos">38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="StatusBar.__init__-39"><a href="#StatusBar.__init__-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.__init__-40"><a href="#StatusBar.__init__-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.__init__-41"><a href="#StatusBar.__init__-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.__init__-42"><a href="#StatusBar.__init__-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.__init__-43"><a href="#StatusBar.__init__-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the status bar.</p>

<p>Args:
    id: Widget ID</p>
</div>


                            </div>
                            <div id="StatusBar.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.logger"></a>
    
    

                            </div>
                            <div id="StatusBar.server_status" class="classattr">
                                <div class="attr variable">
            <span class="name">server_status</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.server_status"></a>
    
    

                            </div>
                            <div id="StatusBar.connection_count" class="classattr">
                                <div class="attr variable">
            <span class="name">connection_count</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.connection_count"></a>
    
    

                            </div>
                            <div id="StatusBar.authenticated_count" class="classattr">
                                <div class="attr variable">
            <span class="name">authenticated_count</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.authenticated_count"></a>
    
    

                            </div>
                            <div id="StatusBar.api_key_count" class="classattr">
                                <div class="attr variable">
            <span class="name">api_key_count</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.api_key_count"></a>
    
    

                            </div>
                            <div id="StatusBar.error_count" class="classattr">
                                <div class="attr variable">
            <span class="name">error_count</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.error_count"></a>
    
    

                            </div>
                            <div id="StatusBar.last_update" class="classattr">
                                <div class="attr variable">
            <span class="name">last_update</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.last_update"></a>
    
    

                            </div>
                            <div id="StatusBar.on_mount" class="classattr">
                                        <input id="StatusBar.on_mount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_mount</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.on_mount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.on_mount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.on_mount-45"><a href="#StatusBar.on_mount-45"><span class="linenos">45</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.on_mount-46"><a href="#StatusBar.on_mount-46"><span class="linenos">46</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle widget mount event.&quot;&quot;&quot;</span>
</span><span id="StatusBar.on_mount-47"><a href="#StatusBar.on_mount-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Status bar mounted&quot;</span><span class="p">)</span>
</span><span id="StatusBar.on_mount-48"><a href="#StatusBar.on_mount-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle widget mount event.</p>
</div>


                            </div>
                            <div id="StatusBar.update_server_status" class="classattr">
                                        <input id="StatusBar.update_server_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_server_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.update_server_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.update_server_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.update_server_status-50"><a href="#StatusBar.update_server_status-50"><span class="linenos">50</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_server_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.update_server_status-51"><a href="#StatusBar.update_server_status-51"><span class="linenos">51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update server status information.</span>
</span><span id="StatusBar.update_server_status-52"><a href="#StatusBar.update_server_status-52"><span class="linenos">52</span></a>
</span><span id="StatusBar.update_server_status-53"><a href="#StatusBar.update_server_status-53"><span class="linenos">53</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.update_server_status-54"><a href="#StatusBar.update_server_status-54"><span class="linenos">54</span></a><span class="sd">            status: Server status dictionary</span>
</span><span id="StatusBar.update_server_status-55"><a href="#StatusBar.update_server_status-55"><span class="linenos">55</span></a>
</span><span id="StatusBar.update_server_status-56"><a href="#StatusBar.update_server_status-56"><span class="linenos">56</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.update_server_status-57"><a href="#StatusBar.update_server_status-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="StatusBar.update_server_status-58"><a href="#StatusBar.update_server_status-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="StatusBar.update_server_status-59"><a href="#StatusBar.update_server_status-59"><span class="linenos">59</span></a>
</span><span id="StatusBar.update_server_status-60"><a href="#StatusBar.update_server_status-60"><span class="linenos">60</span></a>        <span class="c1"># Extract connection information</span>
</span><span id="StatusBar.update_server_status-61"><a href="#StatusBar.update_server_status-61"><span class="linenos">61</span></a>        <span class="n">connections</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connections&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_server_status-62"><a href="#StatusBar.update_server_status-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">connections</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.update_server_status-63"><a href="#StatusBar.update_server_status-63"><span class="linenos">63</span></a>
</span><span id="StatusBar.update_server_status-64"><a href="#StatusBar.update_server_status-64"><span class="linenos">64</span></a>        <span class="c1"># Extract API key information</span>
</span><span id="StatusBar.update_server_status-65"><a href="#StatusBar.update_server_status-65"><span class="linenos">65</span></a>        <span class="n">connection_manager</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection_manager&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_server_status-66"><a href="#StatusBar.update_server_status-66"><span class="linenos">66</span></a>        <span class="n">api_keys</span> <span class="o">=</span> <span class="n">connection_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_keys&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_server_status-67"><a href="#StatusBar.update_server_status-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">api_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.update_server_status-68"><a href="#StatusBar.update_server_status-68"><span class="linenos">68</span></a>
</span><span id="StatusBar.update_server_status-69"><a href="#StatusBar.update_server_status-69"><span class="linenos">69</span></a>        <span class="c1"># Extract error information</span>
</span><span id="StatusBar.update_server_status-70"><a href="#StatusBar.update_server_status-70"><span class="linenos">70</span></a>        <span class="n">security</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_server_status-71"><a href="#StatusBar.update_server_status-71"><span class="linenos">71</span></a>        <span class="n">abuse_detection</span> <span class="o">=</span> <span class="n">security</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;abuse_detection&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_server_status-72"><a href="#StatusBar.update_server_status-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">abuse_detection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total_violations&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="StatusBar.update_server_status-73"><a href="#StatusBar.update_server_status-73"><span class="linenos">73</span></a>
</span><span id="StatusBar.update_server_status-74"><a href="#StatusBar.update_server_status-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar.update_server_status-75"><a href="#StatusBar.update_server_status-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated server status&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update server status information.</p>

<p>Args:
    status: Server status dictionary</p>
</div>


                            </div>
                            <div id="StatusBar.update_connection_count" class="classattr">
                                        <input id="StatusBar.update_connection_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_connection_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">total</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">authenticated</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.update_connection_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.update_connection_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.update_connection_count-77"><a href="#StatusBar.update_connection_count-77"><span class="linenos">77</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">authenticated</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.update_connection_count-78"><a href="#StatusBar.update_connection_count-78"><span class="linenos">78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update connection count information.</span>
</span><span id="StatusBar.update_connection_count-79"><a href="#StatusBar.update_connection_count-79"><span class="linenos">79</span></a>
</span><span id="StatusBar.update_connection_count-80"><a href="#StatusBar.update_connection_count-80"><span class="linenos">80</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.update_connection_count-81"><a href="#StatusBar.update_connection_count-81"><span class="linenos">81</span></a><span class="sd">            total: Total number of connections</span>
</span><span id="StatusBar.update_connection_count-82"><a href="#StatusBar.update_connection_count-82"><span class="linenos">82</span></a><span class="sd">            authenticated: Number of authenticated connections</span>
</span><span id="StatusBar.update_connection_count-83"><a href="#StatusBar.update_connection_count-83"><span class="linenos">83</span></a>
</span><span id="StatusBar.update_connection_count-84"><a href="#StatusBar.update_connection_count-84"><span class="linenos">84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.update_connection_count-85"><a href="#StatusBar.update_connection_count-85"><span class="linenos">85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span> <span class="o">=</span> <span class="n">total</span>
</span><span id="StatusBar.update_connection_count-86"><a href="#StatusBar.update_connection_count-86"><span class="linenos">86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">=</span> <span class="n">authenticated</span>
</span><span id="StatusBar.update_connection_count-87"><a href="#StatusBar.update_connection_count-87"><span class="linenos">87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar.update_connection_count-88"><a href="#StatusBar.update_connection_count-88"><span class="linenos">88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated connection count&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span> <span class="n">authenticated</span><span class="o">=</span><span class="n">authenticated</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update connection count information.</p>

<p>Args:
    total: Total number of connections
    authenticated: Number of authenticated connections</p>
</div>


                            </div>
                            <div id="StatusBar.update_api_key_count" class="classattr">
                                        <input id="StatusBar.update_api_key_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_api_key_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.update_api_key_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.update_api_key_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.update_api_key_count-90"><a href="#StatusBar.update_api_key_count-90"><span class="linenos">90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_api_key_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.update_api_key_count-91"><a href="#StatusBar.update_api_key_count-91"><span class="linenos">91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update API key count information.</span>
</span><span id="StatusBar.update_api_key_count-92"><a href="#StatusBar.update_api_key_count-92"><span class="linenos">92</span></a>
</span><span id="StatusBar.update_api_key_count-93"><a href="#StatusBar.update_api_key_count-93"><span class="linenos">93</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.update_api_key_count-94"><a href="#StatusBar.update_api_key_count-94"><span class="linenos">94</span></a><span class="sd">            count: Number of API keys</span>
</span><span id="StatusBar.update_api_key_count-95"><a href="#StatusBar.update_api_key_count-95"><span class="linenos">95</span></a>
</span><span id="StatusBar.update_api_key_count-96"><a href="#StatusBar.update_api_key_count-96"><span class="linenos">96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.update_api_key_count-97"><a href="#StatusBar.update_api_key_count-97"><span class="linenos">97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">=</span> <span class="n">count</span>
</span><span id="StatusBar.update_api_key_count-98"><a href="#StatusBar.update_api_key_count-98"><span class="linenos">98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar.update_api_key_count-99"><a href="#StatusBar.update_api_key_count-99"><span class="linenos">99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated API key count&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update API key count information.</p>

<p>Args:
    count: Number of API keys</p>
</div>


                            </div>
                            <div id="StatusBar.update_error_count" class="classattr">
                                        <input id="StatusBar.update_error_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_error_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.update_error_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.update_error_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.update_error_count-101"><a href="#StatusBar.update_error_count-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_error_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.update_error_count-102"><a href="#StatusBar.update_error_count-102"><span class="linenos">102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update error count information.</span>
</span><span id="StatusBar.update_error_count-103"><a href="#StatusBar.update_error_count-103"><span class="linenos">103</span></a>
</span><span id="StatusBar.update_error_count-104"><a href="#StatusBar.update_error_count-104"><span class="linenos">104</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.update_error_count-105"><a href="#StatusBar.update_error_count-105"><span class="linenos">105</span></a><span class="sd">            count: Number of errors</span>
</span><span id="StatusBar.update_error_count-106"><a href="#StatusBar.update_error_count-106"><span class="linenos">106</span></a>
</span><span id="StatusBar.update_error_count-107"><a href="#StatusBar.update_error_count-107"><span class="linenos">107</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.update_error_count-108"><a href="#StatusBar.update_error_count-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="n">count</span>
</span><span id="StatusBar.update_error_count-109"><a href="#StatusBar.update_error_count-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span><span id="StatusBar.update_error_count-110"><a href="#StatusBar.update_error_count-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated error count&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update error count information.</p>

<p>Args:
    count: Number of errors</p>
</div>


                            </div>
                            <div id="StatusBar.update_display" class="classattr">
                                        <input id="StatusBar.update_display-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_display</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.update_display-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.update_display"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.update_display-112"><a href="#StatusBar.update_display-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.update_display-113"><a href="#StatusBar.update_display-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the status bar display.&quot;&quot;&quot;</span>
</span><span id="StatusBar.update_display-114"><a href="#StatusBar.update_display-114"><span class="linenos">114</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="StatusBar.update_display-115"><a href="#StatusBar.update_display-115"><span class="linenos">115</span></a>            <span class="c1"># Build status information</span>
</span><span id="StatusBar.update_display-116"><a href="#StatusBar.update_display-116"><span class="linenos">116</span></a>            <span class="n">status_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="StatusBar.update_display-117"><a href="#StatusBar.update_display-117"><span class="linenos">117</span></a>
</span><span id="StatusBar.update_display-118"><a href="#StatusBar.update_display-118"><span class="linenos">118</span></a>            <span class="c1"># Server status</span>
</span><span id="StatusBar.update_display-119"><a href="#StatusBar.update_display-119"><span class="linenos">119</span></a>            <span class="n">server_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="StatusBar.update_display-120"><a href="#StatusBar.update_display-120"><span class="linenos">120</span></a>            <span class="k">if</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="StatusBar.update_display-121"><a href="#StatusBar.update_display-121"><span class="linenos">121</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;🟢 Server: Running&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-122"><a href="#StatusBar.update_display-122"><span class="linenos">122</span></a>                <span class="n">port</span> <span class="o">=</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-123"><a href="#StatusBar.update_display-123"><span class="linenos">123</span></a>                <span class="n">address</span> <span class="o">=</span> <span class="n">server_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bind_address&quot;</span><span class="p">,</span> <span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-124"><a href="#StatusBar.update_display-124"><span class="linenos">124</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-125"><a href="#StatusBar.update_display-125"><span class="linenos">125</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Address: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-126"><a href="#StatusBar.update_display-126"><span class="linenos">126</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="StatusBar.update_display-127"><a href="#StatusBar.update_display-127"><span class="linenos">127</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;🔴 Server: Stopped&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-128"><a href="#StatusBar.update_display-128"><span class="linenos">128</span></a>
</span><span id="StatusBar.update_display-129"><a href="#StatusBar.update_display-129"><span class="linenos">129</span></a>            <span class="c1"># Connection information</span>
</span><span id="StatusBar.update_display-130"><a href="#StatusBar.update_display-130"><span class="linenos">130</span></a>            <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connections: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-131"><a href="#StatusBar.update_display-131"><span class="linenos">131</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar.update_display-132"><a href="#StatusBar.update_display-132"><span class="linenos">132</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Auth: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-133"><a href="#StatusBar.update_display-133"><span class="linenos">133</span></a>
</span><span id="StatusBar.update_display-134"><a href="#StatusBar.update_display-134"><span class="linenos">134</span></a>            <span class="c1"># API key information</span>
</span><span id="StatusBar.update_display-135"><a href="#StatusBar.update_display-135"><span class="linenos">135</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar.update_display-136"><a href="#StatusBar.update_display-136"><span class="linenos">136</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Keys: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-137"><a href="#StatusBar.update_display-137"><span class="linenos">137</span></a>
</span><span id="StatusBar.update_display-138"><a href="#StatusBar.update_display-138"><span class="linenos">138</span></a>            <span class="c1"># Error information</span>
</span><span id="StatusBar.update_display-139"><a href="#StatusBar.update_display-139"><span class="linenos">139</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="StatusBar.update_display-140"><a href="#StatusBar.update_display-140"><span class="linenos">140</span></a>                <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Errors: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-141"><a href="#StatusBar.update_display-141"><span class="linenos">141</span></a>
</span><span id="StatusBar.update_display-142"><a href="#StatusBar.update_display-142"><span class="linenos">142</span></a>            <span class="c1"># Last update time</span>
</span><span id="StatusBar.update_display-143"><a href="#StatusBar.update_display-143"><span class="linenos">143</span></a>            <span class="n">update_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-144"><a href="#StatusBar.update_display-144"><span class="linenos">144</span></a>            <span class="n">status_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated: </span><span class="si">{</span><span class="n">update_time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="StatusBar.update_display-145"><a href="#StatusBar.update_display-145"><span class="linenos">145</span></a>
</span><span id="StatusBar.update_display-146"><a href="#StatusBar.update_display-146"><span class="linenos">146</span></a>            <span class="c1"># Join all parts</span>
</span><span id="StatusBar.update_display-147"><a href="#StatusBar.update_display-147"><span class="linenos">147</span></a>            <span class="n">status_text</span> <span class="o">=</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_parts</span><span class="p">)</span>
</span><span id="StatusBar.update_display-148"><a href="#StatusBar.update_display-148"><span class="linenos">148</span></a>
</span><span id="StatusBar.update_display-149"><a href="#StatusBar.update_display-149"><span class="linenos">149</span></a>            <span class="c1"># Update the display</span>
</span><span id="StatusBar.update_display-150"><a href="#StatusBar.update_display-150"><span class="linenos">150</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">status_text</span><span class="p">)</span>
</span><span id="StatusBar.update_display-151"><a href="#StatusBar.update_display-151"><span class="linenos">151</span></a>
</span><span id="StatusBar.update_display-152"><a href="#StatusBar.update_display-152"><span class="linenos">152</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="StatusBar.update_display-153"><a href="#StatusBar.update_display-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error updating status bar display&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="StatusBar.update_display-154"><a href="#StatusBar.update_display-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;Status: Error&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Update the status bar display.</p>
</div>


                            </div>
                            <div id="StatusBar.watch_connection_count" class="classattr">
                                        <input id="StatusBar.watch_connection_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_connection_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.watch_connection_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.watch_connection_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.watch_connection_count-156"><a href="#StatusBar.watch_connection_count-156"><span class="linenos">156</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.watch_connection_count-157"><a href="#StatusBar.watch_connection_count-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for connection count changes.</span>
</span><span id="StatusBar.watch_connection_count-158"><a href="#StatusBar.watch_connection_count-158"><span class="linenos">158</span></a>
</span><span id="StatusBar.watch_connection_count-159"><a href="#StatusBar.watch_connection_count-159"><span class="linenos">159</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.watch_connection_count-160"><a href="#StatusBar.watch_connection_count-160"><span class="linenos">160</span></a><span class="sd">            count: New connection count</span>
</span><span id="StatusBar.watch_connection_count-161"><a href="#StatusBar.watch_connection_count-161"><span class="linenos">161</span></a>
</span><span id="StatusBar.watch_connection_count-162"><a href="#StatusBar.watch_connection_count-162"><span class="linenos">162</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.watch_connection_count-163"><a href="#StatusBar.watch_connection_count-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Watch for connection count changes.</p>

<p>Args:
    count: New connection count</p>
</div>


                            </div>
                            <div id="StatusBar.watch_authenticated_count" class="classattr">
                                        <input id="StatusBar.watch_authenticated_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_authenticated_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.watch_authenticated_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.watch_authenticated_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.watch_authenticated_count-165"><a href="#StatusBar.watch_authenticated_count-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_authenticated_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.watch_authenticated_count-166"><a href="#StatusBar.watch_authenticated_count-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for authenticated count changes.</span>
</span><span id="StatusBar.watch_authenticated_count-167"><a href="#StatusBar.watch_authenticated_count-167"><span class="linenos">167</span></a>
</span><span id="StatusBar.watch_authenticated_count-168"><a href="#StatusBar.watch_authenticated_count-168"><span class="linenos">168</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.watch_authenticated_count-169"><a href="#StatusBar.watch_authenticated_count-169"><span class="linenos">169</span></a><span class="sd">            count: New authenticated count</span>
</span><span id="StatusBar.watch_authenticated_count-170"><a href="#StatusBar.watch_authenticated_count-170"><span class="linenos">170</span></a>
</span><span id="StatusBar.watch_authenticated_count-171"><a href="#StatusBar.watch_authenticated_count-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.watch_authenticated_count-172"><a href="#StatusBar.watch_authenticated_count-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Watch for authenticated count changes.</p>

<p>Args:
    count: New authenticated count</p>
</div>


                            </div>
                            <div id="StatusBar.watch_api_key_count" class="classattr">
                                        <input id="StatusBar.watch_api_key_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_api_key_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.watch_api_key_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.watch_api_key_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.watch_api_key_count-174"><a href="#StatusBar.watch_api_key_count-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_api_key_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.watch_api_key_count-175"><a href="#StatusBar.watch_api_key_count-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for API key count changes.</span>
</span><span id="StatusBar.watch_api_key_count-176"><a href="#StatusBar.watch_api_key_count-176"><span class="linenos">176</span></a>
</span><span id="StatusBar.watch_api_key_count-177"><a href="#StatusBar.watch_api_key_count-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.watch_api_key_count-178"><a href="#StatusBar.watch_api_key_count-178"><span class="linenos">178</span></a><span class="sd">            count: New API key count</span>
</span><span id="StatusBar.watch_api_key_count-179"><a href="#StatusBar.watch_api_key_count-179"><span class="linenos">179</span></a>
</span><span id="StatusBar.watch_api_key_count-180"><a href="#StatusBar.watch_api_key_count-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.watch_api_key_count-181"><a href="#StatusBar.watch_api_key_count-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Watch for API key count changes.</p>

<p>Args:
    count: New API key count</p>
</div>


                            </div>
                            <div id="StatusBar.watch_error_count" class="classattr">
                                        <input id="StatusBar.watch_error_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_error_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">count</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.watch_error_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.watch_error_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.watch_error_count-183"><a href="#StatusBar.watch_error_count-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_error_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.watch_error_count-184"><a href="#StatusBar.watch_error_count-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for error count changes.</span>
</span><span id="StatusBar.watch_error_count-185"><a href="#StatusBar.watch_error_count-185"><span class="linenos">185</span></a>
</span><span id="StatusBar.watch_error_count-186"><a href="#StatusBar.watch_error_count-186"><span class="linenos">186</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.watch_error_count-187"><a href="#StatusBar.watch_error_count-187"><span class="linenos">187</span></a><span class="sd">            count: New error count</span>
</span><span id="StatusBar.watch_error_count-188"><a href="#StatusBar.watch_error_count-188"><span class="linenos">188</span></a>
</span><span id="StatusBar.watch_error_count-189"><a href="#StatusBar.watch_error_count-189"><span class="linenos">189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.watch_error_count-190"><a href="#StatusBar.watch_error_count-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Watch for error count changes.</p>

<p>Args:
    count: New error count</p>
</div>


                            </div>
                            <div id="StatusBar.watch_last_update" class="classattr">
                                        <input id="StatusBar.watch_last_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">watch_last_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">update_time</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.watch_last_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.watch_last_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.watch_last_update-192"><a href="#StatusBar.watch_last_update-192"><span class="linenos">192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">watch_last_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.watch_last_update-193"><a href="#StatusBar.watch_last_update-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Watch for last update time changes.</span>
</span><span id="StatusBar.watch_last_update-194"><a href="#StatusBar.watch_last_update-194"><span class="linenos">194</span></a>
</span><span id="StatusBar.watch_last_update-195"><a href="#StatusBar.watch_last_update-195"><span class="linenos">195</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.watch_last_update-196"><a href="#StatusBar.watch_last_update-196"><span class="linenos">196</span></a><span class="sd">            update_time: New update time</span>
</span><span id="StatusBar.watch_last_update-197"><a href="#StatusBar.watch_last_update-197"><span class="linenos">197</span></a>
</span><span id="StatusBar.watch_last_update-198"><a href="#StatusBar.watch_last_update-198"><span class="linenos">198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.watch_last_update-199"><a href="#StatusBar.watch_last_update-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_display</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Watch for last update time changes.</p>

<p>Args:
    update_time: New update time</p>
</div>


                            </div>
                            <div id="StatusBar.get_status_summary" class="classattr">
                                        <input id="StatusBar.get_status_summary-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_status_summary</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="StatusBar.get_status_summary-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.get_status_summary"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.get_status_summary-201"><a href="#StatusBar.get_status_summary-201"><span class="linenos">201</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_status_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="StatusBar.get_status_summary-202"><a href="#StatusBar.get_status_summary-202"><span class="linenos">202</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a summary of current status information.</span>
</span><span id="StatusBar.get_status_summary-203"><a href="#StatusBar.get_status_summary-203"><span class="linenos">203</span></a>
</span><span id="StatusBar.get_status_summary-204"><a href="#StatusBar.get_status_summary-204"><span class="linenos">204</span></a><span class="sd">        Returns:</span>
</span><span id="StatusBar.get_status_summary-205"><a href="#StatusBar.get_status_summary-205"><span class="linenos">205</span></a><span class="sd">            Dictionary of status summary</span>
</span><span id="StatusBar.get_status_summary-206"><a href="#StatusBar.get_status_summary-206"><span class="linenos">206</span></a>
</span><span id="StatusBar.get_status_summary-207"><a href="#StatusBar.get_status_summary-207"><span class="linenos">207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.get_status_summary-208"><a href="#StatusBar.get_status_summary-208"><span class="linenos">208</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="StatusBar.get_status_summary-209"><a href="#StatusBar.get_status_summary-209"><span class="linenos">209</span></a>            <span class="s2">&quot;server_running&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_running&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
</span><span id="StatusBar.get_status_summary-210"><a href="#StatusBar.get_status_summary-210"><span class="linenos">210</span></a>            <span class="s2">&quot;connection_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_count</span><span class="p">,</span>
</span><span id="StatusBar.get_status_summary-211"><a href="#StatusBar.get_status_summary-211"><span class="linenos">211</span></a>            <span class="s2">&quot;authenticated_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_count</span><span class="p">,</span>
</span><span id="StatusBar.get_status_summary-212"><a href="#StatusBar.get_status_summary-212"><span class="linenos">212</span></a>            <span class="s2">&quot;api_key_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key_count</span><span class="p">,</span>
</span><span id="StatusBar.get_status_summary-213"><a href="#StatusBar.get_status_summary-213"><span class="linenos">213</span></a>            <span class="s2">&quot;error_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span><span class="p">,</span>
</span><span id="StatusBar.get_status_summary-214"><a href="#StatusBar.get_status_summary-214"><span class="linenos">214</span></a>            <span class="s2">&quot;last_update&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="StatusBar.get_status_summary-215"><a href="#StatusBar.get_status_summary-215"><span class="linenos">215</span></a>            <span class="s2">&quot;server_status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_status</span><span class="p">,</span>
</span><span id="StatusBar.get_status_summary-216"><a href="#StatusBar.get_status_summary-216"><span class="linenos">216</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get a summary of current status information.</p>

<p>Returns:
    Dictionary of status summary</p>
</div>


                            </div>
                            <div id="StatusBar.set_status_message" class="classattr">
                                        <input id="StatusBar.set_status_message-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_status_message</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.set_status_message-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.set_status_message"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.set_status_message-218"><a href="#StatusBar.set_status_message-218"><span class="linenos">218</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.set_status_message-219"><a href="#StatusBar.set_status_message-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a temporary status message.</span>
</span><span id="StatusBar.set_status_message-220"><a href="#StatusBar.set_status_message-220"><span class="linenos">220</span></a>
</span><span id="StatusBar.set_status_message-221"><a href="#StatusBar.set_status_message-221"><span class="linenos">221</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.set_status_message-222"><a href="#StatusBar.set_status_message-222"><span class="linenos">222</span></a><span class="sd">            message: Status message to display</span>
</span><span id="StatusBar.set_status_message-223"><a href="#StatusBar.set_status_message-223"><span class="linenos">223</span></a><span class="sd">            timeout: Optional timeout in seconds to revert to normal status</span>
</span><span id="StatusBar.set_status_message-224"><a href="#StatusBar.set_status_message-224"><span class="linenos">224</span></a>
</span><span id="StatusBar.set_status_message-225"><a href="#StatusBar.set_status_message-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.set_status_message-226"><a href="#StatusBar.set_status_message-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="StatusBar.set_status_message-227"><a href="#StatusBar.set_status_message-227"><span class="linenos">227</span></a>
</span><span id="StatusBar.set_status_message-228"><a href="#StatusBar.set_status_message-228"><span class="linenos">228</span></a>        <span class="k">if</span> <span class="n">timeout</span><span class="p">:</span>
</span><span id="StatusBar.set_status_message-229"><a href="#StatusBar.set_status_message-229"><span class="linenos">229</span></a>            <span class="c1"># Schedule revert to normal status</span>
</span><span id="StatusBar.set_status_message-230"><a href="#StatusBar.set_status_message-230"><span class="linenos">230</span></a>            <span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="StatusBar.set_status_message-231"><a href="#StatusBar.set_status_message-231"><span class="linenos">231</span></a>
</span><span id="StatusBar.set_status_message-232"><a href="#StatusBar.set_status_message-232"><span class="linenos">232</span></a>            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_revert_status_after_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>
</span><span id="StatusBar.set_status_message-233"><a href="#StatusBar.set_status_message-233"><span class="linenos">233</span></a>
</span><span id="StatusBar.set_status_message-234"><a href="#StatusBar.set_status_message-234"><span class="linenos">234</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Set status message&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set a temporary status message.</p>

<p>Args:
    message: Status message to display
    timeout: Optional timeout in seconds to revert to normal status</p>
</div>


                            </div>
                            <div id="StatusBar.add_status_indicator" class="classattr">
                                        <input id="StatusBar.add_status_indicator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_status_indicator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.add_status_indicator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.add_status_indicator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.add_status_indicator-246"><a href="#StatusBar.add_status_indicator-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_status_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.add_status_indicator-247"><a href="#StatusBar.add_status_indicator-247"><span class="linenos">247</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a status indicator to the display.</span>
</span><span id="StatusBar.add_status_indicator-248"><a href="#StatusBar.add_status_indicator-248"><span class="linenos">248</span></a>
</span><span id="StatusBar.add_status_indicator-249"><a href="#StatusBar.add_status_indicator-249"><span class="linenos">249</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.add_status_indicator-250"><a href="#StatusBar.add_status_indicator-250"><span class="linenos">250</span></a><span class="sd">            indicator: Indicator name</span>
</span><span id="StatusBar.add_status_indicator-251"><a href="#StatusBar.add_status_indicator-251"><span class="linenos">251</span></a><span class="sd">            value: Indicator value</span>
</span><span id="StatusBar.add_status_indicator-252"><a href="#StatusBar.add_status_indicator-252"><span class="linenos">252</span></a>
</span><span id="StatusBar.add_status_indicator-253"><a href="#StatusBar.add_status_indicator-253"><span class="linenos">253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.add_status_indicator-254"><a href="#StatusBar.add_status_indicator-254"><span class="linenos">254</span></a>        <span class="c1"># This would be used to add custom status indicators</span>
</span><span id="StatusBar.add_status_indicator-255"><a href="#StatusBar.add_status_indicator-255"><span class="linenos">255</span></a>        <span class="c1"># For now, we&#39;ll just log it</span>
</span><span id="StatusBar.add_status_indicator-256"><a href="#StatusBar.add_status_indicator-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added status indicator&quot;</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add a status indicator to the display.</p>

<p>Args:
    indicator: Indicator name
    value: Indicator value</p>
</div>


                            </div>
                            <div id="StatusBar.remove_status_indicator" class="classattr">
                                        <input id="StatusBar.remove_status_indicator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_status_indicator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="StatusBar.remove_status_indicator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StatusBar.remove_status_indicator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StatusBar.remove_status_indicator-258"><a href="#StatusBar.remove_status_indicator-258"><span class="linenos">258</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_status_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="StatusBar.remove_status_indicator-259"><a href="#StatusBar.remove_status_indicator-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a status indicator from the display.</span>
</span><span id="StatusBar.remove_status_indicator-260"><a href="#StatusBar.remove_status_indicator-260"><span class="linenos">260</span></a>
</span><span id="StatusBar.remove_status_indicator-261"><a href="#StatusBar.remove_status_indicator-261"><span class="linenos">261</span></a><span class="sd">        Args:</span>
</span><span id="StatusBar.remove_status_indicator-262"><a href="#StatusBar.remove_status_indicator-262"><span class="linenos">262</span></a><span class="sd">            indicator: Indicator name to remove</span>
</span><span id="StatusBar.remove_status_indicator-263"><a href="#StatusBar.remove_status_indicator-263"><span class="linenos">263</span></a>
</span><span id="StatusBar.remove_status_indicator-264"><a href="#StatusBar.remove_status_indicator-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StatusBar.remove_status_indicator-265"><a href="#StatusBar.remove_status_indicator-265"><span class="linenos">265</span></a>        <span class="c1"># This would be used to remove custom status indicators</span>
</span><span id="StatusBar.remove_status_indicator-266"><a href="#StatusBar.remove_status_indicator-266"><span class="linenos">266</span></a>        <span class="c1"># For now, we&#39;ll just log it</span>
</span><span id="StatusBar.remove_status_indicator-267"><a href="#StatusBar.remove_status_indicator-267"><span class="linenos">267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Removed status indicator&quot;</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove a status indicator from the display.</p>

<p>Args:
    indicator: Indicator name to remove</p>
</div>


                            </div>
                            <div id="StatusBar.can_focus" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus</span><span class="annotation">: bool</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.can_focus"></a>
    
            <div class="docstring"><p>Widget may receive focus.</p>
</div>


                            </div>
                            <div id="StatusBar.can_focus_children" class="classattr">
                                <div class="attr variable">
            <span class="name">can_focus_children</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#StatusBar.can_focus_children"></a>
    
            <div class="docstring"><p>Widget's children may receive focus.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>